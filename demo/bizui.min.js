/**
 * BizUI Framework
 * @version v1.1.4
 * @copyright 2015 Sogou, Inc.
 * @link https://github.com/bizdevfe/biz-ui
 */

/**
 * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

(function(e,t){typeof define=="function"&&define.amd?define(["jquery"],t):e.bizui=t()})(this,function(e){e=e||window.$;var t,n,r;return function(e){function v(e,t){return h.call(e,t)}function m(e,t){var n,r,i,s,o,u,a,f,c,h,p,v=t&&t.split("/"),m=l.map,g=m&&m["*"]||{};if(e&&e.charAt(0)===".")if(t){e=e.split("/"),o=e.length-1,l.nodeIdCompat&&d.test(e[o])&&(e[o]=e[o].replace(d,"")),e=v.slice(0,v.length-1).concat(e);for(c=0;c<e.length;c+=1){p=e[c];if(p===".")e.splice(c,1),c-=1;else if(p===".."){if(c===1&&(e[2]===".."||e[0]===".."))break;c>0&&(e.splice(c-1,2),c-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((v||g)&&m){n=e.split("/");for(c=n.length;c>0;c-=1){r=n.slice(0,c).join("/");if(v)for(h=v.length;h>0;h-=1){i=m[v.slice(0,h).join("/")];if(i){i=i[r];if(i){s=i,u=c;break}}}if(s)break;!a&&g&&g[r]&&(a=g[r],f=c)}!s&&a&&(s=a,u=f),s&&(n.splice(0,u,s),e=n.join("/"))}return e}function g(t,n){return function(){var r=p.call(arguments,0);return typeof r[0]!="string"&&r.length===1&&r.push(null),s.apply(e,r.concat([t,n]))}}function y(e){return function(t){return m(t,e)}}function b(e){return function(t){a[e]=t}}function w(t){if(v(f,t)){var n=f[t];delete f[t],c[t]=!0,i.apply(e,n)}if(!v(a,t)&&!v(c,t))throw new Error("No "+t);return a[t]}function E(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function S(e){return function(){return l&&l.config&&l.config[e]||{}}}var i,s,o,u,a={},f={},l={},c={},h=Object.prototype.hasOwnProperty,p=[].slice,d=/\.js$/;o=function(e,t){var n,r=E(e),i=r[0];return e=r[1],i&&(i=m(i,t),n=w(i)),i?n&&n.normalize?e=n.normalize(e,y(t)):e=m(e,t):(e=m(e,t),r=E(e),i=r[0],e=r[1],i&&(n=w(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},u={require:function(e){return g(e)},exports:function(e){var t=a[e];return typeof t!="undefined"?t:a[e]={}},module:function(e){return{id:e,uri:"",exports:a[e],config:S(e)}}},i=function(t,n,r,i){var s,l,h,p,d,m=[],y=typeof r,E;i=i||t;if(y==="undefined"||y==="function"){n=!n.length&&r.length?["require","exports","module"]:n;for(d=0;d<n.length;d+=1){p=o(n[d],i),l=p.f;if(l==="require")m[d]=u.require(t);else if(l==="exports")m[d]=u.exports(t),E=!0;else if(l==="module")s=m[d]=u.module(t);else if(v(a,l)||v(f,l)||v(c,l))m[d]=w(l);else{if(!p.p)throw new Error(t+" missing "+l);p.p.load(p.n,g(i,!0),b(l),{}),m[d]=a[l]}}h=r?r.apply(a[t],m):undefined;if(t)if(s&&s.exports!==e&&s.exports!==a[t])a[t]=s.exports;else if(h!==e||!E)a[t]=h}else t&&(a[t]=r)},t=n=s=function(t,n,r,a,f){if(typeof t=="string")return u[t]?u[t](n):w(o(t,n).f);if(!t.splice){l=t,l.deps&&s(l.deps,l.callback);if(!n)return;n.splice?(t=n,n=r,r=null):t=e}return n=n||function(){},typeof r=="function"&&(r=a,a=f),a?i(e,t,n,r):setTimeout(function(){i(e,t,n,r)},4),s},s.config=function(e){return s(e)},t._defined=a,r=function(e,t,n){if(typeof e!="string")throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),!v(a,e)&&!v(f,e)&&(f[e]=[e,t,n])},r.amd={jQuery:!0}}(),r("../node_modules/almond/almond",function(){}),r("ui/Button",["require"],function(t){function n(t,n){if(t instanceof jQuery){if(!(t.length>0))return;t=t[0]}if(!o(t))return;this.main=t,this.$main=e(this.main),this.options=e.extend({},n||{}),this.init(this.options)}function o(e){return e.nodeType===1&&e.tagName.toLowerCase()==="button"}var r="biz-button",i="biz-button-disable",s="biz-button-";n.prototype={init:function(e){this.$main.addClass(r),e.theme&&this.$main.addClass(s+e.theme),e.label&&this.$main.html(e.label),e.disabled&&this.disable()},enable:function(){this.main.disabled=!1,this.$main.removeClass(i)},disable:function(){this.main.disabled=!0,this.$main.addClass(i)},destroy:function(){this.$main.removeClass(r+" "+i),this.options.theme&&this.$main.removeClass(s+this.options.theme)}};var u="bizButton";return e.extend(e.fn,{bizButton:function(t,r){var i;switch(t){case"enable":this.each(function(){i=e(this).data(u),i&&i.enable()});break;case"disable":this.each(function(){i=e(this).data(u),i&&i.disable()});break;case"destroy":this.each(function(){i=e(this).data(u),i&&(i.destroy(),e(this).data(u,null))});break;default:this.each(function(){!e(this).data(u)&&o(this)&&e(this).data(u,new n(this,t))})}return this}}),n}),r("ui/Input",["require"],function(t){function n(t,n){if(t instanceof jQuery){if(!(t.length>0))return;t=t[0]}if(!u(t))return;this.main=t,this.$main=e(this.main),this.options=e.extend({},n||{}),this.init(this.options)}function u(e){return e.nodeType===1&&e.tagName.toLowerCase()==="input"&&e.getAttribute("type").toLowerCase()==="text"}var r="biz-input",i="biz-input-disable",s="biz-input-hover",o="biz-input-focus";n.prototype={init:function(t){this.$main.addClass(r),t.disabled&&this.disable();var n=this;this.$main.on("keydown.bizInput",function(e){if(e.keyCode===13)return t.onEnter&&t.onEnter.call(n,e),!1}),this.$main.on("mouseover.bizInput",function(t){e(this).addClass(s)}).on("mouseout.bizInput",function(t){e(this).removeClass(s)}).on("focus.bizInput",function(t){e(this).addClass(o)}).on("blur.bizInput",function(t){e(this).removeClass(o)})},enable:function(){this.main.disabled=!1,this.$main.removeClass(i)},disable:function(){this.main.disabled=!0,this.$main.addClass(i)},destroy:function(){this.$main.removeClass(r+" "+i),this.$main.off("keydown.bizInput").off("mouseover.bizInput").off("mouseout.bizInput").off("focus.bizInput").off("blur.bizInput")}};var a="bizInput";return e.extend(e.fn,{bizInput:function(t,r){var i;switch(t){case"enable":this.each(function(){i=e(this).data(a),i&&i.enable()});break;case"disable":this.each(function(){i=e(this).data(a),i&&i.disable()});break;case"destroy":this.each(function(){i=e(this).data(a),i&&(i.destroy(),e(this).data(a,null))});break;default:this.each(function(){!e(this).data(a)&&u(this)&&e(this).data(a,new n(this,t))})}return this}}),n}),r("ui/Textarea",["require"],function(t){function n(t,n){if(t instanceof jQuery){if(!(t.length>0))return;t=t[0]}if(!u(t))return;this.main=t,this.$main=e(this.main),this.options=e.extend({},n||{}),this.init(this.options)}function u(e){return e.nodeType===1&&e.tagName.toLowerCase()==="textarea"}var r="biz-textarea",i="biz-textarea-disable",s="biz-textarea-hover",o="biz-textarea-focus";n.prototype={init:function(t){this.$main.addClass(r),t.disabled&&this.disable(),this.$main.on("mouseover.bizTextarea",function(t){e(this).addClass(s)}).on("mouseout.bizTextarea",function(t){e(this).removeClass(s)}).on("focus.bizTextarea",function(t){e(this).addClass(o)}).on("blur.bizTextarea",function(t){e(this).removeClass(o)})},enable:function(){this.main.disabled=!1,this.$main.removeClass(i)},disable:function(){this.main.disabled=!0,this.$main.addClass(i)},length:function(){return this.main.value.replace(/\r?\n/g,"").length},destroy:function(){this.$main.removeClass(r+" "+i),this.$main.off("mouseover.bizTextarea").off("mouseout.bizTextarea").off("focus.bizTextarea").off("blur.bizTextarea")}};var a="bizTextarea";return e.extend(e.fn,{bizTextarea:function(t,r){var i;switch(t){case"enable":this.each(function(){i=e(this).data(a),i&&i.enable()});break;case"disable":this.each(function(){i=e(this).data(a),i&&i.disable()});break;case"destroy":this.each(function(){i=e(this).data(a),i&&(i.destroy(),e(this).data(a,null))});break;case"length":return this.length!==0?this.data(a).length():null;default:this.each(function(){!e(this).data(a)&&u(this)&&e(this).data(a,new n(this,t))})}return this}}),n}),r("ui/Textline",["require"],function(t){function n(t,n){if(t instanceof jQuery){if(!(t.length>0))return;t=t[0]}if(!u(t))return;this.main=t,this.$main=e(this.main),this.options=e.extend({},n||{}),this.init(this.options)}function u(e){return e.nodeType===1&&e.tagName.toLowerCase()==="div"}var r="biz-textline",i="biz-textline-disable",s="biz-textline-hover",o="biz-textline-focus";n.prototype={init:function(t){this.$main.addClass(r).html("<div><pre></pre></div><textarea></textarea>");var n=Math.max(this.$main.width(),200),i=Math.max(this.$main.height(),52);this.$main.css({width:n,height:i}),this.$line=this.$main.children("div").css({height:i-10}),this.$lineNumber=this.$main.find("pre"),this.$textarea=this.$main.children("textarea").css({width:n-36,height:i-12}),t.disabled&&this.disable();var u=this;this.$textarea.on("mouseover.bizTextline",function(t){e(this).addClass(s)}).on("mouseout.bizTextline",function(t){e(this).removeClass(s)}).on("focus.bizTextline",function(t){e(this).addClass(o)}).on("blur.bizTextline",function(t){e(this).removeClass(o)}).on("keyup.bizTextline",function(e){u.renderLineNumber(e.target.scrollTop)}).on("scroll.bizTextline",function(e){u.scrollLineNumber(e.target.scrollTop)}),this.renderLineNumber(0)},enable:function(){this.$textarea[0].disabled=!1,this.$textarea.removeClass(i)},disable:function(){this.$textarea[0].disabled=!0,this.$textarea.addClass(i)},length:function(){return this.$textarea[0].value.replace(/\r?\n/g,"").length},val:function(e){if(undefined===e)return this.$textarea.val();this.$textarea[0].value=e,this.renderLineNumber(0)},destroy:function(){this.$textarea.off("mouseover.bizTextline").off("mouseout.bizTextline").off("focus.bizTextline").off("blur.bizTextline").off("keyup.bizTextline").off("scroll.bizTextline"),this.$main.removeClass(r).empty()},renderLineNumber:function(e){var t=this.$textarea.val().split("\n").length,n="1";for(var r=2;r<=t;r++)n+="\n"+r;this.$lineNumber.html(n),this.scrollLineNumber(e)},scrollLineNumber:function(e){this.$lineNumber.css({top:5-e})}};var a="bizTextline";return e.extend(e.fn,{bizTextline:function(t,r){var i;switch(t){case"enable":this.each(function(){i=e(this).data(a),i&&i.enable()});break;case"disable":this.each(function(){i=e(this).data(a),i&&i.disable()});break;case"val":if(undefined===r)return e(this).data(a).val();this.each(function(){i=e(this).data(a),i&&i.val(r)});break;case"destroy":this.each(function(){i=e(this).data(a),i&&(i.destroy(),e(this).data(a,null))});break;case"length":return this.length!==0?this.data(a).length():null;default:this.each(function(){!e(this).data(a)&&u(this)&&e(this).data(a,new n(this,t))})}return this}}),n}),r("ui/Radio",["require"],function(t){function n(t){if(t instanceof jQuery){if(!(t.length>0))return;t=t[0]}if(!l(t))return;this.main=t,this.$main=e(this.main),this.$group=e('input[name="'+this.$main.attr("name")+'"]'),this.init()}function l(e){return e.nodeType===1&&e.tagName.toLowerCase()==="input"&&e.getAttribute("type").toLowerCase()==="radio"}var r="biz-label",i="biz-radio-unchecked",s="biz-radio-unchecked-hover",o="biz-radio-checked",u="biz-radio-checked-hover",a="biz-radio-unchecked-disabled",f="biz-radio-checked-disabled";n.prototype={init:function(t){var n=this.$main.attr("title"),l=this.$main.attr("id");this.$main.after('<label for="'+l+'">'+n+"</label>").hide(),this.$label=this.$main.next(),this.$label.addClass(r),this.main.checked?this.$label.addClass(this.main.disabled?f:o):this.$label.addClass(this.main.disabled?a:i);var c=this;this.$label.on("mouseover.bizRadio",function(t){c.main.disabled||e(this).addClass(c.main.checked?u:s)}).on("mouseout.bizRadio",function(t){c.main.disabled||e(this).removeClass(c.main.checked?u:s)}).on("click.bizRadio",function(t){c.main.disabled||(c.$group.bizRadio("uncheck"),c.main.checked=!0,e(this).attr("class",r+" "+o+" "+u))})},check:function(){this.$group.bizRadio("uncheck"),this.main.checked=!0,this.$label.attr("class",r+" "+(this.main.disabled?f:o))},uncheck:function(){this.main.checked=!1,this.$label.attr("class",r+" "+(this.main.disabled?a:i))},enable:function(){this.main.disabled=!1,this.$label.attr("class",r+" "+(this.main.checked?o:i))},disable:function(){this.main.disabled=!0,this.$label.attr("class",r+" "+(this.main.checked?f:a))},val:function(){return this.main.value},destroy:function(){this.$main.show(),this.$label.off("mouseover.bizRadio").off("mouseout.bizRadio").off("click.bizRadio").remove()}};var c="bizRadio";return e.extend(e.fn,{bizRadio:function(t,r){var i;switch(t){case"uncheck":this.each(function(){i=e(this).data(c),i&&i.uncheck()});break;case"enable":this.each(function(){i=e(this).data(c),i&&i.enable()});break;case"disable":this.each(function(){i=e(this).data(c),i&&i.disable()});break;case"destroy":this.each(function(){i=e(this).data(c),i&&(i.destroy(),e(this).data(c,null))});break;case"val":var s;return this.each(function(){i=e(this).data(c),i&&i.main.checked&&(s=i.val())}),s;case"get":var o;return this.each(function(){i=e(this).data(c),r+""===i.main.id&&(o=i)}),o;default:this.each(function(){!e(this).data(c)&&l(this)&&e(this).data(c,new n(this))})}return this}}),n}),r("ui/Checkbox",["require"],function(t){function n(t){if(t instanceof jQuery){if(!(t.length>0))return;t=t[0]}if(!l(t))return;this.main=t,this.$main=e(this.main),this.$group=e('input[name="'+this.$main.attr("name")+'"]'),this.init()}function l(e){return e.nodeType===1&&e.tagName.toLowerCase()==="input"&&e.getAttribute("type").toLowerCase()==="checkbox"}var r="biz-label",i="biz-checkbox-unchecked",s="biz-checkbox-unchecked-hover",o="biz-checkbox-checked",u="biz-checkbox-checked-hover",a="biz-checkbox-unchecked-disabled",f="biz-checkbox-checked-disabled";n.prototype={init:function(t){var n=this.$main.attr("title"),l=this.$main.attr("id");this.$main.after('<label for="'+l+'">'+n+"</label>").hide(),this.$label=this.$main.next(),this.$label.addClass(r),this.main.checked?this.$label.addClass(this.main.disabled?f:o):this.$label.addClass(this.main.disabled?a:i);var c=this;this.$label.on("mouseover.bizCheckbox",function(t){c.main.disabled||e(this).addClass(c.main.checked?u:s)}).on("mouseout.bizCheckbox",function(t){c.main.disabled||e(this).removeClass(c.main.checked?u:s)}).on("click.bizCheckbox",function(t){c.main.disabled||(c.main.checked?e(this).attr("class",r+" "+i+" "+s):e(this).attr("class",r+" "+o+" "+u))})},check:function(){this.main.checked=!0,this.$label.attr("class",r+" "+(this.main.disabled?f:o))},uncheck:function(){this.main.checked=!1,this.$label.attr("class",r+" "+(this.main.disabled?a:i))},enable:function(){this.main.disabled=!1,this.$label.attr("class",r+" "+(this.main.checked?o:i))},disable:function(){this.main.disabled=!0,this.$label.attr("class",r+" "+(this.main.checked?f:a))},val:function(){return this.main.value},destroy:function(){this.$main.show(),this.$label.off("mouseover.bizCheckbox").off("mouseout.bizCheckbox").off("click.bizCheckbox").remove()}};var c="bizCheckbox";return e.extend(e.fn,{bizCheckbox:function(t,r){var i;switch(t){case"check":this.each(function(){i=e(this).data(c),i&&i.check()});break;case"uncheck":this.each(function(){i=e(this).data(c),i&&i.uncheck()});break;case"enable":this.each(function(){i=e(this).data(c),i&&i.enable()});break;case"disable":this.each(function(){i=e(this).data(c),i&&i.disable()});break;case"destroy":this.each(function(){i=e(this).data(c),i&&(i.destroy(),e(this).data(c,null))});break;case"val":var s=[];return this.each(function(){i=e(this).data(c),i&&i.main.checked&&s.push(i.val())}),s.join(",");case"get":var o;return this.each(function(){i=e(this).data(c),r+""===i.main.id&&(o=i)}),o;default:this.each(function(){!e(this).data(c)&&l(this)&&e(this).data(c,new n(this))})}return this}}),n}),r("dep/jquery.selectBox",["require"],function(t){var n=function(e,t){if(e instanceof jQuery){if(!(e.length>0))return;e=e[0]}this.typeTimer=null,this.typeSearch="",this.isMac=navigator.platform.match(/mac/i),t="object"==typeof t?t:{},this.selectElement=e;if(!t.mobile&&navigator.userAgent.match(/iPad|iPhone|Android|IEMobile|BlackBerry/i))return!1;if("select"!==e.tagName.toLowerCase())return!1;this.init(t)};return n.prototype.version="1.2.0",n.prototype.init=function(t){var n=e(this.selectElement);if(n.data("selectBox-control"))return!1;var r=e('<a class="selectBox" />'),i=n.attr("multiple")||parseInt(n.attr("size"))>1,s=t||{},o=parseInt(n.prop("tabindex"))||0,u=this;r.width(n.outerWidth()).addClass(n.attr("class")).attr("title",n.attr("title")||"").attr("tabindex",o).css("display","inline-block").bind("focus.selectBox",function(){this!==document.activeElement&&document.body!==document.activeElement&&e(document.activeElement).blur();if(r.hasClass("selectBox-active"))return;r.addClass("selectBox-active"),n.trigger("focus")}).bind("blur.selectBox",function(){if(!r.hasClass("selectBox-active"))return;r.removeClass("selectBox-active"),n.trigger("blur")}),e(window).data("selectBox-bindings")||e(window).data("selectBox-bindings",!0).bind("scroll.selectBox",s.hideOnWindowScroll?this.hideMenus:e.noop).bind("resize.selectBox",this.hideMenus),n.attr("disabled")&&r.addClass("selectBox-disabled"),n.bind("click.selectBox",function(e){r.focus(),e.preventDefault()});if(i){t=this.getOptions("inline"),r.append(t).data("selectBox-options",t).addClass("selectBox-inline selectBox-menuShowing").bind("keydown.selectBox",function(e){u.handleKeyDown(e)}).bind("keypress.selectBox",function(e){u.handleKeyPress(e)}).bind("mousedown.selectBox",function(t){if(1!==t.which)return;e(t.target).is("A.selectBox-inline")&&t.preventDefault(),r.hasClass("selectBox-focus")||r.focus()}).insertAfter(n);if(!n[0].style.height){var a=n.attr("size")?parseInt(n.attr("size")):5,f=r.clone().removeAttr("id").css({position:"absolute",top:"-9999em"}).show().appendTo("body");f.find(".selectBox-options").html("<li><a> </a></li>");var l=parseInt(f.find(".selectBox-options A:first").html("&nbsp;").outerHeight());f.remove(),r.height(l*a)}this.disableSelection(r)}else{var c=e('<span class="selectBox-label" />'),h=e('<span class="selectBox-arrow" />');c.attr("class",this.getLabelClass()).text(this.getLabelText()),t=this.getOptions("dropdown"),t.appendTo("BODY"),r.data("selectBox-options",t).addClass("selectBox-dropdown").append(c).append(h).bind("mousedown.selectBox",function(e){1===e.which&&(r.hasClass("selectBox-menuShowing")?u.hideMenus():(e.stopPropagation(),t.data("selectBox-down-at-x",e.screenX).data("selectBox-down-at-y",e.screenY),u.showMenu()))}).bind("keydown.selectBox",function(e){u.handleKeyDown(e)}).bind("keypress.selectBox",function(e){u.handleKeyPress(e)}).bind("open.selectBox",function(e,t){if(t&&t._selectBox===!0)return;u.showMenu()}).bind("close.selectBox",function(e,t){if(t&&t._selectBox===!0)return;u.hideMenus()}).insertAfter(n);var p=r.width()-h.outerWidth()-(parseInt(c.css("paddingLeft"))||0)-(parseInt(c.css("paddingRight"))||0);c.width(p),this.disableSelection(r)}n.addClass("selectBox").data("selectBox-control",r).data("selectBox-settings",s).hide()},n.prototype.getOptions=function(t){var n,r=e(this.selectElement),i=this,s=function(t,n){return t.children("OPTION, OPTGROUP").each(function(){if(e(this).is("OPTION"))e(this).length>0?i.generateOptions(e(this),n):n.append("<li> </li>");else{var t=e('<li class="selectBox-optgroup" />');t.text(e(this).attr("label")),n.append(t),n=s(e(this),n)}}),n};switch(t){case"inline":return n=e('<ul class="selectBox-options" />'),n=s(r,n),n.find("A").bind("mouseover.selectBox",function(t){i.addHover(e(this).parent())}).bind("mouseout.selectBox",function(t){i.removeHover(e(this).parent())}).bind("mousedown.selectBox",function(e){if(1!==e.which)return;e.preventDefault(),r.selectBox("control").hasClass("selectBox-active")||r.selectBox("control").focus()}).bind("mouseup.selectBox",function(t){if(1!==t.which)return;i.hideMenus(),i.selectOption(e(this).parent(),t)}),this.disableSelection(n),n;case"dropdown":n=e('<ul class="selectBox-dropdown-menu selectBox-options" />'),n=s(r,n),n.data("selectBox-select",r).css("display","none").appendTo("BODY").find("A").bind("mousedown.selectBox",function(t){t.which===1&&(t.preventDefault(),t.screenX===n.data("selectBox-down-at-x")&&t.screenY===n.data("selectBox-down-at-y")&&(n.removeData("selectBox-down-at-x").removeData("selectBox-down-at-y"),/android/i.test(navigator.userAgent.toLowerCase())&&/chrome/i.test(navigator.userAgent.toLowerCase())&&i.selectOption(e(this).parent()),i.hideMenus()))}).bind("mouseup.selectBox",function(t){if(1!==t.which)return;if(t.screenX===n.data("selectBox-down-at-x")&&t.screenY===n.data("selectBox-down-at-y"))return;n.removeData("selectBox-down-at-x").removeData("selectBox-down-at-y"),i.selectOption(e(this).parent()),i.hideMenus()}).bind("mouseover.selectBox",function(t){i.addHover(e(this).parent())}).bind("mouseout.selectBox",function(t){i.removeHover(e(this).parent())});var o=r.attr("class")||"";if(""!==o){o=o.split(" ");for(var u=0;u<o.length;u++)n.addClass(o[u]+"-selectBox-dropdown-menu")}return this.disableSelection(n),n}},n.prototype.getLabelClass=function(){var t=e(this.selectElement).find("OPTION:selected");return("selectBox-label "+(t.attr("class")||"")).replace(/\s+$/,"")},n.prototype.getLabelText=function(){var t=e(this.selectElement).find("OPTION:selected");return t.text()||" "},n.prototype.setLabel=function(){var t=e(this.selectElement),n=t.data("selectBox-control");if(!n)return;n.find(".selectBox-label").attr("class",this.getLabelClass()).text(this.getLabelText())},n.prototype.destroy=function(){var t=e(this.selectElement),n=t.data("selectBox-control");if(!n)return;var r=n.data("selectBox-options");r.remove(),n.remove(),t.removeClass("selectBox").removeData("selectBox-control").data("selectBox-control",null).removeData("selectBox-settings").data("selectBox-settings",null).show()},n.prototype.refresh=function(){var t=e(this.selectElement),n=t.data("selectBox-control"),r=n.hasClass("selectBox-dropdown")?"dropdown":"inline",i;n.data("selectBox-options").remove(),i=this.getOptions(r),n.data("selectBox-options",i);switch(r){case"inline":n.append(i);break;case"dropdown":this.setLabel(),e("BODY").append(i)}"dropdown"===r&&n.hasClass("selectBox-menuShowing")&&this.showMenu()},n.prototype.showMenu=function(){var t=this,n=e(this.selectElement),r=n.data("selectBox-control"),i=n.data("selectBox-settings"),s=r.data("selectBox-options");if(r.hasClass("selectBox-disabled"))return!1;this.hideMenus();var o=parseInt(r.css("borderBottomWidth"))||0,u=parseInt(r.css("borderTopWidth"))||0,a=r.offset(),f=i.topPositionCorrelation?i.topPositionCorrelation:0,l=i.bottomPositionCorrelation?i.bottomPositionCorrelation:0,c=s.outerHeight(),h=r.outerHeight(),p=parseInt(s.css("max-height")),d=e(window).scrollTop(),v=a.top-d,m=e(window).height()-(v+h),g=v>m&&(i.keepInViewport===null?!0:i.keepInViewport),y=g?a.top-c+u+f:a.top+h-o-l;if(v<p&&m<p){var b;g?(b=p-(v-5),s.css({"max-height":p-b+"px"}),y+=b):(b=p-(m-5),s.css({"max-height":p-b+"px"}))}s.data("posTop",g),s.width(r.innerWidth()).css({top:y,left:r.offset().left}).addClass("selectBox-options selectBox-options-"+(g?"top":"bottom"));if(n.triggerHandler("beforeopen"))return!1;var w=function(){n.triggerHandler("open",{_selectBox:!0})};switch(i.menuTransition){case"fade":s.fadeIn(i.menuSpeed,w);break;case"slide":s.slideDown(i.menuSpeed,w);break;default:s.show(i.menuSpeed,w)}i.menuSpeed||w();var E=s.find(".selectBox-selected:first");this.keepOptionInView(E,!0),this.addHover(E),r.addClass("selectBox-menuShowing selectBox-menuShowing-"+(g?"top":"bottom")),e(document).bind("mousedown.selectBox",function(n){if(1===n.which){if(e(n.target).parents().andSelf().hasClass("selectBox-options"))return;t.hideMenus()}})},n.prototype.hideMenus=function(){if(e(".selectBox-dropdown-menu:visible").length===0)return;e(document).unbind("mousedown.selectBox"),e(".selectBox-dropdown-menu").each(function(){var t=e(this),n=t.data("selectBox-select"),r=n.data("selectBox-control"),i=n.data("selectBox-settings"),s=t.data("posTop");if(n.triggerHandler("beforeclose"))return!1;var o=function(){n.triggerHandler("close",{_selectBox:!0})};if(i){switch(i.menuTransition){case"fade":t.fadeOut(i.menuSpeed,o);break;case"slide":t.slideUp(i.menuSpeed,o);break;default:t.hide(i.menuSpeed,o)}i.menuSpeed||o(),r.removeClass("selectBox-menuShowing selectBox-menuShowing-"+(s?"top":"bottom"))}else e(this).hide(),e(this).triggerHandler("close",{_selectBox:!0}),e(this).removeClass("selectBox-menuShowing selectBox-menuShowing-"+(s?"top":"bottom"));t.css("max-height",""),t.removeClass("selectBox-options-"+(s?"top":"bottom")),t.data("posTop",!1)})},n.prototype.selectOption=function(t,n){var r=e(this.selectElement);t=e(t);var i=r.data("selectBox-control"),s=r.data("selectBox-settings");if(i.hasClass("selectBox-disabled"))return!1;if(0===t.length||t.hasClass("selectBox-disabled"))return!1;if(r.attr("multiple"))if(n.shiftKey&&i.data("selectBox-last-selected")){t.toggleClass("selectBox-selected");var o;t.index()>i.data("selectBox-last-selected").index()?o=t.siblings().slice(i.data("selectBox-last-selected").index(),t.index()):o=t.siblings().slice(t.index(),i.data("selectBox-last-selected").index()),o=o.not(".selectBox-optgroup, .selectBox-disabled"),t.hasClass("selectBox-selected")?o.addClass("selectBox-selected"):o.removeClass("selectBox-selected")}else this.isMac&&n.metaKey||!this.isMac&&n.ctrlKey?t.toggleClass("selectBox-selected"):(t.siblings().removeClass("selectBox-selected"),t.addClass("selectBox-selected"));else t.siblings().removeClass("selectBox-selected"),t.addClass("selectBox-selected");i.hasClass("selectBox-dropdown")&&i.find(".selectBox-label").text(t.text());var u=0,a=[];return r.attr("multiple")?i.find(".selectBox-selected A").each(function(){a[u++]=e(this).attr("rel")}):a=t.find("A").attr("rel"),i.data("selectBox-last-selected",t),r.val()!==a&&(r.val(a),this.setLabel(),r.trigger("change")),!0},n.prototype.addHover=function(t){t=e(t);var n=e(this.selectElement),r=n.data("selectBox-control"),i=r.data("selectBox-options");i.find(".selectBox-hover").removeClass("selectBox-hover"),t.addClass("selectBox-hover")},n.prototype.getSelectElement=function(){return this.selectElement},n.prototype.removeHover=function(t){t=e(t);var n=e(this.selectElement),r=n.data("selectBox-control"),i=r.data("selectBox-options");i.find(".selectBox-hover").removeClass("selectBox-hover")},n.prototype.keepOptionInView=function(t,n){if(!t||t.length===0)return;var r=e(this.selectElement),i=r.data("selectBox-control"),s=i.data("selectBox-options"),o=i.hasClass("selectBox-dropdown")?s:s.parent(),u=parseInt(t.offset().top-o.position().top),a=parseInt(u+t.outerHeight());n?o.scrollTop(t.offset().top-o.offset().top+o.scrollTop()-o.height()/2):(u<0&&o.scrollTop(t.offset().top-o.offset().top+o.scrollTop()),a>o.height()&&o.scrollTop(t.offset().top+t.outerHeight()-o.offset().top+o.scrollTop()-o.height()))},n.prototype.handleKeyDown=function(t){var n=e(this.selectElement),r=n.data("selectBox-control"),i=r.data("selectBox-options"),s=n.data("selectBox-settings"),o=0,u=0;if(r.hasClass("selectBox-disabled"))return;switch(t.keyCode){case 8:t.preventDefault(),this.typeSearch="";break;case 9:case 27:this.hideMenus(),this.removeHover();break;case 13:r.hasClass("selectBox-menuShowing")?(this.selectOption(i.find("LI.selectBox-hover:first"),t),r.hasClass("selectBox-dropdown")&&this.hideMenus()):this.showMenu();break;case 38:case 37:t.preventDefault();if(r.hasClass("selectBox-menuShowing")){var a=i.find(".selectBox-hover").prev("LI");o=i.find("LI:not(.selectBox-optgroup)").length,u=0;while(a.length===0||a.hasClass("selectBox-disabled")||a.hasClass("selectBox-optgroup")){a=a.prev("LI"),a.length===0&&(s.loopOptions?a=i.find("LI:last"):a=i.find("LI:first"));if(++u>=o)break}this.addHover(a),this.selectOption(a,t),this.keepOptionInView(a)}else this.showMenu();break;case 40:case 39:t.preventDefault();if(r.hasClass("selectBox-menuShowing")){var f=i.find(".selectBox-hover").next("LI");o=i.find("LI:not(.selectBox-optgroup)").length,u=0;while(0===f.length||f.hasClass("selectBox-disabled")||f.hasClass("selectBox-optgroup")){f=f.next("LI"),f.length===0&&(s.loopOptions?f=i.find("LI:first"):f=i.find("LI:last"));if(++u>=o)break}this.addHover(f),this.selectOption(f,t),this.keepOptionInView(f)}else this.showMenu()}},n.prototype.handleKeyPress=function(t){var n=e(this.selectElement),r=n.data("selectBox-control"),i=r.data("selectBox-options"),s=this;if(r.hasClass("selectBox-disabled"))return;switch(t.keyCode){case 9:case 27:case 13:case 38:case 37:case 40:case 39:break;default:r.hasClass("selectBox-menuShowing")||this.showMenu(),t.preventDefault(),clearTimeout(this.typeTimer),this.typeSearch+=String.fromCharCode(t.charCode||t.keyCode),i.find("A").each(function(){if(e(this).text().substr(0,s.typeSearch.length).toLowerCase()===s.typeSearch.toLowerCase())return s.addHover(e(this).parent()),s.selectOption(e(this).parent(),t),s.keepOptionInView(e(this).parent()),!1}),this.typeTimer=setTimeout(function(){s.typeSearch=""},1e3)}},n.prototype.enable=function(){var t=e(this.selectElement);t.prop("disabled",!1);var n=t.data("selectBox-control");if(!n)return;n.removeClass("selectBox-disabled")},n.prototype.disable=function(){var t=e(this.selectElement);t.prop("disabled",!0);var n=t.data("selectBox-control");if(!n)return;n.addClass("selectBox-disabled")},n.prototype.setValue=function(t){var n=e(this.selectElement);n.val(t),t=n.val(),null===t&&(t=n.children().first().val(),n.val(t));var r=n.data("selectBox-control");if(!r)return;var i=n.data("selectBox-settings"),s=r.data("selectBox-options");this.setLabel(),s.find(".selectBox-selected").removeClass("selectBox-selected"),s.find("A").each(function(){if(typeof t=="object")for(var n=0;n<t.length;n++)e(this).attr("rel")==t[n]&&e(this).parent().addClass("selectBox-selected");else e(this).attr("rel")==t&&e(this).parent().addClass("selectBox-selected")}),i.change&&i.change.call(n)},n.prototype.disableSelection=function(t){e(t).css("MozUserSelect","none").bind("selectstart",function(e){e.preventDefault()})},n.prototype.generateOptions=function(t,n){var r=e("<li />"),i=e("<a />");r.addClass(t.attr("class")),r.data(t.data()),i.attr("rel",t.val()).text(t.text()),r.append(i),t.attr("disabled")&&r.addClass("selectBox-disabled"),t.attr("selected")&&r.addClass("selectBox-selected"),n.append(r)},e.extend(e.fn,{setOptions:function(t){var n=e(this),r=n.data("selectBox-control");switch(typeof t){case"string":n.html(t);break;case"object":n.html("");for(var i in t){if(t[i]===null)continue;if(typeof t[i]=="object"){var s=e('<optgroup label="'+i+'" />');for(var o in t[i])s.append('<option value="'+o+'">'+t[i][o]+"</option>");n.append(s)}else{var u=e('<option value="'+i+'">'+t[i]+"</option>");n.append(u)}}}r&&e(this).selectBox("refresh")},selectBox:function(t,r){var i;switch(t){case"control":return e(this).data("selectBox-control");case"settings":if(!r)return e(this).data("selectBox-settings");e(this).each(function(){e(this).data("selectBox-settings",e.extend(!0,e(this).data("selectBox-settings"),r))});break;case"options":if(undefined===r)return e(this).data("selectBox-control").data("selectBox-options");e(this).each(function(){e(this).setOptions(r)});break;case"value":if(undefined===r)return e(this).val();e(this).each(function(){i=e(this).data("selectBox"),i&&i.setValue(r)});break;case"refresh":e(this).each(function(){i=e(this).data("selectBox"),i&&i.refresh()});break;case"enable":e(this).each(function(){i=e(this).data("selectBox"),i&&i.enable(this)});break;case"disable":e(this).each(function(){i=e(this).data("selectBox"),i&&i.disable()});break;case"destroy":e(this).each(function(){i=e(this).data("selectBox"),i&&(i.destroy(),e(this).data("selectBox",null))});break;case"instance":return e(this).data("selectBox");default:e(this).each(function(r,i){e(i).data("selectBox")||e(i).data("selectBox",new n(i,t))})}return e(this)}}),n}),r("ui/Select",["require","dep/jquery.selectBox"],function(t){function r(t,r){r=e.extend({},r||{}),this.instance=new n(e(t),{mobile:!0,loopOptions:r.loop}),this.main=this.instance.selectElement,this.$main=e(this.main)}function i(e){return e.nodeType===1&&e.tagName.toLowerCase()==="select"}var n=t("dep/jquery.selectBox");r.prototype={enable:function(){this.instance.enable()},disable:function(){this.instance.disable()},refresh:function(){this.instance.refresh()},val:function(e){if(undefined===e)return this.$main.val();this.instance.setValue(e)},destroy:function(){this.instance.destroy()}};var s="bizSelect";return e.extend(e.fn,{bizSelect:function(t,n){var o;switch(t){case"enable":this.each(function(){o=e(this).data(s),o&&o.enable()});break;case"disable":this.each(function(){o=e(this).data(s),o&&o.disable()});break;case"refresh":this.each(function(){o=e(this).data(s),o&&o.refresh()});break;case"val":if(undefined===n)return e(this).val();this.each(function(){o=e(this).data(s),o&&o.val(n)});break;case"destroy":this.each(function(){o=e(this).data(s),o&&(o.destroy(),e(this).data(s,null))});break;default:this.each(function(){!e(this).data(s)&&i(this)&&e(this).data(s,new r(this,t))})}return this}}),r}),r("ui/Dialog",["require"],function(t){function i(t,n){if(t instanceof jQuery){if(!(t.length>0))return;t=t[0]}this.main=t,this.$main=e(this.main);var r={width:480,buttons:[],destroyOnClose:!1,skin:"",title:""};this.options=e.extend(r,n||{}),this.init(this.options)}var n="biz-dialog",r=1e3;i.prototype={init:function(t){var r=t.title||this.$main.attr("title"),i=this.$main.html(),s=this;this.$container=e('<div style="display:none;"></div>'),this.$container.addClass(n+" "+t.skin).html(['<h1 class="biz-dialog-title">',"<span>",r,"</span>",'<span class="biz-dialog-close"></span></h1>','<div class="biz-dialog-content"></div>','<div class="biz-dialog-bottom"></div>'].join("")).css({width:t.width,marginLeft:-Math.floor(parseInt(t.width,10)/2)}).on("click",".biz-dialog-close",function(){s.close()}),this.$container.find(".biz-dialog-content").append(this.$main);var o=this.$container.find(".biz-dialog-bottom");t.buttons.length?e.each(t.buttons,function(t,n){e("<button>"+n.text+"</button>").bizButton({theme:n.theme}).click(function(e){n.click.call(s,e)}).appendTo(o)}):o.remove(),this.$container.appendTo("body").after(e('<div class="biz-mask" style="display:none;"></div>')),t.height?this.$container.css({height:t.height,marginTop:-Math.floor(Math.min(parseInt(t.height,10),e(window).height())/2)}):this.$container.css({marginTop:-Math.floor(Math.min(parseInt(this.$container.height(),10),e(window).height())/2)})},open:function(){var e=this.options.zIndex||r++;this.$container.next().css({zIndex:e-1}).show(),this.$main.show(),this.$container.css({zIndex:e}).show()},close:function(){var e=!0;if(this.options.onBeforeClose&&typeof this.options.onBeforeClose=="function"){e=this.options.onBeforeClose();if(e===!1)return}this.$container.hide(),this.$container.next().hide(),typeof this.options.zIndex=="undefined"&&r--,this.options.destroyOnClose&&this.destroy()},destroy:function(){this.$container.find(".biz-dialog-bottom button").bizButton("destroy"),this.$container.next().remove(),this.$main.remove(),this.$container.remove()}},i.alert=function(t){var n=e('<div style="display:none;height:50px;" class="biz-alert" title="'+t.title+'">'+t.content+"</div>");n.appendTo("body").bizDialog({width:360,height:200,destroyOnClose:!0,buttons:[{text:t.ok,click:function(){n.bizDialog("close")}}]}),n.bizDialog("open")},i.confirm=function(t){var n=e('<div style="display:none;height:50px;" class="biz-confirm" title="'+t.title+'">'+t.content+"</div>");n.appendTo("body").bizDialog({width:360,height:200,destroyOnClose:!0,buttons:[{text:t.ok,click:function(){n.bizDialog("close"),t.onOK&&t.onOK()}},{text:t.cancel,click:function(){n.bizDialog("close")},theme:"dark"}]}),n.bizDialog("open")};var s="bizDialog";return e.extend(e.fn,{bizDialog:function(t,n){var r;switch(t){case"open":this.each(function(){r=e(this).data(s),r&&r.open()});break;case"close":this.each(function(){r=e(this).data(s),r&&r.close()});break;case"destroy":this.each(function(){r=e(this).data(s),r&&(r.destroy(),e(this).data(s,null))});break;default:this.each(function(){e(this).data(s)||e(this).data(s,new i(this,t))})}return this}}),i}),r("ui/Panel",["require"],function(t){function n(t,n){if(t instanceof jQuery){if(!(t.length>0))return;t=t[0]}if(!i(t))return;this.main=t,this.$main=e(this.main);var r={marginLeft:200,buttons:[]};this.options=e.extend(r,n||{}),this.init(this.options)}function i(e){return e.nodeType===1&&e.tagName.toLowerCase()==="div"&&e.hasAttribute("title")}var r="biz-panel";n.prototype={init:function(t){var n=this.$main.attr("title"),i=this.$main.html(),s=this;this.orginContent=i,this.$main.hide().addClass(r).removeAttr("title").html(['<div class="biz-panel-margin"></div>','<div class="biz-panel-body">','<h1 class="biz-panel-title">',n,"</h1>",'<div class="biz-panel-content">',i,"</div>",'<div class="biz-panel-bottom"></div></div>'].join("")).after('<div class="biz-mask" style="display:none"></div>'),this.$main.find(".biz-panel-margin").css({width:t.marginLeft});var o=this.$main.find(".biz-panel-bottom");e.each(t.buttons,function(t,n){e("<button>"+n.text+"</button>").bizButton({theme:n.theme}).click(function(e){n.click.call(s,e)}).appendTo(o)})},open:function(){e("body").css({overflow:"hidden"}),this.$main.next().show();var t=this;this.$main.css({top:Math.max(document.body.scrollTop,document.documentElement.scrollTop)}).show().animate({left:0},300,function(){t.$main.find(".biz-panel-body")[0].scrollTop=0})},close:function(){var t=this;this.$main.animate({left:Math.max(document.body.offsetWidth,document.documentElement.offsetWidth)},300,function(){t.$main.hide(),t.$main.next().hide(),e("body").css({overflow:"visible"})})},destroy:function(){this.$main.removeClass(r).attr("title",this.$main.find(".biz-panel-title").text()).removeAttr("style").hide(),this.$main.find(".biz-panel-bottom button").bizButton("destroy"),this.$main.html(this.orginContent).next().remove(),this.orginContent=null}};var s="bizPanel";return e.extend(e.fn,{bizPanel:function(t,r){var o;switch(t){case"open":this.each(function(){o=e(this).data(s),o&&o.open()});break;case"close":this.each(function(){o=e(this).data(s),o&&o.close()});break;case"destroy":this.each(function(){o=e(this).data(s),o&&(o.destroy(),e(this).data(s,null))});break;default:this.each(function(){!e(this).data(s)&&i(this)&&e(this).data(s,new n(this,t))})}return this}}),n}),r("ui/Tooltip",["require"],function(t){function a(e,t){var r={},i=e.outerHeight(),s=e.outerWidth(),o=e.offset();return r.height=n.outerHeight(!0),r.width=n.outerWidth(!0),r.offset={},r.offset.top=o.top,r.offset.left=o.left,r.offset.right=r.offset.left+s,r.offset.bottom=r.offset.top+i,r.offset.hCenter=r.offset.left+Math.floor(s/2),r.offset.vCenter=r.offset.top+Math.floor(i/2),r.css={},r.on={},r.off={},r.arrow={},r}function f(e,t,n,r){var i,s;n=parseInt(n),r=parseInt(r);switch(t){case"top":i=u.scrollTop(),e.offset.top-e.height-n-r<i&&(s="bottom"),e.on.top=e.offset.top-e.height-n,e.off.top=e.on.top+r,e.css.top=e.on.top-r,e.css.left=p(e,!0);break;case"left":i=u.scrollLeft(),e.offset.left-e.width-n-r<i&&(s="right"),e.on.left=e.offset.left-e.width-n,e.off.left=e.on.left+r,e.css.top=p(e,!1),e.css.left=e.on.left-r;break;case"bottom":i=u.scrollTop()+u.height(),e.offset.bottom+e.height+n+r>i&&(s="top"),e.on.top=e.offset.bottom+n,e.off.top=e.offset.bottom-r+n,e.css.top=e.on.top+r,e.css.left=p(e,!0);break;case"right":i=u.scrollLeft()+u.width(),e.offset.right+e.width+n+r>i&&(s="left"),e.on.left=e.offset.right+n,e.off.left=e.on.left-r,e.css.left=e.on.left+r,e.css.top=p(e,!1)}s&&!e.over?(e.over=!0,f(e,s,n,r)):(e.direction=t,c(e,t),l(e,t))}function l(e,t){var n;if(t=="top"||t=="bottom")n=u.scrollLeft()-e.css.left+5,n>0&&(e.css.left+=Math.abs(n),e.arrow.left-=n),n=e.css.left+e.width-(u.scrollLeft()+u.width())+5,n>0&&(e.css.left-=Math.abs(n),e.arrow.left+=n);else if(t=="left"||t=="right")n=u.scrollTop()-e.css.top+5,n>0&&(e.css.top+=Math.abs(n),e.arrow.top-=n),n=e.css.top+e.height-(u.scrollTop()+u.height())+5,n>0&&(e.css.top-=Math.abs(n),e.arrow.top+=n)}function c(e,t){t=="left"||t=="right"?e.arrow.top=Math.floor(e.height/2-s/2):e.arrow.left=Math.floor(e.width/2-i/2),e.arrow[h(t)]=-s}function h(e){switch(e){case"top":return"bottom";case"bottom":return"top";case"left":return"right";case"right":return"left"}}function p(e,t){return t?e.offset.hCenter+ -e.width/2:e.offset.vCenter+ -e.height/2}function d(e,t,i,s){var o=y("color",t,i,"white"),u=y("duration",t,i,150);n.attr("class",o+" "+e.direction),n.stop(!0,!0).css(e.css),r.attr("style","").css(e.arrow),n.animate(e.on,{duration:u,queue:!1,complete:s}),n.fadeIn(u)}function v(e,t,r,i){var s=y("duration",t,r,100);n.animate(e.off,{duration:s,queue:!1,complete:i}),n.fadeOut(s)}function m(t){return/&/.test(t)&&(t=e("<p/>").html(t).text()),t}function g(t,n){var r,i;try{i=e(document.body).find(n)}catch(s){}i&&i.length>0?r=i.html():r=m(n),o.html(r)}function y(e,t,n,r){return b(t[e],n.data("tooltip-"+e),r)}function b(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==undefined)return arguments[e]}function w(t){t!=="destroy"?e("#biz-tooltip").length===0&&(n=e('<div id="biz-tooltip" />').appendTo(document.body).css("position","absolute").hide(),r=e('<div class="arrow" />').appendTo(n),o=e('<div class="content" />').appendTo(n),u=e(window),i=r.width(),s=r.height(),e("[title]").bizTooltip(t)):(e("#biz-tooltip").remove(),e("[title]").each(function(){e(this).unbind("mouseenter").unbind("mouseleave")}))}var n,r,i,s,o,u;return e.extend(e.fn,{bizTooltip:function(t){t=t||{},this.each(function(){var r=e(this),i=r.attr("title");if(!i)return;var s=!1,o,u;r.unbind("mouseenter").mouseenter(function(){var e=y("delay",t,r,300);clearTimeout(u),u=setTimeout(function(){var e=y("margin",t,r,20),n=y("slide",t,r,10),u=y("direction",t,r,"top"),l=r.attr("title");l&&(i=l),r.removeAttr("title"),g(r,t.html||i),o=a(r,t),f(o,u,e,n),d(o,t,r,function(){s=!1}),s=!0},e)}),r.unbind("mouseleave").mouseleave(function(){clearTimeout(u);if(!o)return;s?n.fadeOut(100,function(){s=!1}):v(o,t,r,function(){s=!1}),o=null,s=!0})})}}),w}),r("ui/Tab",["require"],function(t){function n(t,n){if(t instanceof jQuery){if(!(t.length>0))return;t=t[0]}if(!i(t))return;this.main=t,this.$main=e(this.main);var r={event:"click"};this.options=e.extend(r,n||{}),this.init(this.options)}function i(e){return e.nodeType===1&&e.tagName.toLowerCase()==="div"}var r="biz-tab";n.prototype={init:function(t){this.$main.addClass(r),this.tabs=this.$main.find("ul li"),this.contents=this.$main.children("div").children("div").hide(),e(this.tabs[0]).addClass("active"),e(this.contents[0]).show();var n=this;this.$main.on(t.event+".bizTab","ul li",function(r){var i=e(r.target);if(!i.hasClass("active")){n.tabs.removeClass("active"),i.addClass("active");var s;e.each(n.tabs,function(e,t){t===r.target&&(s=e)}),n.contents.hide(),e(n.contents[s]).show(),t.onChange&&t.onChange.call(n,{title:i.text(),index:s},r)}})},destroy:function(){this.$main.removeClass(r),this.$main.off(this.options.event+".bizTab")}};var s="bizTab";return e.extend(e.fn,{bizTab:function(t,r){var o;switch(t){case"destroy":this.each(function(){o=e(this).data(s),o&&(o.destroy(),e(this).data(s,null))});break;default:this.each(function(){!e(this).data(s)&&i(this)&&e(this).data(s,new n(this,t))})}return this}}),n}),r("dep/jquery.simplePagination",["require"],function(t){var n={init:function(t){var r=e.extend({items:1,itemsOnPage:1,pages:0,displayedPages:5,edges:2,currentPage:0,hrefTextPrefix:"#page-",hrefTextSuffix:"",prevText:"Prev",nextText:"Next",ellipseText:"&hellip;",cssStyle:"light-theme",listStyle:"",labelMap:[],selectOnClick:!0,nextAtFront:!1,invertPageOrder:!1,useStartEdge:!0,useEndEdge:!0,onPageClick:function(e,t){},onInit:function(){}},t||{}),i=this;return r.pages=r.pages?r.pages:Math.ceil(r.items/r.itemsOnPage)?Math.ceil(r.items/r.itemsOnPage):1,r.currentPage?r.currentPage=r.currentPage-1:r.currentPage=r.invertPageOrder?r.pages-1:0,r.halfDisplayed=r.displayedPages/2,this.each(function(){i.addClass(r.cssStyle+" simple-pagination").data("pagination",r),n._draw.call(i)}),r.onInit(),this},selectPage:function(e){return n._selectPage.call(this,e-1),this},prevPage:function(){var e=this.data("pagination");return e.invertPageOrder?e.currentPage<e.pages-1&&n._selectPage.call(this,e.currentPage+1):e.currentPage>0&&n._selectPage.call(this,e.currentPage-1),this},nextPage:function(){var e=this.data("pagination");return e.invertPageOrder?e.currentPage>0&&n._selectPage.call(this,e.currentPage-1):e.currentPage<e.pages-1&&n._selectPage.call(this,e.currentPage+1),this},getPagesCount:function(){return this.data("pagination").pages},setPagesCount:function(e){this.data("pagination").pages=e},getCurrentPage:function(){return this.data("pagination").currentPage+1},destroy:function(){return this.empty(),this},drawPage:function(e){var t=this.data("pagination");return t.currentPage=e-1,this.data("pagination",t),n._draw.call(this),this},redraw:function(){return n._draw.call(this),this},disable:function(){var e=this.data("pagination");return e.disabled=!0,this.data("pagination",e),n._draw.call(this),this},enable:function(){var e=this.data("pagination");return e.disabled=!1,this.data("pagination",e),n._draw.call(this),this},updateItems:function(e){var t=this.data("pagination");t.items=e,t.pages=n._getPages(t),this.data("pagination",t),n._draw.call(this)},updateItemsOnPage:function(e){var t=this.data("pagination");return t.itemsOnPage=e,t.pages=n._getPages(t),this.data("pagination",t),this},getItemsOnPage:function(){return this.data("pagination").itemsOnPage},_draw:function(){var t=this.data("pagination"),r=n._getInterval(t),i,s,o,u;n.destroy.call(this),s=typeof this.prop=="function"?this.prop("tagName"):this.attr("tagName");var a=s==="UL"?this:e("<ul"+(t.listStyle?' class="'+t.listStyle+'"':"")+"></ul>").appendTo(this);t.prevText&&n._appendItem.call(this,t.invertPageOrder?t.currentPage+1:t.currentPage-1,{text:t.prevText,classes:"prev"}),t.nextText&&t.nextAtFront&&n._appendItem.call(this,t.invertPageOrder?t.currentPage-1:t.currentPage+1,{text:t.nextText,classes:"next"});if(!t.invertPageOrder){if(r.start>0&&t.edges>0){if(t.useStartEdge){u=Math.min(t.edges,r.start);for(i=0;i<u;i++)n._appendItem.call(this,i)}t.edges<r.start&&r.start-t.edges!=1?a.append('<li class="disabled"><span class="ellipse">'+t.ellipseText+"</span></li>"):r.start-t.edges==1&&n._appendItem.call(this,t.edges)}}else if(r.end<t.pages&&t.edges>0){if(t.useStartEdge){o=Math.max(t.pages-t.edges,r.end);for(i=t.pages-1;i>=o;i--)n._appendItem.call(this,i)}t.pages-t.edges>r.end&&t.pages-t.edges-r.end!=1?a.append('<li class="disabled"><span class="ellipse">'+t.ellipseText+"</span></li>"):t.pages-t.edges-r.end==1&&n._appendItem.call(this,r.end)}if(!t.invertPageOrder)for(i=r.start;i<r.end;i++)n._appendItem.call(this,i);else for(i=r.end-1;i>=r.start;i--)n._appendItem.call(this,i);if(!t.invertPageOrder){if(r.end<t.pages&&t.edges>0){t.pages-t.edges>r.end&&t.pages-t.edges-r.end!=1?a.append('<li class="disabled"><span class="ellipse">'+t.ellipseText+"</span></li>"):t.pages-t.edges-r.end==1&&n._appendItem.call(this,r.end);if(t.useEndEdge){o=Math.max(t.pages-t.edges,r.end);for(i=o;i<t.pages;i++)n._appendItem.call(this,i)}}}else if(r.start>0&&t.edges>0){t.edges<r.start&&r.start-t.edges!=1?a.append('<li class="disabled"><span class="ellipse">'+t.ellipseText+"</span></li>"):r.start-t.edges==1&&n._appendItem.call(this,t.edges);if(t.useEndEdge){u=Math.min(t.edges,r.start);for(i=u-1;i>=0;i--)n._appendItem.call(this,i)}}t.nextText&&!t.nextAtFront&&n._appendItem.call(this,t.invertPageOrder?t.currentPage-1:t.currentPage+1,{text:t.nextText,classes:"next"})},_getPages:function(e){var t=Math.ceil(e.items/e.itemsOnPage);return t||1},_getInterval:function(e){return{start:Math.ceil(e.currentPage>e.halfDisplayed?Math.max(Math.min(e.currentPage-e.halfDisplayed,e.pages-e.displayedPages),0):0),end:Math.ceil(e.currentPage>e.halfDisplayed?Math.min(e.currentPage+e.halfDisplayed,e.pages):Math.min(e.displayedPages,e.pages))}},_appendItem:function(t,r){var i=this,s,o,u=i.data("pagination"),a=e("<li></li>"),f=i.find("ul");t=t<0?0:t<u.pages?t:u.pages-1,s={text:t+1,classes:""},u.labelMap.length&&u.labelMap[t]&&(s.text=u.labelMap[t]),s=e.extend(s,r||{}),t==u.currentPage||u.disabled?(u.disabled||s.classes==="prev"||s.classes==="next"?a.addClass("disabled"):a.addClass("active"),o=e('<span class="current">'+s.text+"</span>")):(o=e('<a href="javascript:void(0)" class="page-link">'+s.text+"</a>"),o.click(function(e){return n._selectPage.call(i,t,e)})),s.classes&&o.addClass(s.classes),a.append(o),f.length?f.append(a):i.append(a)},_selectPage:function(e,t){var r=this.data("pagination");return r.currentPage=e,r.selectOnClick&&n._draw.call(this),r.onPageClick(e+1,t)}};return e.fn.pagination=function(t){if(n[t]&&t.charAt(0)!="_")return n[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||!t)return n.init.apply(this,arguments);e.error("Method "+t+" does not exist on jQuery.pagination")},n}),r("ui/Page",["require","dep/jquery.simplePagination"],function(t){function r(t,r){r=e.extend({},r||{}),this.instance=n.init.call(e(t),{itemsOnPage:r.pageSize,currentPage:r.pageNumber,items:r.totalNumber,prevText:r.prevText||"◀",nextText:r.nextText||"▶",onPageClick:r.onPageClick})}function i(e){return e.nodeType===1&&e.tagName.toLowerCase()==="div"}var n=t("dep/jquery.simplePagination");r.prototype={setPageSize:function(e){this.instance.pagination("updateItemsOnPage",e),this.instance.pagination("drawPage",1)},setPageNumber:function(e){this.instance.pagination("selectPage",e)},setTotalNumber:function(e){this.instance.pagination("updateItems",e),this.instance.pagination("drawPage",1)},getPageNumber:function(){return this.instance.pagination("getCurrentPage")},getPageCount:function(){return this.instance.pagination("getPagesCount")},destroy:function(){this.instance.pagination("destroy")}};var s="bizPage";return e.extend(e.fn,{bizPage:function(t,n){var o;switch(t){case"setPageSize":this.each(function(){o=e(this).data(s),o&&o.setPageSize(n)});break;case"setPageNumber":this.each(function(){o=e(this).data(s),o&&o.setPageNumber(n)});break;case"setTotalNumber":this.each(function(){o=e(this).data(s),o&&o.setTotalNumber(n)});break;case"getPageNumber":return this.data(s).getPageNumber();case"getPageCount":return this.data(s).getPageCount();case"destroy":this.each(function(){o=e(this).data(s),o&&(o.destroy(),e(this).data(s,null))});break;default:this.each(function(){!e(this).data(s)&&i(this)&&e(this).data(s,new r(this,t))})}return this}}),r}),r("dep/jquery.jstree",["require"],function(t){if(e.jstree)return;var n=0,r=!1,i=!1,s=!1,o=[],u=e("script:last").attr("src"),a=window.document,f=a.createElement("LI"),l,c;f.setAttribute("role","treeitem"),l=a.createElement("I"),l.className="jstree-icon jstree-ocl",l.setAttribute("role","presentation"),f.appendChild(l),l=a.createElement("A"),l.className="jstree-anchor",l.setAttribute("href","#"),l.setAttribute("tabindex","-1"),c=a.createElement("I"),c.className="jstree-icon jstree-themeicon",c.setAttribute("role","presentation"),l.appendChild(c),f.appendChild(l),l=c=null,e.jstree={version:"3.1.1",defaults:{plugins:[]},plugins:{},path:u&&u.indexOf("/")!==-1?u.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g},e.jstree.create=function(t,r){var i=new e.jstree.core(++n),s=r;return r=e.extend(!0,{},e.jstree.defaults,r),s&&s.plugins&&(r.plugins=s.plugins),e.each(r.plugins,function(e,t){e!=="core"&&(i=i.plugin(t,r[t]))}),e(t).data("jstree",i),i.init(t,r),i},e.jstree.destroy=function(){e(".jstree:jstree").jstree("destroy"),e(a).off(".jstree")},e.jstree.core=function(e){this._id=e,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},e.jstree.reference=function(t){var n=null,r=null;t&&t.id&&(!t.tagName||!t.nodeType)&&(t=t.id);if(!r||!r.length)try{r=e(t)}catch(i){}if(!r||!r.length)try{r=e("#"+t.replace(e.jstree.idregex,"\\$&"))}catch(i){}return r&&r.length&&(r=r.closest(".jstree")).length&&(r=r.data("jstree"))?n=r:e(".jstree").each(function(){var r=e(this).data("jstree");if(r&&r._model.data[t])return n=r,!1}),n},e.fn.jstree=function(t){var n=typeof t=="string",r=Array.prototype.slice.call(arguments,1),i=null;return t===!0&&!this.length?!1:(this.each(function(){var s=e.jstree.reference(this),o=n&&s?s[t]:null;i=n&&o?o.apply(s,r):null,!s&&!n&&(t===undefined||e.isPlainObject(t))&&e.jstree.create(this,t);if(s&&!n||t===!0)i=s||!1;if(i!==null&&i!==undefined)return!1}),i!==null&&i!==undefined?i:this)},e.expr[":"].jstree=e.expr.createPseudo(function(t){return function(t){return e(t).hasClass("jstree")&&e(t).data("jstree")!==undefined}}),e.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:e.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0},e.jstree.core.prototype={plugin:function(t,n){var r=e.jstree.plugins[t];return r?(this._data[t]={},r.prototype=this,new r(n,this)):this},init:function(t,n){this._model={data:{"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this.element=e(t).addClass("jstree jstree-"+this._id),this.settings=n,this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl=this.element.css("direction")==="rtl",this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return this.nodeType===3&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><"+"a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().height()||24,this.trigger("loading"),this.load_node("#")},destroy:function(e){if(this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(t){}e||this.element.empty(),this.teardown()},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")}),this.element=null},bind:function(){var t="",n=null,r=0;this.element.on("dblclick.jstree",function(){if(a.selection&&a.selection.empty)a.selection.empty();else if(window.getSelection){var e=window.getSelection();try{e.removeAllRanges(),e.collapse()}catch(t){}}}).on("mousedown.jstree",e.proxy(function(e){e.target===this.element[0]&&(e.preventDefault(),r=+(new Date))},this)).on("mousedown.jstree",".jstree-ocl",function(e){e.preventDefault()}).on("click.jstree",".jstree-ocl",e.proxy(function(e){this.toggle_node(e.target)},this)).on("dblclick.jstree",".jstree-anchor",e.proxy(function(e){this.settings.core.dblclick_toggle&&this.toggle_node(e.target)},this)).on("click.jstree",".jstree-anchor",e.proxy(function(t){t.preventDefault(),t.currentTarget!==a.activeElement&&e(t.currentTarget).focus(),this.activate_node(t.currentTarget,t)},this)).on("keydown.jstree",".jstree-anchor",e.proxy(function(t){if(t.target.tagName==="INPUT")return!0;if(t.which!==32&&t.which!==13&&(t.shiftKey||t.ctrlKey||t.altKey||t.metaKey))return!0;var n=null;this._data.core.rtl&&(t.which===37?t.which=39:t.which===39&&(t.which=37));switch(t.which){case 32:t.ctrlKey&&(t.type="click",e(t.currentTarget).trigger(t));break;case 13:t.type="click",e(t.currentTarget).trigger(t);break;case 37:t.preventDefault(),this.is_open(t.currentTarget)?this.close_node(t.currentTarget):(n=this.get_parent(t.currentTarget),n&&n.id!=="#"&&this.get_node(n,!0).children(".jstree-anchor").focus());break;case 38:t.preventDefault(),n=this.get_prev_dom(t.currentTarget),n&&n.length&&n.children(".jstree-anchor").focus();break;case 39:t.preventDefault(),this.is_closed(t.currentTarget)?this.open_node(t.currentTarget,function(e){this.get_node(e,!0).children(".jstree-anchor").focus()}):this.is_open(t.currentTarget)&&(n=this.get_node(t.currentTarget,!0).children(".jstree-children")[0],n&&e(this._firstChild(n)).children(".jstree-anchor").focus());break;case 40:t.preventDefault(),n=this.get_next_dom(t.currentTarget),n&&n.length&&n.children(".jstree-anchor").focus();break;case 106:this.open_all();break;case 36:t.preventDefault(),n=this._firstChild(this.get_container_ul()[0]),n&&e(n).children(".jstree-anchor").filter(":visible").focus();break;case 35:t.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().focus()}},this)).on("load_node.jstree",e.proxy(function(t,n){n.status&&(n.node.id==="#"&&!this._data.core.loaded&&(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout(e.proxy(function(){if(this.element&&!this.get_container_ul().find(".jstree-loading").length){this._data.core.ready=!0;if(this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var t=[],n,r;for(n=0,r=this._data.core.selected.length;n<r;n++)t=t.concat(this._model.data[this._data.core.selected[n]].parents);t=e.vakata.array_unique(t);for(n=0,r=t.length;n<r;n++)this.open_node(t[n],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this),0))},this)).on("keypress.jstree",e.proxy(function(r){if(r.target.tagName==="INPUT")return!0;n&&clearTimeout(n),n=setTimeout(function(){t=""},500);var i=String.fromCharCode(r.which).toLowerCase(),s=this.element.find(".jstree-anchor").filter(":visible"),o=s.index(a.activeElement)||0,u=!1;t+=i;if(t.length>1){s.slice(o).each(e.proxy(function(n,r){if(e(r).text().toLowerCase().indexOf(t)===0)return e(r).focus(),u=!0,!1},this));if(u)return;s.slice(0,o).each(e.proxy(function(n,r){if(e(r).text().toLowerCase().indexOf(t)===0)return e(r).focus(),u=!0,!1},this));if(u)return}if((new RegExp("^"+i+"+$")).test(t)){s.slice(o+1).each(e.proxy(function(t,n){if(e(n).text().toLowerCase().charAt(0)===i)return e(n).focus(),u=!0,!1},this));if(u)return;s.slice(0,o+1).each(e.proxy(function(t,n){if(e(n).text().toLowerCase().charAt(0)===i)return e(n).focus(),u=!0,!1},this));if(u)return}},this)).on("init.jstree",e.proxy(function(){var e=this.settings.core.themes;this._data.core.themes.dots=e.dots,this._data.core.themes.stripes=e.stripes,this._data.core.themes.icons=e.icons,this.set_theme(e.name||"default",e.url),this.set_theme_variant(e.variant)},this)).on("loading.jstree",e.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"]()},this)).on("blur.jstree",".jstree-anchor",e.proxy(function(t){this._data.core.focused=null,e(t.currentTarget).filter(".jstree-hovered").mouseleave(),this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",e.proxy(function(t){var n=this.get_node(t.currentTarget);n&&n.id&&(this._data.core.focused=n.id),this.element.find(".jstree-hovered").not(t.currentTarget).mouseleave(),e(t.currentTarget).mouseenter(),this.element.attr("tabindex","-1")},this)).on("focus.jstree",e.proxy(function(){if(+(new Date)-r>500&&!this._data.core.focused){r=0;var e=this.get_node(this.element.attr("aria-activedescendant"),!0);e&&e.find("> .jstree-anchor").focus()}},this)).on("mouseenter.jstree",".jstree-anchor",e.proxy(function(e){this.hover_node(e.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},unbind:function(){this.element.off(".jstree"),e(a).off(".jstree-"+this._id)},trigger:function(e,t){t||(t={}),t.instance=this,this.element.triggerHandler(e.replace(".jstree","")+".jstree",t)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(t){var n=this.settings.core.strings;return e.isFunction(n)?n.call(this,t):n&&n[t]?n[t]:t},_firstChild:function(e){e=e?e.firstChild:null;while(e!==null&&e.nodeType!==1)e=e.nextSibling;return e},_nextSibling:function(e){e=e?e.nextSibling:null;while(e!==null&&e.nodeType!==1)e=e.nextSibling;return e},_previousSibling:function(e){e=e?e.previousSibling:null;while(e!==null&&e.nodeType!==1)e=e.previousSibling;return e},get_node:function(t,n){t&&t.id&&(t=t.id);var r;try{if(this._model.data[t])t=this._model.data[t];else if(typeof t=="string"&&this._model.data[t.replace(/^#/,"")])t=this._model.data[t.replace(/^#/,"")];else if(typeof t=="string"&&(r=e("#"+t.replace(e.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[r.closest(".jstree-node").attr("id")])t=this._model.data[r.closest(".jstree-node").attr("id")];else if((r=e(t,this.element)).length&&this._model.data[r.closest(".jstree-node").attr("id")])t=this._model.data[r.closest(".jstree-node").attr("id")];else{if(!(r=e(t,this.element)).length||!r.hasClass("jstree"))return!1;t=this._model.data["#"]}return n&&(t=t.id==="#"?this.element:e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)),t}catch(i){return!1}},get_path:function(e,t,n){e=e.parents?e:this.get_node(e);if(!e||e.id==="#"||!e.parents)return!1;var r,i,s=[];s.push(n?e.id:e.text);for(r=0,i=e.parents.length;r<i;r++)s.push(n?e.parents[r]:this.get_text(e.parents[r]));return s=s.reverse().slice(1),t?s.join(t):s},get_next_dom:function(t,n){var r;t=this.get_node(t,!0);if(t[0]===this.element[0]){r=this._firstChild(this.get_container_ul()[0]);while(r&&r.offsetHeight===0)r=this._nextSibling(r);return r?e(r):!1}if(!t||!t.length)return!1;if(n){r=t[0];do r=this._nextSibling(r);while(r&&r.offsetHeight===0);return r?e(r):!1}if(t.hasClass("jstree-open")){r=this._firstChild(t.children(".jstree-children")[0]);while(r&&r.offsetHeight===0)r=this._nextSibling(r);if(r!==null)return e(r)}r=t[0];do r=this._nextSibling(r);while(r&&r.offsetHeight===0);return r!==null?e(r):t.parentsUntil(".jstree",".jstree-node").nextAll(".jstree-node:visible").first()},get_prev_dom:function(t,n){var r;t=this.get_node(t,!0);if(t[0]===this.element[0]){r=this.get_container_ul()[0].lastChild;while(r&&r.offsetHeight===0)r=this._previousSibling(r);return r?e(r):!1}if(!t||!t.length)return!1;if(n){r=t[0];do r=this._previousSibling(r);while(r&&r.offsetHeight===0);return r?e(r):!1}r=t[0];do r=this._previousSibling(r);while(r&&r.offsetHeight===0);if(r!==null){t=e(r);while(t.hasClass("jstree-open"))t=t.children(".jstree-children").first().children(".jstree-node:visible:last");return t}return r=t[0].parentNode.parentNode,r&&r.className&&r.className.indexOf("jstree-node")!==-1?e(r):!1},get_parent:function(e){return e=this.get_node(e),!e||e.id==="#"?!1:e.parent},get_children_dom:function(e){return e=this.get_node(e,!0),e[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):!e||!e.length?!1:e.children(".jstree-children").children(".jstree-node")},is_parent:function(e){return e=this.get_node(e),e&&(e.state.loaded===!1||e.children.length>0)},is_loaded:function(e){return e=this.get_node(e),e&&e.state.loaded},is_loading:function(e){return e=this.get_node(e),e&&e.state&&e.state.loading},is_open:function(e){return e=this.get_node(e),e&&e.state.opened},is_closed:function(e){return e=this.get_node(e),e&&this.is_parent(e)&&!e.state.opened},is_leaf:function(e){return!this.is_parent(e)},load_node:function(t,n){var r,i,s,o,u;if(e.isArray(t))return this._load_nodes(t.slice(),n),!0;t=this.get_node(t);if(!t)return n&&n.call(this,t,!1),!1;if(t.state.loaded){t.state.loaded=!1;for(r=0,i=t.children_d.length;r<i;r++){for(s=0,o=t.parents.length;s<o;s++)this._model.data[t.parents[s]].children_d=e.vakata.array_remove_item(this._model.data[t.parents[s]].children_d,t.children_d[r]);this._model.data[t.children_d[r]].state.selected&&(u=!0,this._data.core.selected=e.vakata.array_remove_item(this._data.core.selected,t.children_d[r])),delete this._model.data[t.children_d[r]]}t.children=[],t.children_d=[],u&&this.trigger("changed",{action:"load_node",node:t,selected:this._data.core.selected})}return t.state.failed=!1,t.state.loading=!0,this.get_node(t,!0).addClass("jstree-loading").attr("aria-busy",!0),this._load_node(t,e.proxy(function(e){t=this._model.data[t.id],t.state.loading=!1,t.state.loaded=e,t.state.failed=!t.state.loaded;var r=this.get_node(t,!0);t.state.loaded&&!t.children.length&&r&&r.length&&!r.hasClass("jstree-leaf")&&r.removeClass("jstree-closed jstree-open").addClass("jstree-leaf"),r.removeClass("jstree-loading").attr("aria-busy",!1),this.trigger("load_node",{node:t,status:e}),n&&n.call(this,t,e)},this)),!0},_load_nodes:function(e,t,n){var r=!0,i=function(){this._load_nodes(e,t,!0)},s=this._model.data,o,u,a=[];for(o=0,u=e.length;o<u;o++)s[e[o]]&&(!s[e[o]].state.loaded&&!s[e[o]].state.failed||!n)&&(this.is_loading(e[o])||this.load_node(e[o],i),r=!1);if(r){for(o=0,u=e.length;o<u;o++)s[e[o]]&&s[e[o]].state.loaded&&a.push(e[o]);t&&!t.done&&(t.call(this,a),t.done=!0)}},load_all:function(e,t){e||(e="#"),e=this.get_node(e);if(!e)return!1;var n=[],r=this._model.data,i=r[e.id].children_d,s,o;e.state&&!e.state.loaded&&n.push(e.id);for(s=0,o=i.length;s<o;s++)r[i[s]]&&r[i[s]].state&&!r[i[s]].state.loaded&&n.push(i[s]);n.length?this._load_nodes(n,function(){this.load_all(e,t)}):(t&&t.call(this,e),this.trigger("load_all",{node:e}))},_load_node:function(t,n){var r=this.settings.core.data,i;return r?e.isFunction(r)?r.call(this,t,e.proxy(function(r){r===!1&&n.call(this,!1),this[typeof r=="string"?"_append_html_data":"_append_json_data"](t,typeof r=="string"?e(e.parseHTML(r)).filter(function(){return this.nodeType!==3}):r,function(e){n.call(this,e)})},this)):typeof r=="object"?r.url?(r=e.extend(!0,{},r),e.isFunction(r.url)&&(r.url=r.url.call(this,t)),e.isFunction(r.data)&&(r.data=r.data.call(this,t)),e.ajax(r).done(e.proxy(function(r,i,s){var o=s.getResponseHeader("Content-Type");return o&&o.indexOf("json")!==-1||typeof r=="object"?this._append_json_data(t,r,function(e){n.call(this,e)}):o&&o.indexOf("html")!==-1||typeof r=="string"?this._append_html_data(t,e(e.parseHTML(r)).filter(function(){return this.nodeType!==3}),function(e){n.call(this,e)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:s})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1))},this)).fail(e.proxy(function(e){n.call(this,!1),this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:t.id,xhr:e})},this.settings.core.error.call(this,this._data.core.last_error)},this))):(i=e.isArray(r)||e.isPlainObject(r)?JSON.parse(JSON.stringify(r)):r,t.id==="#"?this._append_json_data(t,i,function(e){n.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1))):typeof r=="string"?t.id==="#"?this._append_html_data(t,e(e.parseHTML(r)).filter(function(){return this.nodeType!==3}),function(e){n.call(this,e)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:t.id})},this.settings.core.error.call(this,this._data.core.last_error),n.call(this,!1)):n.call(this,!1):t.id==="#"?this._append_html_data(t,this._data.core.original_container_html.clone(!0),function(e){n.call(this,e)}):n.call(this,!1)},_node_changed:function(e){e=this.get_node(e),e&&this._model.changed.push(e.id)},_append_html_data:function(t,n,r){t=this.get_node(t),t.children=[],t.children_d=[];var i=n.is("ul")?n.children():n,s=t.id,o=[],u=[],a=this._model.data,f=a[s],l=this._data.core.selected.length,c,h,p;i.each(e.proxy(function(t,n){c=this._parse_model_from_html(e(n),s,f.parents.concat()),c&&(o.push(c),u.push(c),a[c].children_d.length&&(u=u.concat(a[c].children_d)))},this)),f.children=o,f.children_d=u;for(h=0,p=f.parents.length;h<p;h++)a[f.parents[h]].children_d=a[f.parents[h]].children_d.concat(u);this.trigger("model",{nodes:u,parent:s}),s!=="#"?(this._node_changed(s),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==l&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),r.call(this,!0)},_append_json_data:function(t,n,r,i){if(this.element===null)return;t=this.get_node(t),t.children=[],t.children_d=[],n.d&&(n=n.d,typeof n=="string"&&(n=JSON.parse(n))),e.isArray(n)||(n=[n]);var s=null,o={df:this._model.default_state,dat:n,par:t.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},u=function(e,t){e.data&&(e=e.data);var n=e.dat,r=e.par,i=[],s=[],o=[],u=e.df,a=e.t_id,f=e.t_cnt,l=e.m,c=l[r],h=e.sel,p,d,v,m,g=function(e,n,r){r?r=r.concat():r=[],n&&r.unshift(n);var i=e.id.toString(),s,a,f,c,h={id:i,text:e.text||"",icon:e.icon!==t?e.icon:!0,parent:n,parents:r,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in u)u.hasOwnProperty(s)&&(h.state[s]=u[s]);e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(h.icon=e.data.jstree.icon);if(h.icon===t||h.icon===null||h.icon==="")h.icon=!0;if(e&&e.data){h.data=e.data;if(e.data.jstree)for(s in e.data.jstree)e.data.jstree.hasOwnProperty(s)&&(h.state[s]=e.data.jstree[s])}if(e&&typeof e.state=="object")for(s in e.state)e.state.hasOwnProperty(s)&&(h.state[s]=e.state[s]);if(e&&typeof e.li_attr=="object")for(s in e.li_attr)e.li_attr.hasOwnProperty(s)&&(h.li_attr[s]=e.li_attr[s]);h.li_attr.id||(h.li_attr.id=i);if(e&&typeof e.a_attr=="object")for(s in e.a_attr)e.a_attr.hasOwnProperty(s)&&(h.a_attr[s]=e.a_attr[s]);e&&e.children&&e.children===!0&&(h.state.loaded=!1,h.children=[],h.children_d=[]),l[h.id]=h;for(s=0,a=h.children.length;s<a;s++)f=g(l[h.children[s]],h.id,r),c=l[f],h.children_d.push(f),c.children_d.length&&(h.children_d=h.children_d.concat(c.children_d));return delete e.data,delete e.children,l[h.id].original=e,h.state.selected&&o.push(h.id),h.id},y=function(e,n,r){r?r=r.concat():r=[],n&&r.unshift(n);var i=!1,s,c,h,p,d;do i="j"+a+"_"+ ++f;while(l[i]);d={id:!1,text:typeof e=="string"?e:"",icon:typeof e=="object"&&e.icon!==t?e.icon:!0,parent:n,parents:r,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(s in u)u.hasOwnProperty(s)&&(d.state[s]=u[s]);e&&e.id&&(d.id=e.id.toString()),e&&e.text&&(d.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(d.icon=e.data.jstree.icon);if(d.icon===t||d.icon===null||d.icon==="")d.icon=!0;if(e&&e.data){d.data=e.data;if(e.data.jstree)for(s in e.data.jstree)e.data.jstree.hasOwnProperty(s)&&(d.state[s]=e.data.jstree[s])}if(e&&typeof e.state=="object")for(s in e.state)e.state.hasOwnProperty(s)&&(d.state[s]=e.state[s]);if(e&&typeof e.li_attr=="object")for(s in e.li_attr)e.li_attr.hasOwnProperty(s)&&(d.li_attr[s]=e.li_attr[s]);d.li_attr.id&&!d.id&&(d.id=d.li_attr.id.toString()),d.id||(d.id=i),d.li_attr.id||(d.li_attr.id=d.id);if(e&&typeof e.a_attr=="object")for(s in e.a_attr)e.a_attr.hasOwnProperty(s)&&(d.a_attr[s]=e.a_attr[s]);if(e&&e.children&&e.children.length){for(s=0,c=e.children.length;s<c;s++)h=y(e.children[s],d.id,r),p=l[h],d.children.push(h),p.children_d.length&&(d.children_d=d.children_d.concat(p.children_d));d.children_d=d.children_d.concat(d.children)}return e&&e.children&&e.children===!0&&(d.state.loaded=!1,d.children=[],d.children_d=[]),delete e.data,delete e.children,d.original=e,l[d.id]=d,d.state.selected&&o.push(d.id),d.id};if(n.length&&n[0].id!==t&&n[0].parent!==t){for(d=0,v=n.length;d<v;d++)n[d].children||(n[d].children=[]),l[n[d].id.toString()]=n[d];for(d=0,v=n.length;d<v;d++)l[n[d].parent.toString()].children.push(n[d].id.toString()),c.children_d.push(n[d].id.toString());for(d=0,v=c.children.length;d<v;d++)p=g(l[c.children[d]],r,c.parents.concat()),s.push(p),l[p].children_d.length&&(s=s.concat(l[p].children_d));for(d=0,v=c.parents.length;d<v;d++)l[c.parents[d]].children_d=l[c.parents[d]].children_d.concat(s);m={cnt:f,mod:l,sel:h,par:r,dpc:s,add:o}}else{for(d=0,v=n.length;d<v;d++)p=y(n[d],r,c.parents.concat()),p&&(i.push(p),s.push(p),l[p].children_d.length&&(s=s.concat(l[p].children_d)));c.children=i,c.children_d=s;for(d=0,v=c.parents.length;d<v;d++)l[c.parents[d]].children_d=l[c.parents[d]].children_d.concat(s);m={cnt:f,mod:l,sel:h,par:r,dpc:s,add:o}}if(typeof window!="undefined"&&typeof window.document!="undefined")return m;postMessage(m)},a=function(t,n){if(this.element===null)return;this._cnt=t.cnt,this._model.data=t.mod;if(n){var i,s,o=t.add,u=t.sel,a=this._data.core.selected.slice(),f=this._model.data;if(u.length!==a.length||e.vakata.array_unique(u.concat(a)).length!==u.length){for(i=0,s=u.length;i<s;i++)e.inArray(u[i],o)===-1&&e.inArray(u[i],a)===-1&&(f[u[i]].state.selected=!1);for(i=0,s=a.length;i<s;i++)e.inArray(a[i],u)===-1&&(f[a[i]].state.selected=!0)}}t.add.length&&(this._data.core.selected=this._data.core.selected.concat(t.add)),this.trigger("model",{nodes:t.dpc,parent:t.par}),t.par!=="#"?(this._node_changed(t.par),this.redraw()):this.redraw(!0),t.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),r.call(this,!0)};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{this._wrk===null&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+u.toString()],{type:"text/javascript"}))),!this._data.core.working||i?(this._data.core.working=!0,s=new window.Worker(this._wrk),s.onmessage=e.proxy(function(e){a.call(this,e.data,!0);try{s.terminate(),s=null}catch(t){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),o.par?s.postMessage(o):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([t,n,r,!0])}catch(f){a.call(this,u(o),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else a.call(this,u(o),!1)},_parse_model_from_html:function(t,n,r){r?r=[].concat(r):r=[],n&&r.unshift(n);var i,s,o=this._model.data,u={id:!1,text:!1,icon:!0,parent:n,parents:r,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},a,f,l;for(a in this._model.default_state)this._model.default_state.hasOwnProperty(a)&&(u.state[a]=this._model.default_state[a]);f=e.vakata.attributes(t,!0),e.each(f,function(t,n){n=e.trim(n);if(!n.length)return!0;u.li_attr[t]=n,t==="id"&&(u.id=n.toString())}),f=t.children("a").first(),f.length&&(f=e.vakata.attributes(f,!0),e.each(f,function(t,n){n=e.trim(n),n.length&&(u.a_attr[t]=n)})),f=t.children("a").first().length?t.children("a").first().clone():t.clone(),f.children("ins, i, ul").remove(),f=f.html(),f=e("<div />").html(f),u.text=this.settings.core.force_text?f.text():f.html(),f=t.data(),u.data=f?e.extend(!0,{},f):null,u.state.opened=t.hasClass("jstree-open"),u.state.selected=t.children("a").hasClass("jstree-clicked"),u.state.disabled=t.children("a").hasClass("jstree-disabled");if(u.data&&u.data.jstree)for(a in u.data.jstree)u.data.jstree.hasOwnProperty(a)&&(u.state[a]=u.data.jstree[a]);f=t.children("a").children(".jstree-themeicon"),f.length&&(u.icon=f.hasClass("jstree-themeicon-hidden")?!1:f.attr("rel")),u.state.icon!==undefined&&(u.icon=u.state.icon);if(u.icon===undefined||u.icon===null||u.icon==="")u.icon=!0;f=t.children("ul").children("li");do l="j"+this._id+"_"+ ++this._cnt;while(o[l]);return u.id=u.li_attr.id?u.li_attr.id.toString():l,f.length?(f.each(e.proxy(function(t,n){i=this._parse_model_from_html(e(n),u.id,r),s=this._model.data[i],u.children.push(i),s.children_d.length&&(u.children_d=u.children_d.concat(s.children_d))},this)),u.children_d=u.children_d.concat(u.children)):t.hasClass("jstree-closed")&&(u.state.loaded=!1),u.li_attr["class"]&&(u.li_attr["class"]=u.li_attr["class"].replace("jstree-closed","").replace("jstree-open","")),u.a_attr["class"]&&(u.a_attr["class"]=u.a_attr["class"].replace("jstree-clicked","").replace("jstree-disabled","")),o[u.id]=u,u.state.selected&&this._data.core.selected.push(u.id),u.id},_parse_model_from_flat_json:function(e,t,n){n?n=n.concat():n=[],t&&n.unshift(t);var r=e.id.toString(),i=this._model.data,s=this._model.default_state,o,u,a,f,l={id:r,text:e.text||"",icon:e.icon!==undefined?e.icon:!0,parent:t,parents:n,children:e.children||[],children_d:e.children_d||[],data:e.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(o in s)s.hasOwnProperty(o)&&(l.state[o]=s[o]);e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon);if(l.icon===undefined||l.icon===null||l.icon==="")l.icon=!0;if(e&&e.data){l.data=e.data;if(e.data.jstree)for(o in e.data.jstree)e.data.jstree.hasOwnProperty(o)&&(l.state[o]=e.data.jstree[o])}if(e&&typeof e.state=="object")for(o in e.state)e.state.hasOwnProperty(o)&&(l.state[o]=e.state[o]);if(e&&typeof e.li_attr=="object")for(o in e.li_attr)e.li_attr.hasOwnProperty(o)&&(l.li_attr[o]=e.li_attr[o]);l.li_attr.id||(l.li_attr.id=r);if(e&&typeof e.a_attr=="object")for(o in e.a_attr)e.a_attr.hasOwnProperty(o)&&(l.a_attr[o]=e.a_attr[o]);e&&e.children&&e.children===!0&&(l.state.loaded=!1,l.children=[],l.children_d=[]),i[l.id]=l;for(o=0,u=l.children.length;o<u;o++)a=this._parse_model_from_flat_json(i[l.children[o]],l.id,n),f=i[a],l.children_d.push(a),f.children_d.length&&(l.children_d=l.children_d.concat(f.children_d));return delete e.data,delete e.children,i[l.id].original=e,l.state.selected&&this._data.core.selected.push(l.id),l.id},_parse_model_from_json:function(e,t,n){n?n=n.concat():n=[],t&&n.unshift(t);var r=!1,i,s,o,u,a=this._model.data,f=this._model.default_state,l;do r="j"+this._id+"_"+ ++this._cnt;while(a[r]);l={id:!1,text:typeof e=="string"?e:"",icon:typeof e=="object"&&e.icon!==undefined?e.icon:!0,parent:t,parents:n,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(i in f)f.hasOwnProperty(i)&&(l.state[i]=f[i]);e&&e.id&&(l.id=e.id.toString()),e&&e.text&&(l.text=e.text),e&&e.data&&e.data.jstree&&e.data.jstree.icon&&(l.icon=e.data.jstree.icon);if(l.icon===undefined||l.icon===null||l.icon==="")l.icon=!0;if(e&&e.data){l.data=e.data;if(e.data.jstree)for(i in e.data.jstree)e.data.jstree.hasOwnProperty(i)&&(l.state[i]=e.data.jstree[i])}if(e&&typeof e.state=="object")for(i in e.state)e.state.hasOwnProperty(i)&&(l.state[i]=e.state[i]);if(e&&typeof e.li_attr=="object")for(i in e.li_attr)e.li_attr.hasOwnProperty(i)&&(l.li_attr[i]=e.li_attr[i]);l.li_attr.id&&!l.id&&(l.id=l.li_attr.id.toString()),l.id||(l.id=r),l.li_attr.id||(l.li_attr.id=l.id);if(e&&typeof e.a_attr=="object")for(i in e.a_attr)e.a_attr.hasOwnProperty(i)&&(l.a_attr[i]=e.a_attr[i]);if(e&&e.children&&e.children.length){for(i=0,s=e.children.length;i<s;i++)o=this._parse_model_from_json(e.children[i],l.id,n),u=a[o],l.children.push(o),u.children_d.length&&(l.children_d=l.children_d.concat(u.children_d));l.children_d=l.children_d.concat(l.children)}return e&&e.children&&e.children===!0&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete e.data,delete e.children,l.original=e,a[l.id]=l,l.state.selected&&this._data.core.selected.push(l.id),l.id},_redraw:function(){var e=this._model.force_full_redraw?this._model.data["#"].children.concat([]):this._model.changed.concat([]),t=a.createElement("UL"),n,r,i,s=this._data.core.focused;for(r=0,i=e.length;r<i;r++)n=this.redraw_node(e[r],!0,this._model.force_full_redraw),n&&this._model.force_full_redraw&&t.appendChild(n);this._model.force_full_redraw&&(t.className=this.get_container_ul()[0].className,t.setAttribute("role","group"),this.element.empty().append(t)),s!==null&&(n=this.get_node(s,!0),n&&n.length&&n.children(".jstree-anchor")[0]!==a.activeElement?n.children(".jstree-anchor").focus():this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:e})},redraw:function(e){e&&(this._model.force_full_redraw=!0),this._redraw()},draw_children:function(e){var t=this.get_node(e),n=!1,r=!1,i=!1,s=a;if(!t)return!1;if(t.id==="#")return this.redraw(!0);e=this.get_node(e,!0);if(!e||!e.length)return!1;e.children(".jstree-children").remove(),e=e[0];if(t.children.length&&t.state.loaded){i=s.createElement("UL"),i.setAttribute("role","group"),i.className="jstree-children";for(n=0,r=t.children.length;n<r;n++)i.appendChild(this.redraw_node(t.children[n],!0,!0));e.appendChild(i)}},redraw_node:function(t,n,r,i){var s=this.get_node(t),o=!1,u=!1,l=!1,c=!1,h=!1,p=!1,d="",v=a,m=this._model.data,g=!1,y=!1,b=null,w=0,E=0;if(!s)return!1;if(s.id==="#")return this.redraw(!0);n=n||s.children.length===0,t=a.querySelector?this.element[0].querySelector("#"+("0123456789".indexOf(s.id[0])!==-1?"\\3"+s.id[0]+" "+s.id.substr(1).replace(e.jstree.idregex,"\\$&"):s.id.replace(e.jstree.idregex,"\\$&"))):a.getElementById(s.id);if(!t){n=!0;if(!r){o=s.parent!=="#"?e("#"+s.parent.replace(e.jstree.idregex,"\\$&"),this.element)[0]:null;if(o!==null&&(!o||!m[s.parent].state.opened))return!1;u=e.inArray(s.id,o===null?m["#"].children:m[s.parent].children)}}else t=e(t),r||(o=t.parent().parent()[0],o===this.element[0]&&(o=null),u=t.index()),!n&&s.children.length&&!t.children(".jstree-children").length&&(n=!0),n||(l=t.children(".jstree-children")[0]),g=t.children(".jstree-anchor")[0]===a.activeElement,t.remove();t=f.cloneNode(!0),d="jstree-node ";for(c in s.li_attr)if(s.li_attr.hasOwnProperty(c)){if(c==="id")continue;c!=="class"?t.setAttribute(c,s.li_attr[c]):d+=s.li_attr[c]}s.a_attr.id||(s.a_attr.id=s.id+"_anchor"),t.setAttribute("aria-selected",!!s.state.selected),t.setAttribute("aria-level",s.parents.length),t.setAttribute("aria-labelledby",s.a_attr.id),s.state.disabled&&t.setAttribute("aria-disabled",!0),s.state.loaded&&!s.children.length?d+=" jstree-leaf":(d+=s.state.opened&&s.state.loaded?" jstree-open":" jstree-closed",t.setAttribute("aria-expanded",s.state.opened&&s.state.loaded)),s.parent!==null&&m[s.parent].children[m[s.parent].children.length-1]===s.id&&(d+=" jstree-last"),t.id=s.id,t.className=d,d=(s.state.selected?" jstree-clicked":"")+(s.state.disabled?" jstree-disabled":"");for(h in s.a_attr)if(s.a_attr.hasOwnProperty(h)){if(h==="href"&&s.a_attr[h]==="#")continue;h!=="class"?t.childNodes[1].setAttribute(h,s.a_attr[h]):d+=" "+s.a_attr[h]}d.length&&(t.childNodes[1].className="jstree-anchor "+d);if(s.icon&&s.icon!==!0||s.icon===!1)s.icon===!1?t.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":s.icon.indexOf("/")===-1&&s.icon.indexOf(".")===-1?t.childNodes[1].childNodes[0].className+=" "+s.icon+" jstree-themeicon-custom":(t.childNodes[1].childNodes[0].style.backgroundImage="url("+s.icon+")",t.childNodes[1].childNodes[0].style.backgroundPosition="center center",t.childNodes[1].childNodes[0].style.backgroundSize="auto",t.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom");this.settings.core.force_text?t.childNodes[1].appendChild(v.createTextNode(s.text)):t.childNodes[1].innerHTML+=s.text;if(n&&s.children.length&&(s.state.opened||i)&&s.state.loaded){p=v.createElement("UL"),p.setAttribute("role","group"),p.className="jstree-children";for(c=0,h=s.children.length;c<h;c++)p.appendChild(this.redraw_node(s.children[c],n,!0));t.appendChild(p)}l&&t.appendChild(l);if(!r){o||(o=this.element[0]);for(c=0,h=o.childNodes.length;c<h;c++)if(o.childNodes[c]&&o.childNodes[c].className&&o.childNodes[c].className.indexOf("jstree-children")!==-1){b=o.childNodes[c];break}b||(b=v.createElement("UL"),b.setAttribute("role","group"),b.className="jstree-children",o.appendChild(b)),o=b,u<o.childNodes.length?o.insertBefore(t,o.childNodes[u]):o.appendChild(t),g&&(w=this.element[0].scrollTop,E=this.element[0].scrollLeft,t.childNodes[1].focus(),this.element[0].scrollTop=w,this.element[0].scrollLeft=E)}return s.state.opened&&!s.state.loaded&&(s.state.opened=!1,setTimeout(e.proxy(function(){this.open_node(s.id,!1,0)},this),0)),t},open_node:function(t,n,r){var i,s,o,u;if(e.isArray(t)){t=t.slice();for(i=0,s=t.length;i<s;i++)this.open_node(t[i],n,r);return!0}t=this.get_node(t);if(!t||t.id==="#")return!1;r=r===undefined?this.settings.core.animation:r;if(!this.is_closed(t))return n&&n.call(this,t,!1),!1;if(!this.is_loaded(t)){if(this.is_loading(t))return setTimeout(e.proxy(function(){this.open_node(t,n,r)},this),500);this.load_node(t,function(e,t){return t?this.open_node(e,n,r):n?n.call(this,e,!1):!1})}else o=this.get_node(t,!0),u=this,o.length&&(r&&o.children(".jstree-children").length&&o.children(".jstree-children").stop(!0,!0),t.children.length&&!this._firstChild(o.children(".jstree-children")[0])&&this.draw_children(t),r?(this.trigger("before_open",{node:t}),o.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(r,function(){this.style.display="",u.trigger("after_open",{node:t})})):(this.trigger("before_open",{node:t}),o[0].className=o[0].className.replace("jstree-closed","jstree-open"),o[0].setAttribute("aria-expanded",!0))),t.state.opened=!0,n&&n.call(this,t,!0),o.length||this.trigger("before_open",{node:t}),this.trigger("open_node",{node:t}),(!r||!o.length)&&this.trigger("after_open",{node:t})},_open_to:function(t){t=this.get_node(t);if(!t||t.id==="#")return!1;var n,r,i=t.parents;for(n=0,r=i.length;n<r;n+=1)n!=="#"&&this.open_node(i[n],!1,0);return e("#"+t.id.replace(e.jstree.idregex,"\\$&"),this.element)},close_node:function(t,n){var r,i,s,o;if(e.isArray(t)){t=t.slice();for(r=0,i=t.length;r<i;r++)this.close_node(t[r],n);return!0}t=this.get_node(t);if(!t||t.id==="#")return!1;if(this.is_closed(t))return!1;n=n===undefined?this.settings.core.animation:n,s=this,o=this.get_node(t,!0),o.length&&(n?o.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(n,function(){this.style.display="",o.children(".jstree-children").remove(),s.trigger("after_close",{node:t})}):(o[0].className=o[0].className.replace("jstree-open","jstree-closed"),o.attr("aria-expanded",!1).children(".jstree-children").remove())),t.state.opened=!1,this.trigger("close_node",{node:t}),(!n||!o.length)&&this.trigger("after_close",{node:t})},toggle_node:function(t){var n,r;if(e.isArray(t)){t=t.slice();for(n=0,r=t.length;n<r;n++)this.toggle_node(t[n]);return!0}if(this.is_closed(t))return this.open_node(t);if(this.is_open(t))return this.close_node(t)},open_all:function(e,t,n){e||(e="#"),e=this.get_node(e);if(!e)return!1;var r=e.id==="#"?this.get_container_ul():this.get_node(e,!0),i,s,o;if(!r.length){for(i=0,s=e.children_d.length;i<s;i++)this.is_closed(this._model.data[e.children_d[i]])&&(this._model.data[e.children_d[i]].state.opened=!0);return this.trigger("open_all",{node:e})}n=n||r,o=this,r=this.is_closed(e)?r.find(".jstree-closed").addBack():r.find(".jstree-closed"),r.each(function(){o.open_node(this,function(e,r){r&&this.is_parent(e)&&this.open_all(e,t,n)},t||0)}),n.find(".jstree-closed").length===0&&this.trigger("open_all",{node:this.get_node(n)})},close_all:function(t,n){t||(t="#"),t=this.get_node(t);if(!t)return!1;var r=t.id==="#"?this.get_container_ul():this.get_node(t,!0),i=this,s,o;if(!r.length){for(s=0,o=t.children_d.length;s<o;s++)this._model.data[t.children_d[s]].state.opened=!1;return this.trigger("close_all",{node:t})}r=this.is_open(t)?r.find(".jstree-open").addBack():r.find(".jstree-open"),e(r.get().reverse()).each(function(){i.close_node(this,n||0)}),this.trigger("close_all",{node:t})},is_disabled:function(e){return e=this.get_node(e),e&&e.state&&e.state.disabled},enable_node:function(t){var n,r;if(e.isArray(t)){t=t.slice();for(n=0,r=t.length;n<r;n++)this.enable_node(t[n]);return!0}t=this.get_node(t);if(!t||t.id==="#")return!1;t.state.disabled=!1,this.get_node(t,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),this.trigger("enable_node",{node:t})},disable_node:function(t){var n,r;if(e.isArray(t)){t=t.slice();for(n=0,r=t.length;n<r;n++)this.disable_node(t[n]);return!0}t=this.get_node(t);if(!t||t.id==="#")return!1;t.state.disabled=!0,this.get_node(t,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),this.trigger("disable_node",{node:t})},activate_node:function(e,t){if(this.is_disabled(e))return!1;this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==undefined?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1]));if(!this.settings.core.multiple||!t.metaKey&&!t.ctrlKey&&!t.shiftKey||t.shiftKey&&(!this._data.core.last_clicked||!this.get_parent(e)||this.get_parent(e)!==this._data.core.last_clicked.parent))!this.settings.core.multiple&&(t.metaKey||t.ctrlKey||t.shiftKey)&&this.is_selected(e)?this.deselect_node(e,!1,t):(this.deselect_all(!0),this.select_node(e,!1,!1,t),this._data.core.last_clicked=this.get_node(e));else if(t.shiftKey){var n=this.get_node(e).id,r=this._data.core.last_clicked.id,i=this.get_node(this._data.core.last_clicked.parent).children,s=!1,o,u;for(o=0,u=i.length;o<u;o+=1)i[o]===n&&(s=!s),i[o]===r&&(s=!s),!this.is_disabled(i[o])&&(s||i[o]===n||i[o]===r)?this.select_node(i[o],!0,!1,t):this.deselect_node(i[o],!0,t);this.trigger("changed",{action:"select_node",node:this.get_node(e),selected:this._data.core.selected,event:t})}else this.is_selected(e)?this.deselect_node(e,!1,t):this.select_node(e,!1,!1,t);this.trigger("activate_node",{node:this.get_node(e)})},hover_node:function(e){e=this.get_node(e,!0);if(!e||!e.length||e.children(".jstree-hovered").length)return!1;var t=this.element.find(".jstree-hovered"),n=this.element;t&&t.length&&this.dehover_node(t),e.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(e)}),setTimeout(function(){n.attr("aria-activedescendant",e[0].id)},0)},dehover_node:function(e){e=this.get_node(e,!0);if(!e||!e.length||!e.children(".jstree-hovered").length)return!1;e.children(".jstree-anchor").removeClass("jstree-hovered"),this.trigger("dehover_node",{node:this.get_node(e)})},select_node:function(t,n,r,i){var s,o,u,a;if(e.isArray(t)){t=t.slice();for(o=0,u=t.length;o<u;o++)this.select_node(t[o],n,r,i);return!0}t=this.get_node(t);if(!t||t.id==="#")return!1;s=this.get_node(t,!0),t.state.selected||(t.state.selected=!0,this._data.core.selected.push(t.id),r||(s=this._open_to(t)),s&&s.length&&s.attr("aria-selected",!0).children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:t,selected:this._data.core.selected,event:i}),n||this.trigger("changed",{action:"select_node",node:t,selected:this._data.core.selected,event:i}))},deselect_node:function(t,n,r){var i,s,o;if(e.isArray(t)){t=t.slice();for(i=0,s=t.length;i<s;i++)this.deselect_node(t[i],n,r);return!0}t=this.get_node(t);if(!t||t.id==="#")return!1;o=this.get_node(t,!0),t.state.selected&&(t.state.selected=!1,this._data.core.selected=e.vakata.array_remove_item(this._data.core.selected,t.id),o.length&&o.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:t,selected:this._data.core.selected,event:r}),n||this.trigger("changed",{action:"deselect_node",node:t,selected:this._data.core.selected,event:r}))},select_all:function(e){var t=this._data.core.selected.concat([]),n,r;this._data.core.selected=this._model.data["#"].children_d.concat();for(n=0,r=this._data.core.selected.length;n<r;n++)this._model.data[this._data.core.selected[n]]&&(this._model.data[this._data.core.selected[n]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),e||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:t})},deselect_all:function(e){var t=this._data.core.selected.concat([]),n,r;for(n=0,r=this._data.core.selected.length;n<r;n++)this._model.data[this._data.core.selected[n]]&&(this._model.data[this._data.core.selected[n]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:t}),e||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:t})},is_selected:function(e){return e=this.get_node(e),!e||e.id==="#"?!1:e.state.selected},get_selected:function(t){return t?e.map(this._data.core.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.core.selected.slice()},get_top_selected:function(t){var n=this.get_selected(!0),r={},i,s,o,u;for(i=0,s=n.length;i<s;i++)r[n[i].id]=n[i];for(i=0,s=n.length;i<s;i++)for(o=0,u=n[i].children_d.length;o<u;o++)r[n[i].children_d[o]]&&delete r[n[i].children_d[o]];n=[];for(i in r)r.hasOwnProperty(i)&&n.push(i);return t?e.map(n,e.proxy(function(e){return this.get_node(e)},this)):n},get_bottom_selected:function(t){var n=this.get_selected(!0),r=[],i,s;for(i=0,s=n.length;i<s;i++)n[i].children.length||r.push(n[i].id);return t?e.map(r,e.proxy(function(e){return this.get_node(e)},this)):r},get_state:function(){var e={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}},t;for(t in this._model.data)this._model.data.hasOwnProperty(t)&&t!=="#"&&(this._model.data[t].state.opened&&e.core.open.push(t),this._model.data[t].state.selected&&e.core.selected.push(t));return e},set_state:function(t,n){if(t){if(t.core){var r,i,s,o,u;if(t.core.open)return!e.isArray(t.core.open)||!t.core.open.length?(delete t.core.open,this.set_state(t,n)):this._load_nodes(t.core.open,function(e){this.open_node(e,!1,0),delete t.core.open,this.set_state(t,n)},!0),!1;if(t.core.scroll)return t.core.scroll&&t.core.scroll.left!==undefined&&this.element.scrollLeft(t.core.scroll.left),t.core.scroll&&t.core.scroll.top!==undefined&&this.element.scrollTop(t.core.scroll.top),delete t.core.scroll,this.set_state(t,n),!1;if(t.core.selected)return o=this,this.deselect_all(),e.each(t.core.selected,function(e,t){o.select_node(t,!1,!0)}),delete t.core.selected,this.set_state(t,n),!1;for(u in t)t.hasOwnProperty(u)&&u!=="core"&&e.inArray(u,this.settings.plugins)===-1&&delete t[u];if(e.isEmptyObject(t.core))return delete t.core,this.set_state(t,n),!1}return e.isEmptyObject(t)?(t=null,n&&n.call(this),this.trigger("set_state"),!1):!0}return!1},refresh:function(t,n){this._data.core.state=n===!0?{}:this.get_state(),n&&e.isFunction(n)&&(this._data.core.state=n.call(this,this._data.core.state)),this._cnt=0,this._model.data={"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}};var r=this.get_container_ul()[0].className;t||(this.element.html("<ul class='"+r+"' role='group'><"+"li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><"+"a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node("#",function(t,n){n&&(this.get_container_ul()[0].className=r,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state(e.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(t){t=this.get_node(t);if(!t||t.id==="#")return!1;var n=[],r=[],i=this._data.core.selected.concat([]);r.push(t.id),t.state.opened===!0&&n.push(t.id),this.get_node(t,!0).find(".jstree-open").each(function(){n.push(this.id)}),this._load_nodes(r,e.proxy(function(e){this.open_node(n,!1,0),this.select_node(this._data.core.selected),this.trigger("refresh_node",{node:t,nodes:e})},this))},set_id:function(t,n){t=this.get_node(t);if(!t||t.id==="#")return!1;var r,i,s=this._model.data;n=n.toString(),s[t.parent].children[e.inArray(t.id,s[t.parent].children)]=n;for(r=0,i=t.parents.length;r<i;r++)s[t.parents[r]].children_d[e.inArray(t.id,s[t.parents[r]].children_d)]=n;for(r=0,i=t.children.length;r<i;r++)s[t.children[r]].parent=n;for(r=0,i=t.children_d.length;r<i;r++)s[t.children_d[r]].parents[e.inArray(t.id,s[t.children_d[r]].parents)]=n;return r=e.inArray(t.id,this._data.core.selected),r!==-1&&(this._data.core.selected[r]=n),r=this.get_node(t.id,!0),r&&(r.attr("id",n).children(".jstree-anchor").attr("id",n+"_anchor").end().attr("aria-labelledby",n+"_anchor"),this.element.attr("aria-activedescendant")===t.id&&this.element.attr("aria-activedescendant",n)),delete s[t.id],t.id=n,t.li_attr.id=n,s[n]=t,!0},get_text:function(e){return e=this.get_node(e),!e||e.id==="#"?!1:e.text},set_text:function(t,n){var r,i;if(e.isArray(t)){t=t.slice();for(r=0,i=t.length;r<i;r++)this.set_text(t[r],n);return!0}return t=this.get_node(t),!t||t.id==="#"?!1:(t.text=n,this.get_node(t,!0).length&&this.redraw_node(t.id),this.trigger("set_text",{obj:t,text:n}),!0)},get_json:function(t,n,r){t=this.get_node(t||"#");if(!t)return!1;n&&n.flat&&!r&&(r=[]);var i={id:t.id,text:t.text,icon:this.get_icon(t),li_attr:e.extend(!0,{},t.li_attr),a_attr:e.extend(!0,{},t.a_attr),state:{},data:n&&n.no_data?!1:e.extend(!0,{},t.data)},s,o;n&&n.flat?i.parent=t.parent:i.children=[];if(!n||!n.no_state)for(s in t.state)t.state.hasOwnProperty(s)&&(i.state[s]=t.state[s]);n&&n.no_id&&(delete i.id,i.li_attr&&i.li_attr.id&&delete i.li_attr.id,i.a_attr&&i.a_attr.id&&delete i.a_attr.id),n&&n.flat&&t.id!=="#"&&r.push(i);if(!n||!n.no_children)for(s=0,o=t.children.length;s<o;s++)n&&n.flat?this.get_json(t.children[s],n,r):i.children.push(this.get_json(t.children[s],n));return n&&n.flat?r:t.id==="#"?i.children:i},create_node:function(t,n,r,i,s){t===null&&(t="#"),t=this.get_node(t);if(!t)return!1;r=r===undefined?"last":r;if(!r.toString().match(/^(before|after)$/)&&!s&&!this.is_loaded(t))return this.load_node(t,function(){this.create_node(t,n,r,i,!0)});n||(n={text:this.get_string("New node")}),typeof n=="string"&&(n={text:n}),n.text===undefined&&(n.text=this.get_string("New node"));var o,u,a,f;t.id==="#"&&(r==="before"&&(r="first"),r==="after"&&(r="last"));switch(r){case"before":o=this.get_node(t.parent),r=e.inArray(t.id,o.children),t=o;break;case"after":o=this.get_node(t.parent),r=e.inArray(t.id,o.children)+1,t=o;break;case"inside":case"first":r=0;break;case"last":r=t.children.length;break;default:r||(r=0)}r>t.children.length&&(r=t.children.length),n.id||(n.id=!0);if(!this.check("create_node",n,t,r))return this.settings.core.error.call(this,this._data.core.last_error),!1;n.id===!0&&delete n.id,n=this._parse_model_from_json(n,t.id,t.parents.concat());if(!n)return!1;o=this.get_node(n),u=[],u.push(n),u=u.concat(o.children_d),this.trigger("model",{nodes:u,parent:t.id}),t.children_d=t.children_d.concat(u);for(a=0,f=t.parents.length;a<f;a++)this._model.data[t.parents[a]].children_d=this._model.data[t.parents[a]].children_d.concat(u);n=o,o=[];for(a=0,f=t.children.length;a<f;a++)o[a>=r?a+1:a]=t.children[a];return o[r]=n.id,t.children=o,this.redraw_node(t,!0),i&&i.call(this,this.get_node(n)),this.trigger("create_node",{node:this.get_node(n),parent:t.id,position:r}),n.id},rename_node:function(t,n){var r,i,s;if(e.isArray(t)){t=t.slice();for(r=0,i=t.length;r<i;r++)this.rename_node(t[r],n);return!0}return t=this.get_node(t),!t||t.id==="#"?!1:(s=t.text,this.check("rename_node",t,this.get_parent(t),n)?(this.set_text(t,n),this.trigger("rename_node",{node:t,text:n,old:s}),!0):(this.settings.core.error.call(this,this._data.core.last_error),!1))},delete_node:function(t){var n,r,i,s,o,u,a,f,l,c;if(e.isArray(t)){t=t.slice();for(n=0,r=t.length;n<r;n++)this.delete_node(t[n]);return!0}t=this.get_node(t);if(!t||t.id==="#")return!1;i=this.get_node(t.parent),s=e.inArray(t.id,i.children),c=!1;if(!this.check("delete_node",t,i,s))return this.settings.core.error.call(this,this._data.core.last_error),!1;s!==-1&&(i.children=e.vakata.array_remove(i.children,s)),o=t.children_d.concat([]),o.push(t.id);for(f=0,l=o.length;f<l;f++){for(u=0,a=t.parents.length;u<a;u++)s=e.inArray(o[f],this._model.data[t.parents[u]].children_d),s!==-1&&(this._model.data[t.parents[u]].children_d=e.vakata.array_remove(this._model.data[t.parents[u]].children_d,s));this._model.data[o[f]].state.selected&&(c=!0,s=e.inArray(o[f],this._data.core.selected),s!==-1&&(this._data.core.selected=e.vakata.array_remove(this._data.core.selected,s)))}this.trigger("delete_node",{node:t,parent:i.id}),c&&this.trigger("changed",{action:"delete_node",node:t,selected:this._data.core.selected,parent:i.id});for(f=0,l=o.length;f<l;f++)delete this._model.data[o[f]];return this.redraw_node(i,!0),!0},check:function(t,n,r,i,s){n=n&&n.id?n:this.get_node(n),r=r&&r.id?r:this.get_node(r);var o=t.match(/^move_node|copy_node|create_node$/i)?r:n,u=this.settings.core.check_callback;if(t==="move_node"||t==="copy_node")if((!s||!s.is_multi)&&(n.id===r.id||e.inArray(n.id,r.children)===i||e.inArray(r.id,n.children_d)!==-1))return this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:t,pos:i,obj:n&&n.id?n.id:!1,par:r&&r.id?r.id:!1})},!1;return o&&o.data&&(o=o.data),o&&o.functions&&(o.functions[t]===!1||o.functions[t]===!0)?(o.functions[t]===!1&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+t,data:JSON.stringify({chk:t,pos:i,obj:n&&n.id?n.id:!1,par:r&&r.id?r.id:!1})}),o.functions[t]):u===!1||e.isFunction(u)&&u.call(this,t,n,r,i,s)===!1||u&&u[t]===!1?(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+t,data:JSON.stringify({chk:t,pos:i,obj:n&&n.id?n.id:!1,par:r&&r.id?r.id:!1})},!1):!0},last_error:function(){return this._data.core.last_error},move_node:function(t,n,r,i,s,o,u){var a,f,l,c,h,p,d,v,m,g,y,b,w,E;n=this.get_node(n),r=r===undefined?0:r;if(!n)return!1;if(!r.toString().match(/^(before|after)$/)&&!s&&!this.is_loaded(n))return this.load_node(n,function(){this.move_node(t,n,r,i,!0,!1,u)});if(e.isArray(t)){if(t.length!==1){for(a=0,f=t.length;a<f;a++)if(m=this.move_node(t[a],n,r,i,s,!1,u))n=m,r="after";return this.redraw(),!0}t=t[0]}t=t&&t.id?t:this.get_node(t);if(!t||t.id==="#")return!1;l=(t.parent||"#").toString(),h=!r.toString().match(/^(before|after)$/)||n.id==="#"?n:this.get_node(n.parent),p=u?u:this._model.data[t.id]?this:e.jstree.reference(t.id),d=!p||!p._id||this._id!==p._id,c=p&&p._id&&l&&p._model.data[l]&&p._model.data[l].children?e.inArray(t.id,p._model.data[l].children):-1,p&&p._id&&(t=p._model.data[t.id]);if(d)return(m=this.copy_node(t,n,r,i,s,!1,u))?(p&&p.delete_node(t),m):!1;n.id==="#"&&(r==="before"&&(r="first"),r==="after"&&(r="last"));switch(r){case"before":r=e.inArray(n.id,h.children);break;case"after":r=e.inArray(n.id,h.children)+1;break;case"inside":case"first":r=0;break;case"last":r=h.children.length;break;default:r||(r=0)}r>h.children.length&&(r=h.children.length);if(!this.check("move_node",t,h,r,{core:!0,origin:u,is_multi:p&&p._id&&p._id!==this._id,is_foreign:!p||!p._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(t.parent===h.id){v=h.children.concat(),m=e.inArray(t.id,v),m!==-1&&(v=e.vakata.array_remove(v,m),r>m&&r--),m=[];for(g=0,y=v.length;g<y;g++)m[g>=r?g+1:g]=v[g];m[r]=t.id,h.children=m,this._node_changed(h.id),this.redraw(h.id==="#")}else{m=t.children_d.concat(),m.push(t.id);for(g=0,y=t.parents.length;g<y;g++){v=[],E=p._model.data[t.parents[g]].children_d;for(b=0,w=E.length;b<w;b++)e.inArray(E[b],m)===-1&&v.push(E[b]);p._model.data[t.parents[g]].children_d=v}p._model.data[l].children=e.vakata.array_remove_item(p._model.data[l].children,t.id);for(g=0,y=h.parents.length;g<y;g++)this._model.data[h.parents[g]].children_d=this._model.data[h.parents[g]].children_d.concat(m);v=[];for(g=0,y=h.children.length;g<y;g++)v[g>=r?g+1:g]=h.children[g];v[r]=t.id,h.children=v,h.children_d.push(t.id),h.children_d=h.children_d.concat(t.children_d),t.parent=h.id,m=h.parents.concat(),m.unshift(h.id),E=t.parents.length,t.parents=m,m=m.concat();for(g=0,y=t.children_d.length;g<y;g++)this._model.data[t.children_d[g]].parents=this._model.data[t.children_d[g]].parents.slice(0,E*-1),Array.prototype.push.apply(this._model.data[t.children_d[g]].parents,m);if(l==="#"||h.id==="#")this._model.force_full_redraw=!0;this._model.force_full_redraw||(this._node_changed(l),this._node_changed(h.id)),o||this.redraw()}return i&&i.call(this,t,h,r),this.trigger("move_node",{node:t,parent:h.id,position:r,old_parent:l,old_position:c,is_multi:p&&p._id&&p._id!==this._id,is_foreign:!p||!p._id,old_instance:p,new_instance:this}),t.id},copy_node:function(t,n,r,i,s,o,u){var a,f,l,c,h,p,d,v,m,g,y;n=this.get_node(n),r=r===undefined?0:r;if(!n)return!1;if(!r.toString().match(/^(before|after)$/)&&!s&&!this.is_loaded(n))return this.load_node(n,function(){this.copy_node(t,n,r,i,!0,!1,u)});if(e.isArray(t)){if(t.length!==1){for(a=0,f=t.length;a<f;a++)if(c=this.copy_node(t[a],n,r,i,s,!0,u))n=c,r="after";return this.redraw(),!0}t=t[0]}t=t&&t.id?t:this.get_node(t);if(!t||t.id==="#")return!1;v=(t.parent||"#").toString(),m=!r.toString().match(/^(before|after)$/)||n.id==="#"?n:this.get_node(n.parent),g=u?u:this._model.data[t.id]?this:e.jstree.reference(t.id),y=!g||!g._id||this._id!==g._id,g&&g._id&&(t=g._model.data[t.id]),n.id==="#"&&(r==="before"&&(r="first"),r==="after"&&(r="last"));switch(r){case"before":r=e.inArray(n.id,m.children);break;case"after":r=e.inArray(n.id,m.children)+1;break;case"inside":case"first":r=0;break;case"last":r=m.children.length;break;default:r||(r=0)}r>m.children.length&&(r=m.children.length);if(!this.check("copy_node",t,m,r,{core:!0,origin:u,is_multi:g&&g._id&&g._id!==this._id,is_foreign:!g||!g._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;d=g?g.get_json(t,{no_id:!0,no_data:!0,no_state:!0}):t;if(!d)return!1;d.id===!0&&delete d.id,d=this._parse_model_from_json(d,m.id,m.parents.concat());if(!d)return!1;c=this.get_node(d),t&&t.state&&t.state.loaded===!1&&(c.state.loaded=!1),l=[],l.push(d),l=l.concat(c.children_d),this.trigger("model",{nodes:l,parent:m.id});for(h=0,p=m.parents.length;h<p;h++)this._model.data[m.parents[h]].children_d=this._model.data[m.parents[h]].children_d.concat(l);l=[];for(h=0,p=m.children.length;h<p;h++)l[h>=r?h+1:h]=m.children[h];return l[r]=c.id,m.children=l,m.children_d.push(c.id),m.children_d=m.children_d.concat(c.children_d),m.id==="#"&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(m.id),o||this.redraw(m.id==="#"),i&&i.call(this,c,m,r),this.trigger("copy_node",{node:c,original:t,parent:m.id,position:r,old_parent:v,old_position:g&&g._id&&v&&g._model.data[v]&&g._model.data[v].children?e.inArray(t.id,g._model.data[v].children):-1,is_multi:g&&g._id&&g._id!==this._id,is_foreign:!g||!g._id,old_instance:g,new_instance:this}),c.id},cut:function(t){t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]);if(!t.length)return!1;var n=[],o,u,a;for(u=0,a=t.length;u<a;u++)o=this.get_node(t[u]),o&&o.id&&o.id!=="#"&&n.push(o);if(!n.length)return!1;r=n,s=this,i="move_node",this.trigger("cut",{node:t})},copy:function(t){t||(t=this._data.core.selected.concat()),e.isArray(t)||(t=[t]);if(!t.length)return!1;var n=[],o,u,a;for(u=0,a=t.length;u<a;u++)o=this.get_node(t[u]),o&&o.id&&o.id!=="#"&&n.push(o);if(!n.length)return!1;r=n,s=this,i="copy_node",this.trigger("copy",{node:t})},get_buffer:function(){return{mode:i,node:r,inst:s}},can_paste:function(){return i!==!1&&r!==!1},paste:function(e,t){e=this.get_node(e);if(!e||!i||!i.match(/^(copy_node|move_node)$/)||!r)return!1;this[i](r,e,t,!1,!1,!1,s)&&this.trigger("paste",{parent:e.id,node:r,mode:i}),r=!1,i=!1,s=!1},clear_buffer:function(){r=!1,i=!1,s=!1,this.trigger("clear_buffer")},edit:function(t,n,r){var i,s,o,u,a,f,l,c,h;t=this.get_node(t);if(!t)return!1;if(this.settings.core.check_callback===!1)return this._data.core.last_error={error:"check",plugin:"core",id:"core_07",reason:"Could not edit node because of check_callback"},this.settings.core.error.call(this,this._data.core.last_error),!1;h=t,n=typeof n=="string"?n:t.text,this.set_text(t,""),t=this._open_to(t),h.text=n,i=this._data.core.rtl,s=this.element.width(),o=t.children(".jstree-anchor"),u=e("<span>"),a=n,f=e("<div />",{css:{position:"absolute",top:"-200px",left:i?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),l=e("<input />",{value:a,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:e.proxy(function(){var n=u.children(".jstree-rename-input"),i=n.val(),s=this.settings.core.force_text,l;i===""&&(i=a),f.remove(),u.replaceWith(o),u.remove(),a=s?a:e("<div></div>").append(e.parseHTML(a)).html(),this.set_text(t,a),l=!!this.rename_node(t,s?e("<div></div>").text(i).text():e("<div></div>").append(e.parseHTML(i)).html()),l||this.set_text(t,a),r&&r.call(this,h,l)},this),keydown:function(e){var t=e.which;t===27&&(this.value=a),(t===27||t===13||t===37||t===38||t===39||t===40||t===32)&&e.stopImmediatePropagation();if(t===27||t===13)e.preventDefault(),this.blur()},click:function(e){e.stopImmediatePropagation()},mousedown:function(e){e.stopImmediatePropagation()},keyup:function(e){l.width(Math.min(f.text("pW"+this.value).width(),s))},keypress:function(e){if(e.which===13)return!1}}),c={fontFamily:o.css("fontFamily")||"",fontSize:o.css("fontSize")||"",fontWeight:o.css("fontWeight")||"",fontStyle:o.css("fontStyle")||"",fontStretch:o.css("fontStretch")||"",fontVariant:o.css("fontVariant")||"",letterSpacing:o.css("letterSpacing")||"",wordSpacing:o.css("wordSpacing")||""},u.attr("class",o.attr("class")).append(o.contents().clone()).append(l),o.replaceWith(u),f.css(c),l.css(c).width(Math.min(f.text("pW"+l[0].value).width(),s))[0].select()},set_theme:function(t,n){if(!t)return!1;if(n===!0){var r=this.settings.core.themes.dir;r||(r=e.jstree.path+"/themes"),n=r+"/"+t+"/style.css"}n&&e.inArray(n,o)===-1&&(e("head").append('<link rel="stylesheet" href="'+n+'" type="text/css" />'),o.push(n)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=t,this.element.addClass("jstree-"+t),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+t+"-responsive"),this.trigger("set_theme",{theme:t})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(e){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),this._data.core.themes.variant=e,e&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},set_icon:function(t,n){var r,i,s,o;if(e.isArray(t)){t=t.slice();for(r=0,i=t.length;r<i;r++)this.set_icon(t[r],n);return!0}return t=this.get_node(t),!t||t.id==="#"?!1:(o=t.icon,t.icon=n===!0||n===null||n===undefined||n===""?!0:n,s=this.get_node(t,!0).children(".jstree-anchor").children(".jstree-themeicon"),n===!1?this.hide_icon(t):n===!0||n===null||n===undefined||n===""?(s.removeClass("jstree-themeicon-custom "+o).css("background","").removeAttr("rel"),o===!1&&this.show_icon(t)):n.indexOf("/")===-1&&n.indexOf(".")===-1?(s.removeClass(o).css("background",""),s.addClass(n+" jstree-themeicon-custom").attr("rel",n),o===!1&&this.show_icon(t)):(s.removeClass(o).css("background",""),s.addClass("jstree-themeicon-custom").css("background","url('"+n+"') center center no-repeat").attr("rel",n),o===!1&&this.show_icon(t)),!0)},get_icon:function(e){return e=this.get_node(e),!e||e.id==="#"?!1:e.icon},hide_icon:function(t){var n,r;if(e.isArray(t)){t=t.slice();for(n=0,r=t.length;n<r;n++)this.hide_icon(t[n]);return!0}return t=this.get_node(t),!t||t==="#"?!1:(t.icon=!1,this.get_node(t,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0)},show_icon:function(t){var n,r,i;if(e.isArray(t)){t=t.slice();for(n=0,r=t.length;n<r;n++)this.show_icon(t[n]);return!0}return t=this.get_node(t),!t||t==="#"?!1:(i=this.get_node(t,!0),t.icon=i.length?i.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"):!0,t.icon||(t.icon=!0),i.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0)}},e.vakata={},e.vakata.attributes=function(t,n){t=e(t)[0];var r=n?{}:[];return t&&t.attributes&&e.each(t.attributes,function(t,i){if(e.inArray(i.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])!==-1)return;i.value!==null&&e.trim(i.value)!==""&&(n?r[i.name]=i.value:r.push(i.name))}),r},e.vakata.array_unique=function(e){var t=[],n,r,i,s={};for(n=0,i=e.length;n<i;n++)s[e[n]]===undefined&&(t.push(e[n]),s[e[n]]=!0);return t},e.vakata.array_remove=function(e,t,n){var r=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,r),e},e.vakata.array_remove_item=function(t,n){var r=e.inArray(n,t);return r!==-1?e.vakata.array_remove(t,r):t};var h=a.createElement("I");h.className="jstree-icon jstree-checkbox",h.setAttribute("role","presentation"),e.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0},e.jstree.plugins.checkbox=function(t,n){this.bind=function(){n.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",e.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")},this)).on("loading.jstree",e.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this)),this.settings.checkbox.cascade.indexOf("undetermined")!==-1&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",e.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)},this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",e.proxy(function(e,t){var n=this._model.data,r=n[t.parent],i=t.nodes,s,o;for(s=0,o=i.length;s<o;s++)n[i[s]].state.checked=n[i[s]].original&&n[i[s]].original.state&&n[i[s]].original.state.checked,n[i[s]].state.checked&&this._data.checkbox.selected.push(i[s])},this)),(this.settings.checkbox.cascade.indexOf("up")!==-1||this.settings.checkbox.cascade.indexOf("down")!==-1)&&this.element.on("model.jstree",e.proxy(function(t,n){var r=this._model.data,i=r[n.parent],s=n.nodes,o=[],u,a,f,l,c,h,p=this.settings.checkbox.cascade,d=this.settings.checkbox.tie_selection;if(p.indexOf("down")!==-1)if(i.state[d?"selected":"checked"]){for(a=0,f=s.length;a<f;a++)r[s[a]].state[d?"selected":"checked"]=!0;this._data[d?"core":"checkbox"].selected=this._data[d?"core":"checkbox"].selected.concat(s)}else for(a=0,f=s.length;a<f;a++)if(r[s[a]].state[d?"selected":"checked"]){for(l=0,c=r[s[a]].children_d.length;l<c;l++)r[r[s[a]].children_d[l]].state[d?"selected":"checked"]=!0;this._data[d?"core":"checkbox"].selected=this._data[d?"core":"checkbox"].selected.concat(r[s[a]].children_d)}if(p.indexOf("up")!==-1){for(a=0,f=i.children_d.length;a<f;a++)r[i.children_d[a]].children.length||o.push(r[i.children_d[a]].parent);o=e.vakata.array_unique(o);for(l=0,c=o.length;l<c;l++){i=r[o[l]];while(i&&i.id!=="#"){u=0;for(a=0,f=i.children.length;a<f;a++)u+=r[i.children[a]].state[d?"selected":"checked"];if(u!==f)break;i.state[d?"selected":"checked"]=!0,this._data[d?"core":"checkbox"].selected.push(i.id),h=this.get_node(i,!0),h&&h.length&&h.attr("aria-selected",!0).children(".jstree-anchor").addClass(d?"jstree-clicked":"jstree-checked"),i=this.get_node(i.parent)}}}this._data[d?"core":"checkbox"].selected=e.vakata.array_unique(this._data[d?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",e.proxy(function(t,n){var r=n.node,i=this._model.data,s=this.get_node(r.parent),o=this.get_node(r,!0),u,a,f,l,c=this.settings.checkbox.cascade,h=this.settings.checkbox.tie_selection;if(c.indexOf("down")!==-1){this._data[h?"core":"checkbox"].selected=e.vakata.array_unique(this._data[h?"core":"checkbox"].selected.concat(r.children_d));for(u=0,a=r.children_d.length;u<a;u++)l=i[r.children_d[u]],l.state[h?"selected":"checked"]=!0,l&&l.original&&l.original.state&&l.original.state.undetermined&&(l.original.state.undetermined=!1)}if(c.indexOf("up")!==-1)while(s&&s.id!=="#"){f=0;for(u=0,a=s.children.length;u<a;u++)f+=i[s.children[u]].state[h?"selected":"checked"];if(f!==a)break;s.state[h?"selected":"checked"]=!0,this._data[h?"core":"checkbox"].selected.push(s.id),l=this.get_node(s,!0),l&&l.length&&l.attr("aria-selected",!0).children(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked"),s=this.get_node(s.parent)}c.indexOf("down")!==-1&&o.length&&o.find(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",!0)},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",e.proxy(function(e,t){var n=this.get_node("#"),r=this._model.data,i,s,o;for(i=0,s=n.children_d.length;i<s;i++)o=r[n.children_d[i]],o&&o.original&&o.original.state&&o.original.state.undetermined&&(o.original.state.undetermined=!1)},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",e.proxy(function(t,n){var r=n.node,i=this.get_node(r,!0),s,o,u,a=this.settings.checkbox.cascade,f=this.settings.checkbox.tie_selection;r&&r.original&&r.original.state&&r.original.state.undetermined&&(r.original.state.undetermined=!1);if(a.indexOf("down")!==-1)for(s=0,o=r.children_d.length;s<o;s++)u=this._model.data[r.children_d[s]],u.state[f?"selected":"checked"]=!1,u&&u.original&&u.original.state&&u.original.state.undetermined&&(u.original.state.undetermined=!1);if(a.indexOf("up")!==-1)for(s=0,o=r.parents.length;s<o;s++)u=this._model.data[r.parents[s]],u.state[f?"selected":"checked"]=!1,u&&u.original&&u.original.state&&u.original.state.undetermined&&(u.original.state.undetermined=!1),u=this.get_node(r.parents[s],!0),u&&u.length&&u.attr("aria-selected",!1).children(".jstree-anchor").removeClass(f?"jstree-clicked":"jstree-checked");u=[];for(s=0,o=this._data[f?"core":"checkbox"].selected.length;s<o;s++)(a.indexOf("down")===-1||e.inArray(this._data[f?"core":"checkbox"].selected[s],r.children_d)===-1)&&(a.indexOf("up")===-1||e.inArray(this._data[f?"core":"checkbox"].selected[s],r.parents)===-1)&&u.push(this._data[f?"core":"checkbox"].selected[s]);this._data[f?"core":"checkbox"].selected=e.vakata.array_unique(u),a.indexOf("down")!==-1&&i.length&&i.find(".jstree-anchor").removeClass(f?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",!1)},this)),this.settings.checkbox.cascade.indexOf("up")!==-1&&this.element.on("delete_node.jstree",e.proxy(function(e,t){var n=this.get_node(t.parent),r=this._model.data,i,s,o,u,a=this.settings.checkbox.tie_selection;while(n&&n.id!=="#"){o=0;for(i=0,s=n.children.length;i<s;i++)o+=r[n.children[i]].state[a?"selected":"checked"];if(o!==s)break;n.state[a?"selected":"checked"]=!0,this._data[a?"core":"checkbox"].selected.push(n.id),u=this.get_node(n,!0),u&&u.length&&u.attr("aria-selected",!0).children(".jstree-anchor").addClass(a?"jstree-clicked":"jstree-checked"),n=this.get_node(n.parent)}},this)).on("move_node.jstree",e.proxy(function(t,n){var r=n.is_multi,i=n.old_parent,s=this.get_node(n.parent),o=this._model.data,u,a,f,l,c,h=this.settings.checkbox.tie_selection;if(!r){u=this.get_node(i);while(u&&u.id!=="#"){a=0;for(f=0,l=u.children.length;f<l;f++)a+=o[u.children[f]].state[h?"selected":"checked"];if(a!==l)break;u.state[h?"selected":"checked"]=!0,this._data[h?"core":"checkbox"].selected.push(u.id),c=this.get_node(u,!0),c&&c.length&&c.attr("aria-selected",!0).children(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked"),u=this.get_node(u.parent)}}u=s;while(u&&u.id!=="#"){a=0;for(f=0,l=u.children.length;f<l;f++)a+=o[u.children[f]].state[h?"selected":"checked"];if(a===l)u.state[h?"selected":"checked"]||(u.state[h?"selected":"checked"]=!0,this._data[h?"core":"checkbox"].selected.push(u.id),c=this.get_node(u,!0),c&&c.length&&c.attr("aria-selected",!0).children(".jstree-anchor").addClass(h?"jstree-clicked":"jstree-checked"));else{if(!u.state[h?"selected":"checked"])break;u.state[h?"selected":"checked"]=!1,this._data[h?"core":"checkbox"].selected=e.vakata.array_remove_item(this._data[h?"core":"checkbox"].selected,u.id),c=this.get_node(u,!0),c&&c.length&&c.attr("aria-selected",!1).children(".jstree-anchor").removeClass(h?"jstree-clicked":"jstree-checked")}u=this.get_node(u.parent)}},this))},this._undetermined=function(){if(this.element===null)return;var e,t,n,r,i={},s=this._model.data,o=this.settings.checkbox.tie_selection,u=this._data[o?"core":"checkbox"].selected,a=[],f=this;for(e=0,t=u.length;e<t;e++)if(s[u[e]]&&s[u[e]].parents)for(n=0,r=s[u[e]].parents.length;n<r;n++)i[s[u[e]].parents[n]]===undefined&&s[u[e]].parents[n]!=="#"&&(i[s[u[e]].parents[n]]=!0,a.push(s[u[e]].parents[n]));this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var o=f.get_node(this),u;if(!o.state.loaded){if(o.original&&o.original.state&&o.original.state.undetermined&&o.original.state.undetermined===!0){i[o.id]===undefined&&o.id!=="#"&&(i[o.id]=!0,a.push(o.id));for(n=0,r=o.parents.length;n<r;n++)i[o.parents[n]]===undefined&&o.parents[n]!=="#"&&(i[o.parents[n]]=!0,a.push(o.parents[n]))}}else for(e=0,t=o.children_d.length;e<t;e++){u=s[o.children_d[e]];if(!u.state.loaded&&u.original&&u.original.state&&u.original.state.undetermined&&u.original.state.undetermined===!0){i[u.id]===undefined&&u.id!=="#"&&(i[u.id]=!0,a.push(u.id));for(n=0,r=u.parents.length;n<r;n++)i[u.parents[n]]===undefined&&u.parents[n]!=="#"&&(i[u.parents[n]]=!0,a.push(u.parents[n]))}}}),this.element.find(".jstree-undetermined").removeClass("jstree-undetermined");for(e=0,t=a.length;e<t;e++)s[a[e]].state[o?"selected":"checked"]||(u=this.get_node(a[e],!0),u&&u.length&&u.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined"))},this.redraw_node=function(t,r,i,s){t=n.redraw_node.apply(this,arguments);if(t){var o,u,a=null;for(o=0,u=t.childNodes.length;o<u;o++)if(t.childNodes[o]&&t.childNodes[o].className&&t.childNodes[o].className.indexOf("jstree-anchor")!==-1){a=t.childNodes[o];break}a&&(!this.settings.checkbox.tie_selection&&this._model.data[t.id].state.checked&&(a.className+=" jstree-checked"),a.insertBefore(h.cloneNode(!1),a.childNodes[0]))}return!i&&this.settings.checkbox.cascade.indexOf("undetermined")!==-1&&(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(e.proxy(this._undetermined,this),50)),t},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(t){t=this.get_node(t);var n=this.settings.checkbox.cascade,r,i,s=this.settings.checkbox.tie_selection,o=this._data[s?"core":"checkbox"].selected,u=this._model.data;if(!t||t.state[s?"selected":"checked"]===!0||n.indexOf("undetermined")===-1||n.indexOf("down")===-1&&n.indexOf("up")===-1)return!1;if(!t.state.loaded&&t.original.state.undetermined===!0)return!0;for(r=0,i=t.children_d.length;r<i;r++)if(e.inArray(t.children_d[r],o)!==-1||!u[t.children_d[r]].state.loaded&&u[t.children_d[r]].original.state.undetermined)return!0;return!1},this.activate_node=function(t,r){this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||e(r.target).hasClass("jstree-checkbox"))&&(r.ctrlKey=!0);if(this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!e(r.target).hasClass("jstree-checkbox"))return n.activate_node.call(this,t,r);if(this.is_disabled(t))return!1;this.is_checked(t)?this.uncheck_node(t,r):this.check_node(t,r),this.trigger("activate_node",{node:this.get_node(t)})},this.check_node=function(t,n){if(this.settings.checkbox.tie_selection)return this.select_node(t,!1,!0,n);var r,i,s,o;if(e.isArray(t)){t=t.slice();for(i=0,s=t.length;i<s;i++)this.check_node(t[i],n);return!0}t=this.get_node(t);if(!t||t.id==="#")return!1;r=this.get_node(t,!0),t.state.checked||(t.state.checked=!0,this._data.checkbox.selected.push(t.id),r&&r.length&&r.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:t,selected:this._data.checkbox.selected,event:n}))},this.uncheck_node=function(t,n){if(this.settings.checkbox.tie_selection)return this.deselect_node(t,!1,n);var r,i,s;if(e.isArray(t)){t=t.slice();for(r=0,i=t.length;r<i;r++)this.uncheck_node(t[r],n);return!0}t=this.get_node(t);if(!t||t.id==="#")return!1;s=this.get_node(t,!0),t.state.checked&&(t.state.checked=!1,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,t.id),s.length&&s.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:t,selected:this._data.checkbox.selected,event:n}))},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var e=this._data.checkbox.selected.concat([]),t,n;this._data.checkbox.selected=this._model.data["#"].children_d.concat();for(t=0,n=this._data.checkbox.selected.length;t<n;t++)this._model.data[this._data.checkbox.selected[t]]&&(this._model.data[this._data.checkbox.selected[t]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();var e=this._data.checkbox.selected.concat([]),t,n;for(t=0,n=this._data.checkbox.selected.length;t<n;t++)this._model.data[this._data.checkbox.selected[t]]&&(this._model.data[this._data.checkbox.selected[t]].state.checked=!1);this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:e})},this.is_checked=function(e){return this.settings.checkbox.tie_selection?this.is_selected(e):(e=this.get_node(e),!e||e.id==="#"?!1:e.state.checked)},this.get_checked=function(t){return this.settings.checkbox.tie_selection?this.get_selected(t):t?e.map(this._data.checkbox.selected,e.proxy(function(e){return this.get_node(e)},this)):this._data.checkbox.selected},this.get_top_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_top_selected(t);var n=this.get_checked(!0),r={},i,s,o,u;for(i=0,s=n.length;i<s;i++)r[n[i].id]=n[i];for(i=0,s=n.length;i<s;i++)for(o=0,u=n[i].children_d.length;o<u;o++)r[n[i].children_d[o]]&&delete r[n[i].children_d[o]];n=[];for(i in r)r.hasOwnProperty(i)&&n.push(i);return t?e.map(n,e.proxy(function(e){return this.get_node(e)},this)):n},this.get_bottom_checked=function(t){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(t);var n=this.get_checked(!0),r=[],i,s;for(i=0,s=n.length;i<s;i++)n[i].children.length||r.push(n[i].id);return t?e.map(r,e.proxy(function(e){return this.get_node(e)},this)):r},this.load_node=function(t,r){var i,s,o,u,a,f;if(!e.isArray(t)&&!this.settings.checkbox.tie_selection){f=this.get_node(t);if(f&&f.state.loaded)for(i=0,s=f.children_d.length;i<s;i++)this._model.data[f.children_d[i]].state.checked&&(a=!0,this._data.checkbox.selected=e.vakata.array_remove_item(this._data.checkbox.selected,f.children_d[i]))}return n.load_node.apply(this,arguments)},this.get_state=function(){var e=n.get_state.apply(this,arguments);return this.settings.checkbox.tie_selection?e:(e.checkbox=this._data.checkbox.selected.slice(),e)},this.set_state=function(t,r){var i=n.set_state.apply(this,arguments);if(i&&t.checkbox){if(!this.settings.checkbox.tie_selection){this.uncheck_all();var s=this;e.each(t.checkbox,function(e,t){s.check_node(t)})}return delete t.checkbox,this.set_state(t,r),!1}return i}};var p=a.createElement("DIV");p.setAttribute("unselectable","on"),p.setAttribute("role","presentation"),p.className="jstree-wholerow",p.innerHTML="&#160;",e.jstree.plugins.wholerow=function(t,n){this.bind=function(){n.bind.call(this),this.element.on("ready.jstree set_state.jstree",e.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",e.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",e.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",e.proxy(function(e,t){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var n=!1,r,i;for(r=0,i=t.selected.length;r<i;r++)n=this.get_node(t.selected[r],!0),n&&n.length&&n.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("open_node.jstree",e.proxy(function(e,t){this.get_node(t.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",e.proxy(function(e,t){if(e.type==="hover_node"&&this.is_disabled(t.node))return;this.get_node(t.node,!0).children(".jstree-wholerow")[e.type==="hover_node"?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",e.proxy(function(t){t.preventDefault();var n=e.Event("contextmenu",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,pageX:t.pageX,pageY:t.pageY});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n)},this)).on("click.jstree",".jstree-wholerow",function(t){t.stopImmediatePropagation();var n=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",e.proxy(function(t){t.stopImmediatePropagation();var n=e.Event("click",{metaKey:t.metaKey,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey});e(t.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(n).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",e.proxy(function(e){return e.stopImmediatePropagation(),this.is_disabled(e.currentTarget)||this.hover_node(e.currentTarget),!1},this)).on("mouseleave.jstree",".jstree-node",e.proxy(function(e){this.dehover_node(e.currentTarget)},this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),n.teardown.call(this)},this.redraw_node=function(t,r,i,s){t=n.redraw_node.apply(this,arguments);if(t){var o=p.cloneNode(!0);e.inArray(t.id,this._data.core.selected)!==-1&&(o.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===t.id&&(o.className+=" jstree-wholerow-hovered"),t.insertBefore(o,t.childNodes[0])}return t}};if(a.registerElement&&Object&&Object.create){var d=Object.create(HTMLElement.prototype);d.createdCallback=function(){var t={core:{},plugins:[]},n;for(n in e.jstree.plugins)e.jstree.plugins.hasOwnProperty(n)&&this.attributes[n]&&(t.plugins.push(n),this.getAttribute(n)&&JSON.parse(this.getAttribute(n))&&(t[n]=JSON.parse(this.getAttribute(n))));for(n in e.jstree.defaults.core)e.jstree.defaults.core.hasOwnProperty(n)&&this.attributes[n]&&(t.core[n]=JSON.parse(this.getAttribute(n))||this.getAttribute(n));e(this).jstree(t)};try{a.registerElement("vakata-jstree",{prototype:d})}catch(v){}}return e.jstree}),r("ui/Tree",["require","dep/jquery.jstree"],function(t){function r(e,t){this.instance=n.create(e,t)}function i(e){return e.nodeType===1&&e.tagName.toLowerCase()==="div"}var n=t("dep/jquery.jstree");r.prototype={ins:function(){return this.instance},destroy:function(){this.instance.destroy()}};var s="bizTree";return e.extend(e.fn,{bizTree:function(t,n){var o;switch(t){case"ins":return this.data(s).ins();case"destroy":this.each(function(){o=e(this).data(s),o&&(o.destroy(),e(this).data(s,null))});break;default:this.each(function(){!e(this).data(s)&&i(this)&&e(this).data(s,new r(this,t))})}return this}}),r}),r("dep/jquery.datepicker",["require"],function(t){function n(){return new Date(Date.UTC.apply(Date,arguments))}function r(){var e=new Date;return n(e.getFullYear(),e.getMonth(),e.getDate())}function i(e,t){return e.getUTCFullYear()===t.getUTCFullYear()&&e.getUTCMonth()===t.getUTCMonth()&&e.getUTCDate()===t.getUTCDate()}function s(e){return function(){return this[e].apply(this,arguments)}}function f(t,n){function u(e,t){return t.toLowerCase()}var r=e(t).data(),i={},s,o=new RegExp("^"+n.toLowerCase()+"([A-Z])");n=new RegExp("^"+n.toLowerCase());for(var a in r)n.test(a)&&(s=a.replace(o,u),i[s]=r[a]);return i}function l(t){var n={};if(!v[t]){t=t.split("-")[0];if(!v[t])return}var r=v[t];return e.each(d,function(e,t){t in r&&(n[t]=r[t])}),n}var o=function(){var t={get:function(e){return this.slice(e)[0]},contains:function(e){var t=e&&e.valueOf();for(var n=0,r=this.length;n<r;n++)if(this[n].valueOf()===t)return n;return-1},remove:function(e){this.splice(e,1)},replace:function(t){if(!t)return;e.isArray(t)||(t=[t]),this.clear(),this.push.apply(this,t)},clear:function(){this.length=0},copy:function(){var e=new o;return e.replace(this),e}};return function(){var n=[];return n.push.apply(n,arguments),e.extend(n,t),n}}(),u=function(t,n){this._process_options(n),this.dates=new o,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=e(t),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.hasClass("date")?this.element.find(".add-on, .input-group-addon, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&this.component.length===0&&(this.component=!1),this.picker=e(m.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot .today, tfoot .clear").attr("colspan",function(e,t){return parseInt(t)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.setDatesDisabled(this.o.datesDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};u.prototype={constructor:u,_process_options:function(t){this._o=e.extend({},this._o,t);var i=this.o=e.extend({},this._o),s=i.language;v[s]||(s=s.split("-")[0],v[s]||(s=p.language)),i.language=s;switch(i.startView){case 2:case"decade":i.startView=2;break;case 1:case"year":i.startView=1;break;default:i.startView=0}switch(i.minViewMode){case 1:case"months":i.minViewMode=1;break;case 2:case"years":i.minViewMode=2;break;default:i.minViewMode=0}i.startView=Math.max(i.startView,i.minViewMode),i.multidate!==!0&&(i.multidate=Number(i.multidate)||!1,i.multidate!==!1&&(i.multidate=Math.max(0,i.multidate))),i.multidateSeparator=String(i.multidateSeparator),i.weekStart%=7,i.weekEnd=(i.weekStart+6)%7;var o=m.parseFormat(i.format);i.startDate!==-Infinity&&(i.startDate?i.startDate instanceof Date?i.startDate=this._local_to_utc(this._zero_time(i.startDate)):i.startDate=m.parseDate(i.startDate,o,i.language):i.startDate=-Infinity),i.endDate!==Infinity&&(i.endDate?i.endDate instanceof Date?i.endDate=this._local_to_utc(this._zero_time(i.endDate)):i.endDate=m.parseDate(i.endDate,o,i.language):i.endDate=Infinity),i.daysOfWeekDisabled=i.daysOfWeekDisabled||[],e.isArray(i.daysOfWeekDisabled)||(i.daysOfWeekDisabled=i.daysOfWeekDisabled.split(/[,\s]*/)),i.daysOfWeekDisabled=e.map(i.daysOfWeekDisabled,function(e){return parseInt(e,10)}),i.datesDisabled=i.datesDisabled||[];if(!e.isArray(i.datesDisabled)){var u=[];u.push(m.parseDate(i.datesDisabled,o,i.language)),i.datesDisabled=u}i.datesDisabled=e.map(i.datesDisabled,function(e){return m.parseDate(e,o,i.language)});var a=String(i.orientation).toLowerCase().split(/\s+/g),f=i.orientation.toLowerCase();a=e.grep(a,function(e){return/^auto|left|right|top|bottom$/.test(e)}),i.orientation={x:"auto",y:"auto"};if(!!f&&f!=="auto")if(a.length===1)switch(a[0]){case"top":case"bottom":i.orientation.y=a[0];break;case"left":case"right":i.orientation.x=a[0]}else f=e.grep(a,function(e){return/^left|right$/.test(e)}),i.orientation.x=f[0]||"auto",f=e.grep(a,function(e){return/^top|bottom$/.test(e)}),i.orientation.y=f[0]||"auto";if(i.defaultViewDate){var l=i.defaultViewDate.year||(new Date).getFullYear(),c=i.defaultViewDate.month||0,h=i.defaultViewDate.day||1;i.defaultViewDate=n(l,c,h)}else i.defaultViewDate=r();i.showOnFocus=i.showOnFocus!==undefined?i.showOnFocus:!0},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var t=0,n,r,i;t<e.length;t++)n=e[t][0],e[t].length===2?(r=undefined,i=e[t][1]):e[t].length===3&&(r=e[t][1],i=e[t][2]),n.on(i,r)},_unapplyEvents:function(e){for(var t=0,n,r,i;t<e.length;t++)n=e[t][0],e[t].length===2?(i=undefined,r=e[t][1]):e[t].length===3&&(i=e[t][1],r=e[t][2]),n.off(r,i)},_buildEvents:function(){var t={keyup:e.proxy(function(t){e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:e.proxy(this.keydown,this)};this.o.showOnFocus===!0&&(t.focus=e.proxy(this.show,this)),this.isInput?this._events=[[this.element,t]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),t],[this.component,{click:e.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:e.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:e.proxy(function(e){this._focused_from=e.target},this)}],[this.element,{blur:e.proxy(function(e){this._focused_from=e.target},this)}]),this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{"mousedown touchstart":e.proxy(function(e){this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,n){var r=n||this.dates.get(-1),i=this._utc_to_local(r);this.element.trigger({type:t,date:i,dates:e.map(this.dates,this._utc_to_local),format:e.proxy(function(e,t){arguments.length===0?(e=this.dates.length-1,t=this.o.format):typeof e=="string"&&(t=e,e=this.dates.length-1),t=t||this.o.format;var n=this.dates.get(e);return m.formatDate(n,t,this.o.language)},this)})},show:function(){if(this.element.attr("readonly")&&this.o.enableOnReadonly===!1)return;return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&e(this.element).blur(),this},hide:function(){return this.isInline?this:this.picker.is(":visible")?(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"),this):this},remove:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},_utc_to_local:function(e){return e&&new Date(e.getTime()+e.getTimezoneOffset()*6e4)},_local_to_utc:function(e){return e&&new Date(e.getTime()-e.getTimezoneOffset()*6e4)},_zero_time:function(e){return e&&new Date(e.getFullYear(),e.getMonth(),e.getDate())},_zero_utc_time:function(e){return e&&new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()))},getDates:function(){return e.map(this.dates,this._utc_to_local)},getUTCDates:function(){return e.map(this.dates,function(e){return new Date(e)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var e=this.dates.get(-1);return typeof e!="undefined"?new Date(e):null},clearDates:function(){var e;this.isInput?e=this.element:this.component&&(e=this.element.find("input")),e&&e.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,t),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,e.map(t,this._utc_to_local)),this._trigger("changeDate"),this.setValue(),this},setDate:s("setDates"),setUTCDate:s("setUTCDates"),setValue:function(){var e=this.getFormattedDate();return this.isInput?this.element.val(e).change():this.component&&this.element.find("input").val(e).change(),this},getFormattedDate:function(t){t===undefined&&(t=this.o.format);var n=this.o.language;return e.map(this.dates,function(e){return m.formatDate(e,t,n)}).join(this.o.multidateSeparator)},setStartDate:function(e){return this._process_options({startDate:e}),this.update(),this.updateNavArrows(),this},setEndDate:function(e){return this._process_options({endDate:e}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(e){return this._process_options({daysOfWeekDisabled:e}),this.update(),this.updateNavArrows(),this},setDatesDisabled:function(e){this._process_options({datesDisabled:e}),this.update(),this.updateNavArrows()},place:function(){if(this.isInline)return this;var t=this.picker.outerWidth(),n=this.picker.outerHeight(),r=10,i=e(this.o.container).width(),s=e(this.o.container).height(),o=e(this.o.container).scrollTop(),u=e(this.o.container).offset(),a=[];this.element.parents().each(function(){var t=e(this).css("z-index");t!=="auto"&&t!==0&&a.push(parseInt(t))});var f=Math.max.apply(Math,a)+10,l=this.component?this.component.parent().offset():this.element.offset(),c=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),h=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),p=l.left-u.left,d=l.top-u.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),this.o.orientation.x!=="auto"?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),this.o.orientation.x==="right"&&(p-=t-h)):l.left<0?(this.picker.addClass("datepicker-orient-left"),p-=l.left-r):p+t>i?(this.picker.addClass("datepicker-orient-right"),p=l.left+h-t):this.picker.addClass("datepicker-orient-left");var v=this.o.orientation.y,m,g;v==="auto"&&(m=-o+d-n,g=o+s-(d+c+n),Math.max(m,g)===g?v="top":v="bottom"),this.picker.addClass("datepicker-orient-"+v),v==="top"?d+=c:d-=n+parseInt(this.picker.css("padding-top"));if(this.o.rtl){var y=i-(p+h);this.picker.css({top:d,right:y,zIndex:f})}else this.picker.css({top:d,left:p,zIndex:f});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var t=this.dates.copy(),n=[],r=!1;return arguments.length?(e.each(arguments,e.proxy(function(e,t){t instanceof Date&&(t=this._local_to_utc(t)),n.push(t)},this)),r=!0):(n=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),n&&this.o.multidate?n=n.split(this.o.multidateSeparator):n=[n],delete this.element.data().date),n=e.map(n,e.proxy(function(e){return m.parseDate(e,this.o.format,this.o.language)},this)),n=e.grep(n,e.proxy(function(e){return e<this.o.startDate||e>this.o.endDate||!e},this),!0),this.dates.replace(n),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),r?this.setValue():n.length&&String(t)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&t.length&&this._trigger("clearDate"),this.fill(),this},fillDow:function(){var e=this.o.weekStart,t="<tr>";if(this.o.calendarWeeks){this.picker.find(".datepicker-days thead tr:first-child .datepicker-switch").attr("colspan",function(e,t){return parseInt(t)+1});var n='<th class="cw">&#160;</th>';t+=n}while(e<this.o.weekStart+7)t+='<th class="dow">'+v[this.o.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datepicker-days thead").append(t)},fillMonths:function(){var e="",t=0;while(t<12)e+='<span class="month">'+v[this.o.language].monthsShort[t++]+"</span>";this.picker.find(".datepicker-months td").html(e)},setRange:function(t){!t||!t.length?delete this.range:this.range=e.map(t,function(e){return e.valueOf()}),this.fill()},getClassNames:function(t){var n=[],r=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),o=new Date;return t.getUTCFullYear()<r||t.getUTCFullYear()===r&&t.getUTCMonth()<s?n.push("old"):(t.getUTCFullYear()>r||t.getUTCFullYear()===r&&t.getUTCMonth()>s)&&n.push("new"),this.focusDate&&t.valueOf()===this.focusDate.valueOf()&&n.push("focused"),this.o.todayHighlight&&t.getUTCFullYear()===o.getFullYear()&&t.getUTCMonth()===o.getMonth()&&t.getUTCDate()===o.getDate()&&n.push("today"),this.dates.contains(t)!==-1&&n.push("active"),(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||e.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)!==-1)&&n.push("disabled"),this.o.datesDisabled.length>0&&e.grep(this.o.datesDisabled,function(e){return i(t,e)}).length>0&&n.push("disabled","disabled-date"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&n.push("range"),e.inArray(t.valueOf(),this.range)!==-1&&n.push("selected")),n},fill:function(){var t=new Date(this.viewDate),r=t.getUTCFullYear(),i=t.getUTCMonth(),s=this.o.startDate!==-Infinity?this.o.startDate.getUTCFullYear():-Infinity,o=this.o.startDate!==-Infinity?this.o.startDate.getUTCMonth():-Infinity,u=this.o.endDate!==Infinity?this.o.endDate.getUTCFullYear():Infinity,a=this.o.endDate!==Infinity?this.o.endDate.getUTCMonth():Infinity,f=v[this.o.language].today||v.en.today||"",l=v[this.o.language].clear||v.en.clear||"",c;if(isNaN(r)||isNaN(i))return;this.picker.find(".datepicker-days thead .datepicker-switch").text(v[this.o.language].months[i]+" "+r),this.picker.find("tfoot .today").text(f).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot .clear").text(l).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var h=n(r,i-1,28),p=m.getDaysInMonth(h.getUTCFullYear(),h.getUTCMonth());h.setUTCDate(p),h.setUTCDate(p-(h.getUTCDay()-this.o.weekStart+7)%7);var d=new Date(h);d.setUTCDate(d.getUTCDate()+42),d=d.valueOf();var g=[],y;while(h.valueOf()<d){if(h.getUTCDay()===this.o.weekStart){g.push("<tr>");if(this.o.calendarWeeks){var b=new Date(+h+(this.o.weekStart-h.getUTCDay()-7)%7*864e5),w=new Date(Number(b)+(11-b.getUTCDay())%7*864e5),E=new Date(Number(E=n(w.getUTCFullYear(),0,1))+(11-E.getUTCDay())%7*864e5),S=(w-E)/864e5/7+1;g.push('<td class="cw">'+S+"</td>")}}y=this.getClassNames(h),y.push("day");if(this.o.beforeShowDay!==e.noop){var x=this.o.beforeShowDay(this._utc_to_local(h));x===undefined?x={}:typeof x=="boolean"?x={enabled:x}:typeof x=="string"&&(x={classes:x}),x.enabled===!1&&y.push("disabled"),x.classes&&(y=y.concat(x.classes.split(/\s+/))),x.tooltip&&(c=x.tooltip)}y=e.unique(y),g.push('<td class="'+y.join(" ")+'"'+(c?' title="'+c+'"':"")+">"+h.getUTCDate()+"</td>"),c=null,h.getUTCDay()===this.o.weekEnd&&g.push("</tr>"),h.setUTCDate(h.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(g.join(""));var T=this.picker.find(".datepicker-months").find("th:eq(1)").text(r).end().find("span").removeClass("active");e.each(this.dates,function(e,t){t.getUTCFullYear()===r&&T.eq(t.getUTCMonth()).addClass("active")}),(r<s||r>u)&&T.addClass("disabled"),r===s&&T.slice(0,o).addClass("disabled"),r===u&&T.slice(a+1).addClass("disabled");if(this.o.beforeShowMonth!==e.noop){var N=this;e.each(T,function(t,n){if(!e(n).hasClass("disabled")){var i=new Date(r,t,1),s=N.o.beforeShowMonth(i);s===!1&&e(n).addClass("disabled")}})}g="",r=parseInt(r/10,10)*10;var C=this.picker.find(".datepicker-years").find("th:eq(1)").text(r+"-"+(r+9)).end().find("td");r-=1;var k=e.map(this.dates,function(e){return e.getUTCFullYear()}),L;for(var A=-1;A<11;A++)L=["year"],A===-1?L.push("old"):A===10&&L.push("new"),e.inArray(r,k)!==-1&&L.push("active"),(r<s||r>u)&&L.push("disabled"),g+='<span class="'+L.join(" ")+'">'+r+"</span>",r+=1;C.html(g)},updateNavArrows:function(){if(!this._allow_update)return;var e=new Date(this.viewDate),t=e.getUTCFullYear(),n=e.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-Infinity&&t<=this.o.startDate.getUTCFullYear()&&n<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==Infinity&&t>=this.o.endDate.getUTCFullYear()&&n>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-Infinity&&t<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==Infinity&&t>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},click:function(t){t.preventDefault();var r=e(t.target).closest("span, td, th"),i,s,o;if(r.length===1)switch(r[0].nodeName.toLowerCase()){case"th":switch(r[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var u=m.modes[this.viewMode].navStep*(r[0].className==="prev"?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,u),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,u),this.viewMode===1&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var a=new Date;a=n(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0),this.showMode(-2);var f=this.o.todayBtn==="linked"?null:"view";this._setDate(a,f);break;case"clear":this.clearDates()}break;case"span":r.hasClass("disabled")||(this.viewDate.setUTCDate(1),r.hasClass("month")?(o=1,s=r.parent().find("span").index(r),i=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(s),this._trigger("changeMonth",this.viewDate),this.o.minViewMode===1&&this._setDate(n(i,s,o))):(o=1,s=0,i=parseInt(r.text(),10)||0,this.viewDate.setUTCFullYear(i),this._trigger("changeYear",this.viewDate),this.o.minViewMode===2&&this._setDate(n(i,s,o))),this.showMode(-1),this.fill());break;case"td":r.hasClass("day")&&!r.hasClass("disabled")&&(o=parseInt(r.text(),10)||1,i=this.viewDate.getUTCFullYear(),s=this.viewDate.getUTCMonth(),r.hasClass("old")?s===0?(s=11,i-=1):s-=1:r.hasClass("new")&&(s===11?(s=0,i+=1):s+=1),this._setDate(n(i,s,o)))}this.picker.is(":visible")&&this._focused_from&&e(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(e){var t=this.dates.contains(e);e||this.dates.clear(),t!==-1?(this.o.multidate===!0||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(t):this.o.multidate===!1?(this.dates.clear(),this.dates.push(e)):this.dates.push(e);if(typeof this.o.multidate=="number")while(this.dates.length>this.o.multidate)this.dates.remove(0)},_setDate:function(e,t){(!t||t==="date")&&this._toggle_multidate(e&&new Date(e));if(!t||t==="view")this.viewDate=e&&new Date(e);this.fill(),this.setValue(),(!t||t!=="view")&&this._trigger("changeDate");var n;this.isInput?n=this.element:this.component&&(n=this.element.find("input")),n&&n.change(),this.o.autoclose&&(!t||t==="date")&&this.hide()},moveMonth:function(e,t){if(!e)return undefined;if(!t)return e;var n=new Date(e.valueOf()),r=n.getUTCDate(),i=n.getUTCMonth(),s=Math.abs(t),o,u;t=t>0?1:-1;if(s===1){u=t===-1?function(){return n.getUTCMonth()===i}:function(){return n.getUTCMonth()!==o},o=i+t,n.setUTCMonth(o);if(o<0||o>11)o=(o+12)%12}else{for(var a=0;a<s;a++)n=this.moveMonth(n,t);o=n.getUTCMonth(),n.setUTCDate(r),u=function(){return o!==n.getUTCMonth()}}while(u())n.setUTCDate(--r),n.setUTCMonth(o);return n},moveYear:function(e,t){return this.moveMonth(e,t*12)},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(!this.picker.is(":visible")){e.keyCode===27&&this.show();return}var t=!1,n,i,s,o=this.focusDate||this.viewDate;switch(e.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),e.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;n=e.keyCode===37?-1:1,e.ctrlKey?(i=this.moveYear(this.dates.get(-1)||r(),n),s=this.moveYear(o,n),this._trigger("changeYear",this.viewDate)):e.shiftKey?(i=this.moveMonth(this.dates.get(-1)||r(),n),s=this.moveMonth(o,n),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.dates.get(-1)||r()),i.setUTCDate(i.getUTCDate()+n),s=new Date(o),s.setUTCDate(o.getUTCDate()+n)),this.dateWithinRange(s)&&(this.focusDate=this.viewDate=s,this.setValue(),this.fill(),e.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;n=e.keyCode===38?-1:1,e.ctrlKey?(i=this.moveYear(this.dates.get(-1)||r(),n),s=this.moveYear(o,n),this._trigger("changeYear",this.viewDate)):e.shiftKey?(i=this.moveMonth(this.dates.get(-1)||r(),n),s=this.moveMonth(o,n),this._trigger("changeMonth",this.viewDate)):(i=new Date(this.dates.get(-1)||r()),i.setUTCDate(i.getUTCDate()+n*7),s=new Date(o),s.setUTCDate(o.getUTCDate()+n*7)),this.dateWithinRange(s)&&(this.focusDate=this.viewDate=s,this.setValue(),this.fill(),e.preventDefault());break;case 32:break;case 13:o=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(o),t=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(e.preventDefault(),typeof e.stopPropagation=="function"?e.stopPropagation():e.cancelBubble=!0,this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(t){this.dates.length?this._trigger("changeDate"):this._trigger("clearDate");var u;this.isInput?u=this.element:this.component&&(u=this.element.find("input")),u&&u.change()}},showMode:function(e){e&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+e))),this.picker.children("div").hide().filter(".datepicker-"+m.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var a=function(t,n){this.element=e(t),this.inputs=e.map(n.inputs,function(e){return e.jquery?e[0]:e}),delete n.inputs,h.call(e(this.inputs),n).bind("changeDate",e.proxy(this.dateUpdated,this)),this.pickers=e.map(this.inputs,function(t){return e(t).data("datepicker")}),this.updateDates()};a.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(e){return e.getUTCDate()}),this.updateRanges()},updateRanges:function(){var t=e.map(this.dates,function(e){return e.valueOf()});e.each(this.pickers,function(e,n){n.setRange(t)})},dateUpdated:function(t){if(this.updating)return;this.updating=!0;var n=e(t.target).data("datepicker"),r=n.getUTCDate(),i=e.inArray(t.target,this.inputs),s=i-1,o=i+1,u=this.inputs.length;if(i===-1)return;e.each(this.pickers,function(e,t){t.getUTCDate()||t.setUTCDate(r)});if(r<this.dates[s])while(s>=0&&r<this.dates[s])this.pickers[s--].setUTCDate(r);else if(r>this.dates[o])while(o<u&&r>this.dates[o])this.pickers[o++].setUTCDate(r);this.updateDates(),delete this.updating},remove:function(){e.map(this.pickers,function(e){e.remove()}),delete this.element.data().datepicker}};var c=e.fn.datepicker,h=function(t){var n=Array.apply(null,arguments);n.shift();var r;return this.each(function(){var i=e(this),s=i.data("datepicker"),o=typeof t=="object"&&t;if(!s){var c=f(this,"date"),h=e.extend({},p,c,o),d=l(h.language),v=e.extend({},p,d,c,o);if(i.hasClass("biz-range")||v.inputs){var m={inputs:v.inputs||i.find("input").toArray()};i.data("datepicker",s=new a(this,e.extend(v,m)))}else i.data("datepicker",s=new u(this,v))}if(typeof t=="string"&&typeof s[t]=="function"){r=s[t].apply(s,n);if(r!==undefined)return!1}}),r!==undefined?r:this};e.fn.datepicker=h;var p=e.fn.datepicker.defaults={autoclose:!1,beforeShowDay:e.noop,beforeShowMonth:e.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],datesDisabled:[],endDate:Infinity,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-Infinity,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,container:"body"},d=e.fn.datepicker.locale_opts=["format","rtl","weekStart"];e.fn.datepicker.Constructor=u;var v=e.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},m={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,m.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(e){var t=e.replace(this.validParts,"\0").split("\0"),n=e.match(this.validParts);if(!t||!t.length||!n||n.length===0)throw new Error("Invalid date format.");return{separators:t,parts:n}},parseDate:function(t,r,i){function b(){var e=this.slice(0,o[l].length),t=o[l].slice(0,e.length);return e.toLowerCase()===t.toLowerCase()}if(!t)return undefined;if(t instanceof Date)return t;typeof r=="string"&&(r=m.parseFormat(r));var s=/([\-+]\d+)([dmwy])/,o=t.match(/([\-+]\d+)([dmwy])/g),a,f,l;if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(t)){t=new Date;for(l=0;l<o.length;l++){a=s.exec(o[l]),f=parseInt(a[1]);switch(a[2]){case"d":t.setUTCDate(t.getUTCDate()+f);break;case"m":t=u.prototype.moveMonth.call(u.prototype,t,f);break;case"w":t.setUTCDate(t.getUTCDate()+f*7);break;case"y":t=u.prototype.moveYear.call(u.prototype,t,f)}}return n(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),0,0,0)}o=t&&t.match(this.nonpunctuation)||[],t=new Date;var c={},h=["yyyy","yy","M","MM","m","mm","d","dd"],p={yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){if(isNaN(e))return e;t-=1;while(t<0)t+=12;t%=12,e.setUTCMonth(t);while(e.getUTCMonth()!==t)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}},d,g;p.M=p.MM=p.mm=p.m,p.dd=p.d,t=n(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0);var y=r.parts.slice();o.length!==y.length&&(y=e(y).filter(function(t,n){return e.inArray(n,h)!==-1}).toArray());if(o.length===y.length){var w;for(l=0,w=y.length;l<w;l++){d=parseInt(o[l],10),a=y[l];if(isNaN(d))switch(a){case"MM":g=e(v[i].months).filter(b),d=e.inArray(g[0],v[i].months)+1;break;case"M":g=e(v[i].monthsShort).filter(b),d=e.inArray(g[0],v[i].monthsShort)+1}c[a]=d}var E,S;for(l=0;l<h.length;l++)S=h[l],S in c&&!isNaN(c[S])&&(E=new Date(t),p[S](E,c[S]),isNaN(E)||(t=E))}return t},formatDate:function(t,n,r){if(!t)return"";typeof n=="string"&&(n=m.parseFormat(n));var i={d:t.getUTCDate(),D:v[r].daysShort[t.getUTCDay()],DD:v[r].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:v[r].monthsShort[t.getUTCMonth()],MM:v[r].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};i.dd=(i.d<10?"0":"")+i.d,i.mm=(i.m<10?"0":"")+i.m,t=[];var s=e.extend([],n.separators);for(var o=0,u=n.parts.length;o<=u;o++)s.length&&t.push(s.shift()),t.push(i[n.parts[o]]);return t.join("")},headTemplate:'<thead><tr><th class="prev">◀</th><th colspan="5" class="datepicker-switch"></th><th class="next">▶</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};return m.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+m.headTemplate+"<tbody></tbody>"+m.footTemplate+"</table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+m.headTemplate+m.contTemplate+m.footTemplate+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+m.headTemplate+m.contTemplate+m.footTemplate+"</table>"+"</div>"+"</div>",e.fn.datepicker.DPGlobal=m,e.fn.datepicker.noConflict=function(){return e.fn.datepicker=c,this},e.fn.datepicker.version="1.4.0",e.fn.datepicker.dates["zh-CN"]={days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六","星期日"],daysShort:["周日","周一","周二","周三","周四","周五","周六","周日"],daysMin:["日","一","二","三","四","五","六","日"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],today:"今日",clear:"清空",weekStart:1,format:"yyyy年mm月dd日"},e.fn.datepicker.dates.en={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",weekStart:1,format:"dd/mm/yyyy"},e(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var n=e(this);if(n.data("datepicker"))return;t.preventDefault(),h.call(n,"show")}),e(function(){h.call(e('[data-provide="datepicker-inline"]'))}),h}),r("ui/Calendar",["require","dep/jquery.datepicker","ui/Input"],function(t){function i(t,i){o(t)?(this.date=new r(e(t)),e(this.date.main).addClass(s).attr("maxlength",10)):(this.range=e(t).find(":text"),this.startDate=new r(this.range[0]),e(this.startDate.main).addClass(s).attr("maxlength",10),this.endDate=new r(this.range[1]),e(this.endDate.main).addClass(s).attr("maxlength",10)),i=e.extend({},i||{}),this.instance=n.call(e(t),{autoclose:!0,format:"yyyy-mm-dd",language:i.language||"zh-CN",orientation:"top left",weekStart:1,todayHighlight:i.todayHighlight,todayBtn:i.todayBtn,startDate:i.startDate,endDate:i.endDate});var u=this;i.onChange&&this.instance.on("changeDate",function(e){i.onChange.call(u,e)})}function o(e){return e.nodeType===1&&e.tagName.toLowerCase()==="input"&&e.getAttribute("type").toLowerCase()==="text"}var n=t("dep/jquery.datepicker"),r=t("ui/Input"),s="biz-calendar";i.prototype={getDate:function(){return this.range?[e(this.range[0]).datepicker("getDate"),e(this.range[1]).datepicker("getDate")]:this.instance.datepicker("getDate")},setDate:function(t){this.range?(e(this.range[0]).datepicker("setDate",t[0]),e(this.range[1]).datepicker("setDate",t[1])):this.instance.datepicker("setDate",t)},enable:function(){this.date?this.date.enable():(this.startDate.enable(),this.endDate.enable())},disable:function(){this.date?this.date.disable():(this.startDate.disable(),this.endDate.disable())},destroy:function(){this.date?this.date.destroy():(this.startDate.destroy(),this.endDate.destroy()),this.instance.remove()}};var u="bizCalendar";return e.extend(e.fn,{bizCalendar:function(t,n){var r;switch(t){case"getDate":return this.data(u).getDate();case"setDate":this.each(function(){r=e(this).data(u),r&&r.setDate(n)});break;case"enable":this.each(function(){r=e(this).data(u),r&&r.enable()});break;case"disable":this.each(function(){r=e(this).data(u),r&&r.disable()});break;case"destroy":this.each(function(){r=e(this).data(u),r&&(r.destroy(),e(this).data(u,null))});break;default:this.each(function(){e(this).data(u)||e(this).data(u,new i(this,t))})}return this}}),i}),r("ui/util",["require"],function(e){var t={};return t.isArray=function(e){return toString.call(e)==="[object Array]"},t.escapeHTML=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},t}),function i(e,t,r){function s(u,a){if(!t[u]){if(!e[u]){var f=typeof n=="function"&&n;if(!a&&f)return f(u,!0);if(o)return o(u,!0);var l=new Error("Cannot find module '"+u+"'");throw l.code="MODULE_NOT_FOUND",l}var c=t[u]={exports:{}};e[u][0].call(c.exports,function(t){var n=e[u][1][t];return s(n?n:t)},c,c.exports,i,e,t,r)}return t[u].exports}var o=typeof n=="function"&&n;for(var u=0;u<r.length;u++)s(r[u]);return s}({1:[function(t,n,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var s=t("./class"),o=i(s),u=t("./constants");e.fn.resizableColumns=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return this.each(function(){var n=e(this),i=n.data(u.DATA_API);if(!i)i=new o["default"](n,t),n.data(u.DATA_API,i);else if(typeof t=="string")return i[t].apply(i,r)})},e.resizableColumns=o["default"]},{"./class":2,"./constants":3}],2:[function(t,n,r){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=t("./constants"),u=function(){function t(n,r){s(this,t),this.ns=".rc"+this.count++,this.options=e.extend({},t.defaults,r),this.$window=e(window),this.$ownerDocument=e(n[0].ownerDocument),this.$table=n,this.$content=n.parent().parent().find('.biz-table-body tr[class!="no-data"]:first td'),this.hasContent=this.$content.length!==0,this.refreshHeaders(),this.restoreColumnWidths(),this.syncHandleWidths(),this.bindEvents(this.$window,"resize",this.syncHandleWidths.bind(this)),this.options.start&&this.bindEvents(this.$table,o.EVENT_RESIZE_START,this.options.start),this.options.resize&&this.bindEvents(this.$table,o.EVENT_RESIZE,this.options.resize),this.options.stop&&this.bindEvents(this.$table,o.EVENT_RESIZE_STOP,this.options.stop)}return i(t,[{key:"refreshHeaders",value:function(){var t=this.options.selector;typeof t=="function"&&(t=t.call(this,this.$table)),this.$tableHeaders=this.$table.find(t),this.assignPercentageWidths(),this.createHandles()}},{key:"createHandles",value:function(){var n=this,r=this.$handleContainer;r!=null&&r.remove(),this.$handleContainer=e("<div class='"+o.CLASS_HANDLE_CONTAINER+"' />"),this.$table.before(this.$handleContainer),this.$tableHeaders.each(function(t,r){var i=n.$tableHeaders.eq(t),s=n.$tableHeaders.eq(t+1);if(s.length===0||i.is(o.SELECTOR_UNRESIZABLE)||s.is(o.SELECTOR_UNRESIZABLE))return;var u=e("<div class='"+o.CLASS_HANDLE+"' />").data(o.DATA_TH,e(r)).appendTo(n.$handleContainer)}),this.bindEvents(this.$handleContainer,["mousedown","touchstart"],"."+o.CLASS_HANDLE,this.onPointerDown.bind(this))}},{key:"assignPercentageWidths",value:function(){var n=this;this.$tableHeaders.each(function(t,r){var i=e(r),s=i.outerWidth()/n.$table.width()*100;n.setWidth(i[0],s),n.hasContent&&n.setWidth(n.$content[t],s)})}},{key:"syncHandleWidths",value:function(){var n=this,r=this.$handleContainer;r.width(this.$table.width()),r.find("."+o.CLASS_HANDLE).each(function(t,r){var i=e(r),s=n.options.resizeFromBody?n.$table.height():n.$table.find("thead").height(),u=i.data(o.DATA_TH).outerWidth()+(i.data(o.DATA_TH).offset().left-n.$handleContainer.offset().left);i.css({left:u,height:s})})}},{key:"saveColumnWidths",value:function(){var n=this;this.$tableHeaders.each(function(t,r){var i=e(r);n.options.store&&!i.is(o.SELECTOR_UNRESIZABLE)&&n.options.store.set(n.generateColumnId(i),n.parseWidth(r))})}},{key:"restoreColumnWidths",value:function(){var n=this;this.$tableHeaders.each(function(t,r){var i=e(r);if(n.options.store&&!i.is(o.SELECTOR_UNRESIZABLE)){var s=n.options.store.get(n.generateColumnId(i));s!=null&&n.setWidth(r,s)}})}},{key:"onPointerDown",value:function(n){if(n.which!==1)return;this.operation&&this.onPointerUp(n);var r=e(n.currentTarget);if(r.is(o.SELECTOR_UNRESIZABLE))return;var i=r.index(),s=this.$tableHeaders.eq(i).not(o.SELECTOR_UNRESIZABLE),u=this.$tableHeaders.eq(i+1).not(o.SELECTOR_UNRESIZABLE),a=this.parseWidth(s[0]),f=this.parseWidth(u[0]);this.operation={$leftColumn:s,$rightColumn:u,$currentGrip:r,startX:this.getPointerX(n),widths:{left:a,right:f},newWidths:{left:a,right:f}},this.hasContent&&(this.operation.$leftContent=this.$content.eq(i),this.operation.$rightContent=this.$content.eq(i+1)),this.bindEvents(this.$ownerDocument,["mousemove","touchmove"],this.onPointerMove.bind(this)),this.bindEvents(this.$ownerDocument,["mouseup","touchend"],this.onPointerUp.bind(this)),this.$handleContainer.add(this.$table).addClass(o.CLASS_TABLE_RESIZING),s.add(u).add(r).addClass(o.CLASS_COLUMN_RESIZING),this.triggerEvent(o.EVENT_RESIZE_START,[s,u,a,f],n),n.preventDefault()}},{key:"onPointerMove",value:function(t){var n=this.operation;if(!this.operation)return;var r=(this.getPointerX(t)-n.startX)/this.$table.width()*100;if(r===0)return;var i=n.$leftColumn[0],s=n.$rightColumn[0];if(this.hasContent)var u=n.$leftContent[0],a=n.$rightContent[0];var f=undefined,l=undefined,c=(n.$leftColumn.data("width")+17)/this.$table.width()*100,h=(n.$rightColumn.data("width")+17)/this.$table.width()*100;return r>0?(f=this.constrainWidth(n.widths.left+(n.widths.right-n.newWidths.right)),l=Math.max(h,n.widths.right-r)):r<0&&(f=Math.max(c,n.widths.left+r),l=this.constrainWidth(n.widths.right+(n.widths.left-n.newWidths.left))),i&&(this.setWidth(i,f),this.hasContent&&this.setWidth(u,f)),s&&(this.setWidth(s,l),this.hasContent&&this.setWidth(a,l)),n.newWidths.left=f,n.newWidths.right=l,this.triggerEvent(o.EVENT_RESIZE,[n.$leftColumn,n.$rightColumn,f,l],t)}},{key:"onPointerUp",value:function(t){var n=this.operation;if(!this.operation)return;return this.unbindEvents(this.$ownerDocument,["mouseup","touchend","mousemove","touchmove"]),this.$handleContainer.add(this.$table).removeClass(o.CLASS_TABLE_RESIZING),n.$leftColumn.add(n.$rightColumn).add(n.$currentGrip).removeClass(o.CLASS_COLUMN_RESIZING),this.syncHandleWidths(),this.saveColumnWidths(),this.operation=null,this.triggerEvent(o.EVENT_RESIZE_STOP,[n.$leftColumn,n.$rightColumn,n.newWidths.left,n.newWidths.right],t)}},{key:"destroy",value:function(){var t=this.$table,n=this.$handleContainer.find("."+o.CLASS_HANDLE);return this.unbindEvents(this.$window.add(this.$ownerDocument).add(this.$table).add(n)),n.removeData(o.DATA_TH),t.removeData(o.DATA_API),this.$handleContainer.remove(),this.$handleContainer=null,this.$tableHeaders=null,this.$table=null,t}},{key:"bindEvents",value:function(t,n,r,i){typeof n=="string"?n+=this.ns:n=n.join(this.ns+" ")+this.ns,arguments.length>3?t.on(n,r,i):t.on(n,r)}},{key:"unbindEvents",value:function(t,n){typeof n=="string"?n+=this.ns:n!=null?n=n.join(this.ns+" ")+this.ns:n=this.ns,t.off(n)}},{key:"triggerEvent",value:function(n,r,i){var s=e.Event(n);return s.originalEvent&&(s.originalEvent=e.extend({},i)),this.$table.trigger(s,[this].concat(r||[]))}},{key:"generateColumnId",value:function(t){return this.$table.data(o.DATA_COLUMNS_ID)+"-"+t.data(o.DATA_COLUMN_ID)}},{key:"parseWidth",value:function(t){return t?parseFloat(t.style.width.replace("%","")):0}},{key:"setWidth",value:function(t,n){n=n.toFixed(2),n=n>0?n:0,t.style.width=n+"%"}},{key:"constrainWidth",value:function(t){return this.options.minWidth!=undefined&&(t=Math.max(this.options.minWidth,t)),this.options.maxWidth!=undefined&&(t=Math.min(this.options.maxWidth,t)),t}},{key:"getPointerX",value:function(t){return t.type.indexOf("touch")===0?(t.originalEvent.touches[0]||t.originalEvent.changedTouches[0]).pageX:t.pageX}}]),t}();r["default"]=u,u.defaults={selector:function(t){return t.find("thead").length?o.SELECTOR_TH:o.SELECTOR_TD},store:window.store,syncHandlers:!0,resizeFromBody:!0,maxWidth:null,minWidth:.01},u.count=0,n.exports=r["default"]},{"./constants":3}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="resizableColumns";n.DATA_API=r;var i="resizable-columns-id";n.DATA_COLUMNS_ID=i;var s="resizable-column-id";n.DATA_COLUMN_ID=s;var o="th";n.DATA_TH=o;var u="rc-table-resizing";n.CLASS_TABLE_RESIZING=u;var a="rc-column-resizing";n.CLASS_COLUMN_RESIZING=a;var f="rc-handle";n.CLASS_HANDLE=f;var l="rc-handle-container";n.CLASS_HANDLE_CONTAINER=l;var c="column:resize:start";n.EVENT_RESIZE_START=c;var h="column:resize";n.EVENT_RESIZE=h;var p="column:resize:stop";n.EVENT_RESIZE_STOP=p;var d="tr:first > th:visible";n.SELECTOR_TH=d;var v="tr:first > td:visible";n.SELECTOR_TD=v;var m="[data-noresize]";n.SELECTOR_UNRESIZABLE=m},{}],4:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./class"),s=r(i),o=e("./adapter"),u=r(o);n["default"]=s["default"],t.exports=n["default"]},{"./adapter":1,"./class":2}]},{},[4]),r("dep/jquery.resizableColumns",function(){}),r("dep/jquery.editabletable",["require"],function(t){e.fn.editableTableWidget=function(t){"use strict";return e(this).each(function(){var n=function(){var t=e.extend({},e.fn.editableTableWidget.defaultOptions);return t.editor=t.editor.clone(),t},r=e.extend(n(),t),i=37,s=38,o=39,u=40,a=13,f=27,l=9,c=e(this),h=r.editor.css("position","absolute").hide().appendTo(c.parent()),p,d=function(e){p=c.find("td:focus"),p.length&&(h.val(p.text()).removeClass("error").show().offset(p.offset()).css(p.css(r.cloneProperties)).width(p.width()).height(p.height()).focus(),e&&h.select())},v=function(){var t=e.trim(h.val()),n=e.Event("change"),r;if(!p||p.text()===t||h.hasClass("error"))return!0;r=p.html(),p.text(t).trigger(n,t),n.result===!1&&p.html(r)},m=function(e,t){return t===o?e.next("td"):t===i?e.prev("td"):t===s?e.parent().prev().children().eq(e.index()):t===u?e.parent().next().children().eq(e.index()):[]};h.blur(function(){v(),h.hide()}).keydown(function(e){if(e.which===a)v(),h.hide(),p.focus(),e.preventDefault(),e.stopPropagation();else if(e.which===f)h.val(p.text()),e.preventDefault(),e.stopPropagation(),h.hide(),p.focus();else if(e.which===l)p.focus();else if(this.selectionEnd-this.selectionStart===this.value.length){var t=m(p,e.which);t.length>0&&(t.focus(),e.preventDefault(),e.stopPropagation())}}).on("input paste",function(){var t=e.Event("validate");p.trigger(t,e.trim(h.val())),t.result===!1?h.addClass("error"):h.removeClass("error")}),c.on("click.bizTableEdit","td[editable]",d),c.find("td").prop("tabindex",1),e(window).on("resize",function(){h.is(":visible")&&h.offset(p.offset()).width(p.width()).height(p.height())})})},e.fn.editableTableWidget.defaultOptions={cloneProperties:["padding","padding-top","padding-bottom","padding-left","padding-right","text-align","font","font-size","font-family","font-weight"],editor:e('<input class="biz-table-editor">')}}),r("ui/Table",["require","ui/util","dep/jquery.resizableColumns","dep/jquery.editabletable"],function(t){function r(t,n){if(t instanceof jQuery){if(!(t.length>0))return;t=t[0]}if(!o(t))return;this.main=t,this.$main=e(this.main);var r={data:[],selectable:!1,resizable:!1,topOffset:0,lockHead:!1};this.options=e.extend(!0,r,n||{}),this.init(this.options)}function o(e){return e.nodeType===1&&e.tagName.toLowerCase()==="div"}var n=t("ui/util");t("dep/jquery.resizableColumns"),t("dep/jquery.editabletable");var i="biz-table",s="biz-table-select-row-";r.prototype={init:function(t){this.$main.html('<div class="biz-table-head-wrap"><table class="biz-table-head"></table></div><div class="biz-table-placeholder"></div><div class="biz-table-body-wrap"><table class="biz-table-body"></table></div>'),this.$headWrap=this.$main.find(".biz-table-head-wrap"),this.$bodyWrap=this.$main.find(".biz-table-body-wrap"),this.$placeholder=this.$main.find(".biz-table-placeholder"),this.$tableHead=this.$main.find(".biz-table-head"),this.$tableBody=this.$main.find(".biz-table-body");var n=t.skin?" "+t.skin:"";this.$tableHead.html(this.createTableHead(t)).addClass(i+n),this.$tableBody.html(this.createTableBody(t)).addClass(i+n+(this.rowSpan>1?" biz-rowspan":"")),t.selectable&&(this.createSelect(),this.bindSelect()),t.data.length?(t.foot==="top"&&this.$tableBody.find("tbody").prepend(this.createFoot(t)),t.foot==="bottom"&&this.$tableBody.find("tbody").append(this.createFoot(t))):t.noDataContent&&this.createNoDataContent(),this.syncWidth(),e(window).on("resize.bizTable",function(){r.syncWidth()});var r=this;this.$headWrap.on("scroll",function(){r.$bodyWrap[0].scrollLeft=this.scrollLeft}),this.$bodyWrap.on("scroll",function(){r.$headWrap[0].scrollLeft=this.scrollLeft});if(t.lockHead){var s=this.$headWrap.height();e(window).on("scroll.bizTable",function(){var n=r.$main.offset().top-t.topOffset;e(window).scrollTop()>n?r.hasLocked||(r.$headWrap.css({position:"fixed",top:r.options.topOffset,width:r.$main.width()}),r.$placeholder.css({height:s+r.options.topOffset}),r.hasLocked=!0):r.hasLocked&&(r.$headWrap.css({position:"static",top:"auto",width:"auto"}),r.$placeholder.css({height:0}),r.hasLocked=!1)})}t.resizable&&(this.setMinWidth(),this.$tableHead.resizableColumns({start:function(){e(".biz-table-editor").blur()}})),t.onSort&&this.bindSort(),this.$tableBody.editableTableWidget(),t.onEdit&&this.bindEdit(),t.onValidate&&this.bindValidate()},syncWidth:function(){this.$headWrap.css({width:this.$main.width()}),this.$tableHead.css({width:this.$tableBody.width()})},setMinWidth:function(){var t=e.map(this.options.column,function(e,t){return typeof e.visible!="undefined"&&!e.visible?0:e.width+17}),n=this.options.selectable?37:0;e.each(t,function(e,t){n+=t}),this.$tableHead.css("min-width",n),this.$tableBody.css("min-width",n),this.syncWidth()},createTableHead:function(e){var t=["<thead><tr>"],r=e.column,i=r.length;this.rowSpan=1;for(var s=0;s<i;s++){var o=r[s];if(typeof o.visible!="undefined"&&!o.visible)continue;n.isArray(o.content)||(o.content=[o.content]),o.content.length>this.rowSpan&&(this.rowSpan=o.content.length);var u=typeof o.sortable=="undefined"||!o.sortable?"":" sortable",a=o.sortable&&typeof o.currentSort!="undefined"?" "+o.currentSort:"",f=o.width?' width="'+o.width+'"':"",l=typeof o.escapeTitle=="undefined"||o.escapeTitle?n.escapeHTML(o.title):o.title;t.push('<th nowrap data-width="'+o.width+'"'+f+u+a+' field="'+o.field+'">'+l+"</th>")}return t.push("</tr></thead><tbody></tbody>"),t.join("")},createTableBody:function(e){var t=["<tbody>"],r=e.column,i=r.length,s=e.data,o=s.length;for(var u=0;u<o;u++){t.push("<tr>");for(var a=0;a<i;a++){var f=r[a];if(typeof f.visible!="undefined"&&!f.visible)continue;var l=f.content.length>1||typeof f.editable=="undefined"||!f.editable?"":" editable",c=f.align?' align="'+f.align+'"':"",h=f.width?' width="'+(l!==""?f.width-22:f.width)+'"':"",p=this.rowSpan>1&&f.content.length===1?' rowspan="'+this.rowSpan+'"':"",d=f.content[0].apply(this,[s[u],u+1,f.field])+"",v=typeof f.escapeContent=="undefined"||f.escapeContent?n.escapeHTML(d):d;t.push("<td"+h+p+l+c+">"+v+"</td>")}t.push("</tr>");if(this.rowSpan>1)for(var m=1;m<this.rowSpan;m++){t.push("<tr>");for(var g=1;g<i;g++){var y=r[g];if(typeof y.visible!="undefined"&&!y.visible||y.content.length===1)continue;var b=y.align?' align="'+y.align+'"':"",w=y.content[m].apply(this,[s[u],u+1,y.field])+"",E=typeof y.escapeContent=="undefined"||y.escapeContent?n.escapeHTML(w):w;t.push("<td"+b+">"+E+"</td>")}t.push("</tr>")}}return t.push("</tbody>"),t.join("")},createFoot:function(e){var t=['<tr class="sum">'],r=e.column,i=r.length;e.selectable&&t.push('<td width="20"></td>');for(var s=0;s<i;s++){var o=r[s];if(typeof o.visible!="undefined"&&!o.visible)continue;var u=o.align?' align="'+o.align+'"':"",a=o.width?' width="'+o.width+'"':"",f=o.footContent?o.footContent.call(this,o.field)+"":"",l=typeof o.escapeContent=="undefined"||o.escapeContent?n.escapeHTML(f):f;t.push("<td"+a+u+">"+l+"</td>")}return t.push("</tr>"),t.join("")},createNoDataContent:function(){var t=this.options.column.length;e.each(this.options.column,function(e,n){typeof n.visible!="undefined"&&!n.visible&&(t-=1)}),this.options.selectable&&(t+=1),this.$tableBody.find("tbody").append('<tr class="no-data"><td colspan="'+t+'">'+this.options.noDataContent+"</td></tr>")},createSelect:function(){this.options.data.length&&this.$tableHead.find("tr").prepend('<th nowrap data-width="20" width="20"><input type="checkbox" title=" " id="'+(s+0)+'" /></th>');if(this.rowSpan===1)this.$tableBody.find("tr").each(function(t,n){e(n).prepend('<td width="20" align="center"><input type="checkbox" title=" " id="'+(s+(t+1))+'" /></td>')});else{var t=this,n=1;this.$tableBody.find("tr").each(function(r,i){(r+t.rowSpan)%t.rowSpan===0&&(e(i).prepend('<td width="20" align="center" rowspan="'+t.rowSpan+'"><input type="checkbox" title=" " id="'+(s+n)+'" /></td>'),n+=1)})}this.$main.find(":checkbox").bizCheckbox()},bindSelect:function(){var t=this;this.$main.on("click.bizTableSelectAll",".biz-table-head th .biz-label",function(n){var r=e(n.target).hasClass("biz-checkbox-checked"),i=t.$tableBody.find(":checkbox"),s=t.$tableBody.find('tr[class!="sum"]');r?(i.bizCheckbox("check"),s.addClass("selected"),t.options.onSelect&&t.options.onSelect.call(t,t.options.data,n)):(i.bizCheckbox("uncheck"),s.removeClass("selected"),t.options.onSelect&&t.options.onSelect.call(t,[],n))}).on("click.bizTableSelectOne",".biz-table-body td .biz-label",function(n){var r=e(n.target).hasClass("biz-checkbox-checked"),i=t.$tableBody.find(".biz-checkbox-checked").length,s=t.$tableHead.find(":checkbox"),o=e(n.target).parent().parent(),u=t.options.data.length;i===u?s.bizCheckbox("check"):s.bizCheckbox("uncheck"),r?o.addClass("selected"):o.removeClass("selected"),t.options.onSelect&&t.options.onSelect.call(t,e.map(t.getSelectedIndex(),function(e,n){return t.options.data[e]}),n)})},getSelectedIndex:function(){return e.map(this.$tableBody.find(".biz-checkbox-checked"),function(t,n){return parseInt(e(t).attr("for").replace(s,""),10)-1})},bindSort:function(){var t=this;this.$main.on("click.bizTableSort",".biz-table-head th[sortable]",function(n){var r=e(n.currentTarget),i=r.attr("field");r.attr("des")!==undefined?r.removeAttr("des").attr("asc",""):r.attr("asc")!==undefined?r.removeAttr("asc").attr("des",""):(r.parent().children("th").removeAttr("des").removeAttr("asc"),r.attr("des","")),e.each(t.options.column,function(e,t){t.field===i?t.currentSort=r.attr("des")!==undefined?"des":"asc":t.currentSort&&delete t.currentSort}),t.options.onSort.call(t,{field:r.attr("field"),des:r.attr("des")!==undefined,asc:r.attr("asc")!==undefined},n)})},bindValidate:function(){var t=this;this.$main.find("td[editable]").on("validate",function(n,r){var i=e(this).parent().find("td").index(e(this));return t.options.selectable&&(i-=1),t.options.onValidate.call(t,{newValue:r,field:t.options.column[i].field},n)})},bindEdit:function(){var t=this;this.$main.find("td[editable]").on("change",function(n,r){var i=parseInt(e(this).parent().find(":checkbox").attr("id").replace(s,""),10),o=e(this).parent().find("td").index(e(this));t.options.selectable&&(o-=1);var u=t.options.column[o].field;t.options.data[i-1][u]=r,t.options.onEdit.call(t,{newValue:r,item:t.options.data[i-1],index:i,field:u},n)})},getData:function(){return this.options.data},updateData:function(t){this.options.data=e.map(t||[],function(e,t){return e}),this.refresh()},updateRow:function(t,n){this.options.data[t-1]=e.extend(!0,{},n),this.refresh()},updateCell:function(e,t,n){this.options.data[e-1][t]=n,this.refresh()},getSelected:function(){var t=this;return e.map(this.getSelectedIndex(),function(e,n){return t.options.data[e]})},setSelected:function(t,r){var i=this;t===0&&(t=e.map(this.options.data,function(e,t){return t+1})),n.isArray(t)||(t=[t]),e.each(t,function(e,t){var n=i.$main.find("#"+s+t),o=n.parent().parent();r?(n.bizCheckbox("check"),o.addClass("selected")):(n.bizCheckbox("uncheck"),o.removeClass("selected"))});var o=this.$tableHead.find(":checkbox");this.$tableBody.find(".biz-checkbox-checked").length===this.options.data.length?o.bizCheckbox("check"):o.bizCheckbox("uncheck")},showColumn:function(e){this.setColumnVisible(e,!0)},hideColumn:function(e){this.setColumnVisible(e,!1)},setColumnVisible:function(t,r){n.isArray(t)||(t=[t]);var i=this;e.each(t,function(t,n){e.each(i.options.column,function(e,t){t.field===n&&(t.visible=r)})}),this.refresh()},refresh:function(){this.$main.find(":checkbox").bizCheckbox("destroy"),this.$tableBody.find("td[editable]").off(),this.$tableHead.html(this.createTableHead(this.options)),this.$tableBody.html(this.createTableBody(this.options)),this.options.selectable&&this.createSelect(),this.options.data.length?(this.options.foot==="top"&&this.$tableBody.find("tbody").prepend(this.createFoot(this.options)),this.options.foot==="bottom"&&this.$tableBody.find("tbody").append(this.createFoot(this.options))):this.options.noDataContent&&this.createNoDataContent(),this.syncWidth(),this.$headWrap[0].scrollLeft=this.$bodyWrap[0].scrollLeft=0,this.options.resizable&&(this.setMinWidth(),this.$tableHead.resizableColumns("destroy").resizableColumns({start:function(){e(".biz-table-editor").blur()}})),this.$tableBody.find("td").prop("tabindex",1),this.options.onEdit&&this.bindEdit(),this.options.onValidate&&this.bindValidate()},destroy:function(){this.$main.find(":checkbox").bizCheckbox("destroy"),this.$tableBody.find("td[editable]").off(),e(".biz-table-editor").off().remove(),this.$main.off("click.bizTableSelectAll").off("click.bizTableSelectOne").off("click.bizTableSort"),this.options.resizable&&this.$tableHead.resizableColumns("destroy"),e(window).off("scroll.bizTable"),this.$headWrap.off(),this.$bodyWrap.off(),this.$main.empty()}};var u="bizTable";return e.extend(e.fn,{bizTable:function(t,n){var i;switch(t){case"getData":return this.data(u).getData();case"updateData":this.each(function(){i=e(this).data(u),i&&i.updateData(n)});break;case"updateRow":this.each(function(){i=e(this).data(u),i&&i.updateRow(s[1],s[2])});break;case"updateCell":this.each(function(){i=e(this).data(u),i&&i.updateCell(s[1],s[2],s[3])});break;case"getSelected":return this.data(u).getSelected();case"setSelected":var s=arguments;this.each(function(){i=e(this).data(u),i&&i.setSelected(s[1],s[2])});break;case"showColumn":this.each(function(){i=e(this).data(u),i&&i.showColumn(n)});break;case"hideColumn":this.each(function(){i=e(this).data(u),i&&i.hideColumn(n)});break;case"destroy":this.each(function(){i=e(this).data(u),i&&(i.destroy(),e(this).data(u,null))});break;default:this.each(function(){!e(this).data(u)&&o(this)&&e(this).data(u,new r(this,t))})}return this}}),r}),r("dep/jquery.treetable",["require"],function(t){var n,r,i;n=function(){function t(t,n,r){var i;this.row=t,this.tree=n,this.settings=r,this.id=this.row.data(this.settings.nodeIdAttr),i=this.row.data(this.settings.parentIdAttr),i!=null&&i!==""&&(this.parentId=i),this.treeCell=e(this.row.children(this.settings.columnElType)[this.settings.column]),this.expander=e(this.settings.expanderTemplate),this.indenter=e(this.settings.indenterTemplate),this.children=[],this.initialized=!1,this.treeCell.prepend(this.indenter)}return t.prototype.addChild=function(e){return this.children.push(e)},t.prototype.ancestors=function(){var e,t;t=this,e=[];while(t=t.parentNode())e.push(t);return e},t.prototype.collapse=function(){return this.collapsed()?this:(this.row.removeClass("expanded").addClass("collapsed"),this._hideChildren(),this.expander.attr("title",this.settings.stringExpand),this.initialized&&this.settings.onNodeCollapse!=null&&this.settings.onNodeCollapse.apply(this),this)},t.prototype.collapsed=function(){return this.row.hasClass("collapsed")},t.prototype.expand=function(){return this.expanded()?this:(this.row.removeClass("collapsed").addClass("expanded"),this.initialized&&this.settings.onNodeExpand!=null&&this.settings.onNodeExpand.apply(this),e(this.row).is(":visible")&&this._showChildren(),this.expander.attr("title",this.settings.stringCollapse),this)},t.prototype.expanded=function(){return this.row.hasClass("expanded")},t.prototype.hide=function(){return this._hideChildren(),this.row.hide(),this},t.prototype.isBranchNode=function(){return this.children.length>0||this.row.data(this.settings.branchAttr)===!0?!0:!1},t.prototype.updateBranchLeafClass=function(){this.row.removeClass("branch"),this.row.removeClass("leaf"),this.row.addClass(this.isBranchNode()?"branch":"leaf")},t.prototype.level=function(){return this.ancestors().length},t.prototype.parentNode=function(){return this.parentId!=null?this.tree[this.parentId]:null},t.prototype.removeChild=function(t){var n=e.inArray(t,this.children);return this.children.splice(n,1)},t.prototype.render=function(){var t,n=this.settings,r;return n.expandable===!0&&this.isBranchNode()&&(t=function(t){return e(this).parents("table").treetable("node",e(this).parents("tr").data(n.nodeIdAttr)).toggle(),t.preventDefault()},this.indenter.html(this.expander),r=n.clickableNodeNames===!0?this.treeCell:this.expander,r.off("click.treetable").on("click.treetable",t),r.off("keydown.treetable").on("keydown.treetable",function(e){e.keyCode==13&&t.apply(this,[e])})),this.indenter[0].style.paddingLeft=""+this.level()*n.indent+"px",this},t.prototype.reveal=function(){return this.parentId!=null&&this.parentNode().reveal(),this.expand()},t.prototype.setParent=function(e){return this.parentId!=null&&this.tree[this.parentId].removeChild(this),this.parentId=e.id,this.row.data(this.settings.parentIdAttr,e.id),e.addChild(this)},t.prototype.show=function(){return this.initialized||this._initialize(),this.row.show(),this.expanded()&&this._showChildren(),this},t.prototype.toggle=function(){return this.expanded()?this.collapse():this.expand(),this},t.prototype._hideChildren=function(){var e,t,n,r,i;r=this.children,i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push(e.hide());return i},t.prototype._initialize=function(){var e=this.settings;return this.render(),e.expandable===!0&&e.initialState==="collapsed"?this.collapse():this.expand(),e.onNodeInitialized!=null&&e.onNodeInitialized.apply(this),this.initialized=!0},t.prototype._showChildren=function(){var e,t,n,r,i;r=this.children,i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push(e.show());return i},t}(),r=function(){function t(e,t){this.table=e,this.settings=t,this.tree={},this.nodes=[],this.roots=[]}return t.prototype.collapseAll=function(){var e,t,n,r,i;r=this.nodes,i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push(e.collapse());return i},t.prototype.expandAll=function(){var e,t,n,r,i;r=this.nodes,i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push(e.expand());return i},t.prototype.findLastNode=function(e){return e.children.length>0?this.findLastNode(e.children[e.children.length-1]):e},t.prototype.loadRows=function(t){var r,i,s;if(t!=null)for(s=0;s<t.length;s++)i=e(t[s]),i.data(this.settings.nodeIdAttr)!=null&&(r=new n(i,this.tree,this.settings),this.nodes.push(r),this.tree[r.id]=r,r.parentId!=null&&this.tree[r.parentId]?this.tree[r.parentId].addChild(r):this.roots.push(r));for(s=0;s<this.nodes.length;s++)r=this.nodes[s].updateBranchLeafClass();return this},t.prototype.move=function(t,n){var r=t.parentNode();return t!==n&&n.id!==t.parentId&&e.inArray(t,n.ancestors())===-1&&(t.setParent(n),this._moveRows(t,n),t.parentNode().children.length===1&&t.parentNode().render()),r&&r.updateBranchLeafClass(),t.parentNode()&&t.parentNode().updateBranchLeafClass(),t.updateBranchLeafClass(),this},t.prototype.removeNode=function(t){return this.unloadBranch(t),t.row.remove(),t.parentId!=null&&t.parentNode().removeChild(t),delete this.tree[t.id],this.nodes.splice(e.inArray(t,this.nodes),1),this},t.prototype.render=function(){var e,t,n,r;r=this.roots;for(t=0,n=r.length;t<n;t++)e=r[t],e.show();return this},t.prototype.sortBranch=function(e,t){return e.children.sort(t),this._sortChildRows(e),this},t.prototype.unloadBranch=function(e){var t=e.children.slice(0),n;for(n=0;n<t.length;n++)this.removeNode(t[n]);return e.children=[],e.updateBranchLeafClass(),this},t.prototype._moveRows=function(e,t){var n=e.children,r;e.row.insertAfter(t.row),e.render();for(r=n.length-1;r>=0;r--)this._moveRows(n[r],e)},t.prototype._sortChildRows=function(e){return this._moveRows(e,e)},t}(),i={init:function(t,n){var i;return i=e.extend({branchAttr:"ttBranch",clickableNodeNames:!1,column:0,columnElType:"td",expandable:!1,expanderTemplate:"<a href='#'>&nbsp;</a>",indent:19,indenterTemplate:"<span class='indenter'></span>",initialState:"collapsed",nodeIdAttr:"ttId",parentIdAttr:"ttParentId",stringExpand:"Expand",stringCollapse:"Collapse",onInitialized:null,onNodeCollapse:null,onNodeExpand:null,onNodeInitialized:null},t),this.each(function(){var t=e(this),s;if(n||t.data("treetable")===undefined)s=new r(this,i),s.loadRows(this.rows).render(),t.data("treetable",s),i.onInitialized!=null&&i.onInitialized.apply(s);return t})},destroy:function(){return this.each(function(){return e(this).removeData("treetable")})},collapseAll:function(){return this.data("treetable").collapseAll(),this},collapseNode:function(e){var t=this.data("treetable").tree[e];if(!t)throw new Error("Unknown node '"+e+"'");return t.collapse(),this},expandAll:function(){return this.data("treetable").expandAll(),this},expandNode:function(e){var t=this.data("treetable").tree[e];if(!t)throw new Error("Unknown node '"+e+"'");return t.initialized||t._initialize(),t.expand(),this},loadBranch:function(t,n){var r=this.data("treetable").settings,i=this.data("treetable").tree;n=e(n);if(t==null)this.append(n);else{var s=this.data("treetable").findLastNode(t);n.insertAfter(s.row)}return this.data("treetable").loadRows(n),n.filter("tr").each(function(){i[e(this).data(r.nodeIdAttr)].show()}),t!=null&&t.render().expand(),this},move:function(e,t){var n,r;return r=this.data("treetable").tree[e],n=this.data("treetable").tree[t],this.data("treetable").move(r,n),this},node:function(e){return this.data("treetable").tree[e]},removeNode:function(e){var t=this.data("treetable").tree[e];if(!t)throw new Error("Unknown node '"+e+"'");return this.data("treetable").removeNode(t),this},reveal:function(e){var t=this.data("treetable").tree[e];if(!t)throw new Error("Unknown node '"+e+"'");return t.reveal(),this},sortBranch:function(t,n){var r=this.data("treetable").settings,i,s;return n=n||r.column,s=n,e.isNumeric(n)&&(s=function(t,r){var i,s,o;return i=function(t){var r=t.row.find("td:eq("+n+")").text();return e.trim(r).toUpperCase()},s=i(t),o=i(r),s<o?-1:s>o?1:0}),this.data("treetable").sortBranch(t,s),this},unloadBranch:function(e){return this.data("treetable").unloadBranch(e),this}},e.fn.treetable=function(t){return i[t]?i[t].apply(this,Array.prototype.slice.call(arguments,1)):typeof t=="object"||!t?i.init.apply(this,arguments):e.error("Method "+t+" does not exist on jQuery.treetable")}}),r("ui/TreeTable",["require","dep/jquery.resizableColumns","dep/jquery.treetable"],function(t){function n(t,n){if(t instanceof jQuery){if(!(t.length>0))return;t=t[0]}if(!i(t))return;this.main=t,this.$main=e(this.main);var r={resizable:!0,expanded:!0};this.options=e.extend(r,n||{}),this.init(this.options)}function i(e){return e.nodeType===1&&e.tagName.toLowerCase()==="table"}t("dep/jquery.resizableColumns"),t("dep/jquery.treetable");var r="biz-table biz-treetable";n.prototype={init:function(t){this.$main.addClass(r);var n=this;this.$main.treetable({expandable:!0,stringCollapse:"",stringExpand:"",initialState:t.expanded?"expanded":"collapsed",onInitialized:t.onLoad,onNodeCollapse:t.onCollapse,onNodeExpand:t.onExpand}).on("click.bizTreeTable","tbody tr",function(r){e(".tree-selected").not(this).removeClass("tree-selected"),e(this).toggleClass("tree-selected");if(e(this).hasClass("tree-selected")&&t.onSelect){var i=n.$main.treetable("node",e(this).attr("data-tt-id"));t.onSelect.call(i)}}),t.resizable&&this.$main.resizableColumns()},collapseAll:function(){this.$main.treetable("collapseAll")},collapseNode:function(e){this.$main.treetable("collapseNode",e)},expandAll:function(){this.$main.treetable("expandAll")},expandNode:function(e){this.$main.treetable("expandNode",e)},selectNode:function(e){this.$main.treetable("reveal",e),this.$main.find('tr[data-tt-id="'+e+'"]').click()},destroy:function(){this.$main.removeClass(r).treetable("destroy").off("click.bizTreeTable"),this.$main.find("span.indenter a").off(),this.$main.find("span.indenter").remove(),this.$main.resizableColumns("destroy")}};var s="bizTreeTable";return e.extend(e.fn,{bizTreeTable:function(t,r){var o;switch(t){case"destroy":this.each(function(){o=e(this).data(s),o&&(o.destroy(),e(this).data(s,null))});break;case"collapseAll":this.each(function(){o=e(this).data(s),o&&o.collapseAll()});break;case"collapseNode":this.each(function(){o=e(this).data(s),o&&o.collapseNode(r)});break;case"expandAll":this.each(function(){o=e(this).data(s),o&&o.expandAll()});break;case"expandNode":this.each(function(){o=e(this).data(s),o&&o.expandNode(r)});break;case"selectNode":this.each(function(){o=e(this).data(s),o&&o.selectNode(r)});break;default:this.each(function(){!e(this).data(s)&&i(this)&&e(this).data(s,new n(this,t))})}return this}}),n}),r("bizui",["require","ui/Button","ui/Input","ui/Textarea","ui/Textline","ui/Radio","ui/Checkbox","ui/Select","ui/Dialog","ui/Panel","ui/Tooltip","ui/Tab","ui/Page","ui/Tree","ui/Calendar","ui/Table","ui/TreeTable"],function(t){var n={};n.version="1.1.4";var r=window.bizui;return n.noConflict=function(){return window.bizui=r,this},e.extend(n,{Button:t("ui/Button"),Input:t("ui/Input"),Textarea:t("ui/Textarea"),Textline:t("ui/Textline"),Radio:t("ui/Radio"),Checkbox:t("ui/Checkbox"),Select:t("ui/Select"),Dialog:t("ui/Dialog"),Panel:t("ui/Panel"),Tooltip:t("ui/Tooltip"),Tab:t("ui/Tab"),Page:t("ui/Page"),Tree:t("ui/Tree"),Calendar:t("ui/Calendar"),Table:t("ui/Table"),TreeTable:t("ui/TreeTable")}),n}),n("bizui")});